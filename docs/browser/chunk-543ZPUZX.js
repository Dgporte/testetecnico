import{a as D,b as R}from"./chunk-7FTP4AXE.js";import{D as B,G as M,J as e,K as t,L as d,M as F,N as s,O as _,P as a,R as P,fa as H,ha as k,ja as A,n as E,p as T,q as L,v as w,w as p,z as O}from"./chunk-S2RDY3SF.js";function q(f,n){if(f&1){let o=F();e(0,"div",74),d(1,"img",75),e(2,"button",76),s("click",function(){T(o);let r=_();return L(r.removePhoto())}),d(3,"i",77),t()()}if(f&2){let o=_();p(),M("src",o.selectedPhoto,w)}}var $=class f{http=E(H);funcionarioService=E(D);router=E(A);route=E(k);isLoading=!1;selectedPhoto=null;isEditMode=!1;funcionarioId=null;funcionario=null;ngOnInit(){this.route.queryParams.subscribe(n=>{n.id&&(this.isEditMode=!0,this.funcionarioId=n.id,this.funcionarioId&&this.carregarFuncionario(this.funcionarioId))})}carregarFuncionario(n){this.isLoading=!0,this.funcionarioService.obterFuncionario(n).subscribe({next:o=>{this.funcionario=o,this.preencherFormulario(o),this.isLoading=!1},error:o=>{console.error("Erro ao carregar funcion\xE1rio:",o),alert("Erro ao carregar dados do funcion\xE1rio."),this.router.navigate(["/lista-funcionarios"]),this.isLoading=!1}})}preencherFormulario(n){setTimeout(()=>{let o=document.getElementById("nome"),i=document.getElementById("email"),r=document.getElementById("telefone"),l=document.getElementById("cpf"),c=document.getElementById("cargo"),m=document.getElementById("salario"),u=document.getElementById("dataAdmissao"),v=document.getElementById("cep"),b=document.getElementById("rua"),x=document.getElementById("numero"),h=document.getElementById("complemento"),I=document.getElementById("bairro"),C=document.getElementById("cidade"),y=document.getElementById("estado"),g=document.getElementById("ativo");o&&(o.value=n.nome||""),i&&(i.value=n.email||""),r&&(r.value=n.telefone||""),l&&(l.value=n.cpf||""),c&&(c.value=n.cargo||""),m&&(m.value=this.formatarSalarioParaInput(n.salario||0)),u&&(u.value=n.dataNascimento||""),v&&(v.value=n.cep||""),b&&(b.value=n.endereco||""),x&&(x.value=n.numero||""),h&&(h.value=n.complemento||""),I&&(I.value=n.bairro||""),C&&(C.value=n.cidade||""),y&&(y.value=n.estado||""),g&&(g.value=n.ativo||"ativo"),this.selectedPhoto=n.foto||null},100)}formatarSalarioParaInput(n){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n)}onFileSelected(n){let o=n.target.files[0];if(o)if(o.type.startsWith("image/")){let i=new FileReader;i.onload=()=>{this.selectedPhoto=i.result},i.readAsDataURL(o)}else alert("Por favor, selecione apenas arquivos de imagem."),n.target.value="",this.selectedPhoto=null}removePhoto(){this.selectedPhoto=null;let n=document.getElementById("foto");n&&(n.value="")}buscarCep(n){let o=n.replace(/\D/g,"");if(o.length===8){let i=document.getElementById("cep");i.classList.add("loading"),this.http.get(`https://viacep.com.br/ws/${o}/json/`).subscribe({next:r=>{if(i.classList.remove("loading"),r.erro)alert("CEP n\xE3o encontrado!");else{let l=document.getElementById("rua"),c=document.getElementById("bairro"),m=document.getElementById("cidade"),u=document.getElementById("estado");l&&(l.value=r.logradouro||""),c&&(c.value=r.bairro||""),m&&(m.value=r.localidade||""),u&&(u.value=r.uf||""),!r.logradouro&&l&&l.focus()}},error:r=>{i.classList.remove("loading"),console.error("Erro ao buscar CEP:",r),alert("Erro ao buscar CEP. Tente novamente.")}})}}onCepChange(n){let o=n.target.value;this.buscarCep(o)}formatarCep(n){let o=n.target.value.replace(/\D/g,"");o=o.replace(/(\d{5})(\d)/,"$1-$2"),n.target.value=o}formatarCpf(n){let o=n.target.value.replace(/\D/g,"");o=o.replace(/(\d{3})(\d)/,"$1.$2"),o=o.replace(/(\d{3})(\d)/,"$1.$2"),o=o.replace(/(\d{3})(\d{1,2})$/,"$1-$2"),n.target.value=o}formatarTelefone(n){let o=n.target.value.replace(/\D/g,"");o=o.replace(/(\d{2})(\d)/,"($1) $2"),o=o.replace(/(\d{5})(\d)/,"$1-$2"),n.target.value=o}formatarSalario(n){let o=n.target.value.replace(/\D/g,"");o=(parseFloat(o)/100).toFixed(2),o=o.replace(".",","),o=o.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1."),n.target.value="R$ "+o}cadastrarFuncionario(){if(this.isLoading)return;let n=document.getElementById("nome"),o=document.getElementById("email"),i=document.getElementById("telefone"),r=document.getElementById("cpf"),l=document.getElementById("cargo"),c=document.getElementById("salario"),m=document.getElementById("dataAdmissao"),u=document.getElementById("cep"),v=document.getElementById("rua"),b=document.getElementById("numero"),x=document.getElementById("complemento"),h=document.getElementById("bairro"),I=document.getElementById("cidade"),C=document.getElementById("estado"),y=document.getElementById("ativo");if(!n?.value||!o?.value||!r?.value){alert("Por favor, preencha todos os campos obrigat\xF3rios.");return}let g={nome:n.value,email:o.value,telefone:i.value,cpf:r.value,cargo:l.value,salario:this.parseSalario(c.value),dataNascimento:m.value,cep:u.value,endereco:v.value,numero:b.value,complemento:x.value||void 0,bairro:h.value,cidade:I.value,estado:C.value,ativo:y.value,foto:this.selectedPhoto||""};this.isLoading=!0,this.isEditMode&&this.funcionarioId?this.funcionarioService.atualizarFuncionario(this.funcionarioId,g).subscribe({next:()=>{this.isLoading=!1,alert("Funcion\xE1rio atualizado com sucesso!"),this.router.navigate(["/lista-funcionarios"])},error:S=>{this.isLoading=!1,console.error("Erro ao atualizar:",S),alert("Erro ao atualizar funcion\xE1rio. Tente novamente.")}}):this.funcionarioService.adicionarFuncionario(g).subscribe({next:S=>{this.isLoading=!1,alert("Funcion\xE1rio cadastrado com sucesso!"),this.router.navigate(["/lista-funcionarios"])},error:S=>{this.isLoading=!1,console.error("Erro ao cadastrar:",S),alert("Erro ao cadastrar funcion\xE1rio. Tente novamente.")}})}parseSalario(n){let o=n.replace(/R\$\s?/g,"").replace(/\./g,"").replace(",",".");return parseFloat(o)||0}limparFormulario(){let n=document.querySelector("form");n&&n.reset()}static \u0275fac=function(o){return new(o||f)};static \u0275cmp=O({type:f,selectors:[["app-cadastro"]],decls:129,vars:4,consts:[[1,"global-background","cadastro-container"],[1,"page-container","cadastro-content"],[1,"cadastro-title"],[1,"cadastro-form",3,"submit"],[1,"form-columns"],[1,"column-left"],[1,"section-title"],["for","ativo"],["id","ativo","name","ativo","required","",1,"cadastro-input"],["value",""],["value","ativo"],["value","inativo"],["for","foto"],["type","file","id","foto","name","foto","accept","image/*",1,"cadastro-input",3,"change"],["class","photo-preview",4,"ngIf"],["for","nome"],["type","text","id","nome","name","nome","placeholder","Digite o nome completo","required","",1,"cadastro-input"],["for","email"],["type","email","id","email","name","email","placeholder","Digite o email","required","",1,"cadastro-input"],["for","telefone"],["type","text","id","telefone","name","telefone","placeholder","(00) 00000-0000","maxlength","15","required","",1,"cadastro-input",3,"input"],["for","cargo"],["type","text","id","cargo","name","cargo","placeholder","Digite o cargo","required","",1,"cadastro-input"],["for","salario"],["type","text","id","salario","name","salario","placeholder","R$ 0,00","required","",1,"cadastro-input",3,"input"],["for","dataAdmissao"],["type","date","id","dataAdmissao","name","dataAdmissao","required","",1,"cadastro-input"],["for","cpf"],["type","text","id","cpf","name","cpf","placeholder","000.000.000-00","maxlength","14","required","",1,"cadastro-input",3,"input"],[1,"column-right"],["for","cep"],["type","text","id","cep","name","cep","placeholder","00000-000","maxlength","9","required","",1,"cadastro-input",3,"input","blur"],["for","rua"],["type","text","id","rua","name","rua","placeholder","Digite a rua","required","",1,"cadastro-input"],["for","numero"],["type","text","id","numero","name","numero","placeholder","Digite o n\xFAmero","required","",1,"cadastro-input"],["for","complemento"],["type","text","id","complemento","name","complemento","placeholder","Apartamento, bloco, etc. (opcional)",1,"cadastro-input"],["for","bairro"],["type","text","id","bairro","name","bairro","placeholder","Digite o bairro","required","",1,"cadastro-input"],["for","cidade"],["type","text","id","cidade","name","cidade","placeholder","Digite a cidade","required","",1,"cadastro-input"],["for","estado"],["id","estado","name","estado","required","",1,"cadastro-input"],["value","AC"],["value","AL"],["value","AP"],["value","AM"],["value","BA"],["value","CE"],["value","DF"],["value","ES"],["value","GO"],["value","MA"],["value","MT"],["value","MS"],["value","MG"],["value","PA"],["value","PB"],["value","PR"],["value","PE"],["value","PI"],["value","RJ"],["value","RN"],["value","RS"],["value","RO"],["value","RR"],["value","SC"],["value","SP"],["value","SE"],["value","TO"],[1,"button-group"],["type","submit",1,"cadastro-button",3,"disabled"],["type","button",1,"cadastro-button-secondary",3,"click"],[1,"photo-preview"],["alt","Preview da foto",1,"preview-image",3,"src"],["type","button",1,"remove-photo",3,"click"],[1,"bi","bi-x-circle"]],template:function(o,i){o&1&&(e(0,"div",0),d(1,"app-navbar"),e(2,"div",1)(3,"h2",2),a(4),t(),e(5,"form",3),s("submit",function(l){return i.cadastrarFuncionario(),l.preventDefault()}),e(6,"div",4)(7,"div",5)(8,"h3",6),a(9,"Dados Pessoais"),t(),e(10,"label",7),a(11,"Status"),t(),e(12,"select",8)(13,"option",9),a(14,"Selecione o status"),t(),e(15,"option",10),a(16,"Ativo"),t(),e(17,"option",11),a(18,"Inativo"),t()(),e(19,"label",12),a(20,"Foto"),t(),e(21,"input",13),s("change",function(l){return i.onFileSelected(l)}),t(),B(22,q,4,1,"div",14),e(23,"label",15),a(24,"Nome completo"),t(),d(25,"input",16),e(26,"label",17),a(27,"Email"),t(),d(28,"input",18),e(29,"label",19),a(30,"Telefone"),t(),e(31,"input",20),s("input",function(l){return i.formatarTelefone(l)}),t(),e(32,"label",21),a(33,"Cargo"),t(),d(34,"input",22),e(35,"label",23),a(36,"Sal\xE1rio"),t(),e(37,"input",24),s("input",function(l){return i.formatarSalario(l)}),t(),e(38,"label",25),a(39,"Data de admiss\xE3o"),t(),d(40,"input",26),e(41,"label",27),a(42,"CPF"),t(),e(43,"input",28),s("input",function(l){return i.formatarCpf(l)}),t()(),e(44,"div",29)(45,"h3",6),a(46,"Endere\xE7o"),t(),e(47,"label",30),a(48,"CEP"),t(),e(49,"input",31),s("input",function(l){return i.formatarCep(l)})("blur",function(l){return i.onCepChange(l)}),t(),e(50,"label",32),a(51,"Rua"),t(),d(52,"input",33),e(53,"label",34),a(54,"N\xFAmero"),t(),d(55,"input",35),e(56,"label",36),a(57,"Complemento"),t(),d(58,"input",37),e(59,"label",38),a(60,"Bairro"),t(),d(61,"input",39),e(62,"label",40),a(63,"Cidade"),t(),d(64,"input",41),e(65,"label",42),a(66,"Estado"),t(),e(67,"select",43)(68,"option",9),a(69,"Selecione o estado"),t(),e(70,"option",44),a(71,"Acre"),t(),e(72,"option",45),a(73,"Alagoas"),t(),e(74,"option",46),a(75,"Amap\xE1"),t(),e(76,"option",47),a(77,"Amazonas"),t(),e(78,"option",48),a(79,"Bahia"),t(),e(80,"option",49),a(81,"Cear\xE1"),t(),e(82,"option",50),a(83,"Distrito Federal"),t(),e(84,"option",51),a(85,"Esp\xEDrito Santo"),t(),e(86,"option",52),a(87,"Goi\xE1s"),t(),e(88,"option",53),a(89,"Maranh\xE3o"),t(),e(90,"option",54),a(91,"Mato Grosso"),t(),e(92,"option",55),a(93,"Mato Grosso do Sul"),t(),e(94,"option",56),a(95,"Minas Gerais"),t(),e(96,"option",57),a(97,"Par\xE1"),t(),e(98,"option",58),a(99,"Para\xEDba"),t(),e(100,"option",59),a(101,"Paran\xE1"),t(),e(102,"option",60),a(103,"Pernambuco"),t(),e(104,"option",61),a(105,"Piau\xED"),t(),e(106,"option",62),a(107,"Rio de Janeiro"),t(),e(108,"option",63),a(109,"Rio Grande do Norte"),t(),e(110,"option",64),a(111,"Rio Grande do Sul"),t(),e(112,"option",65),a(113,"Rond\xF4nia"),t(),e(114,"option",66),a(115,"Roraima"),t(),e(116,"option",67),a(117,"Santa Catarina"),t(),e(118,"option",68),a(119,"S\xE3o Paulo"),t(),e(120,"option",69),a(121,"Sergipe"),t(),e(122,"option",70),a(123,"Tocantins"),t()()()(),e(124,"div",71)(125,"button",72),a(126),t(),e(127,"button",73),s("click",function(){return i.limparFormulario()}),a(128," Limpar "),t()()()()()),o&2&&(p(4),P(" ",i.isEditMode?"Editar Funcion\xE1rio":"Cadastro de Funcion\xE1rio"," "),p(18),M("ngIf",i.selectedPhoto),p(103),M("disabled",i.isLoading),p(),P(" ",i.isLoading?i.isEditMode?"Atualizando...":"Cadastrando...":i.isEditMode?"Atualizar Funcion\xE1rio":"Cadastrar Funcion\xE1rio"," "))},dependencies:[R],styles:[`.cadastro-container[_ngcontent-%COMP%]{min-height:100vh;width:100vw;margin:0;padding:0;position:fixed;top:0;left:0;display:flex;align-items:center;justify-content:center;overflow:hidden}.cadastro-content[_ngcontent-%COMP%]{max-width:1200px;max-height:85vh;overflow-y:auto;margin-top:90px}.cadastro-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.cadastro-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#2a3441}.cadastro-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4a5568;border-radius:4px}.cadastro-form[_ngcontent-%COMP%]{color:#fff;font-family:Poppins,sans-serif}.cadastro-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#fff;font-family:Poppins,sans-serif;font-weight:500;font-size:14px;margin-bottom:8px;margin-top:15px}.cadastro-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:first-of-type{margin-top:0}.cadastro-title[_ngcontent-%COMP%]{color:#fff;text-align:center;font-family:Poppins,sans-serif;font-weight:600;margin-bottom:20px}.cadastro-input[_ngcontent-%COMP%]{background-color:#2a3441;width:100%;padding:12px;margin:8px 0;border:1px solid #3a4752;border-radius:4px;color:#fff;font-family:Poppins,sans-serif;font-size:14px}.cadastro-input[_ngcontent-%COMP%]::placeholder{color:#ffffffb3}.cadastro-input[type=file][_ngcontent-%COMP%]{padding:12px;background-color:#2a3441;border:1px solid #3a4752}.cadastro-input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{filter:invert(1);cursor:pointer}.cadastro-input[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#2a3441;color:#fff}.cadastro-input.loading[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'%3E%3Cpath fill='%23ffffff' d='M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z' opacity='.25'/%3E%3Cpath fill='%23ffffff' d='M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z'%3E%3CanimateTransform attributeName='transform' dur='0.75s' repeatCount='indefinite' type='rotate' values='0 12 12;360 12 12'/%3E%3C/path%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 10px center;background-size:20px 20px}.form-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:40px;margin-bottom:30px}.column-left[_ngcontent-%COMP%], .column-right[_ngcontent-%COMP%]{display:flex;flex-direction:column}.section-title[_ngcontent-%COMP%]{color:#1570ef;font-family:Poppins,sans-serif;font-weight:600;margin:0 0 20px;font-size:20px;border-bottom:2px solid rgba(21,112,239,.3);padding-bottom:10px;text-align:center}@media (max-width: 768px){.form-columns[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.cadastro-content[_ngcontent-%COMP%]{max-width:90%;padding:20px}}.endereco-title[_ngcontent-%COMP%]{color:#fff;font-family:Poppins,sans-serif;font-weight:500;margin:20px 0 10px;font-size:18px;border-bottom:1px solid rgba(255,255,255,.2);padding-bottom:5px}.password-container[_ngcontent-%COMP%]{position:relative;width:100%}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:transparent;border:none;cursor:pointer;padding:5px;border-radius:3px;color:#ffffffb3}.password-toggle[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;color:#ffffffe6}.password-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.button-group[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:20px;justify-content:center;grid-column:1 / -1}.cadastro-button[_ngcontent-%COMP%]{background-color:#1570ef;color:#fff;border:none;border-radius:4px;padding:12px 24px;cursor:pointer;font-family:Poppins,sans-serif;font-weight:500;min-width:120px;font-size:14px}.cadastro-button[_ngcontent-%COMP%]:hover{background-color:#0d4797}.cadastro-button[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}.cadastro-button-secondary[_ngcontent-%COMP%]{background-color:transparent;color:#ffffffe6;border:1px solid rgba(255,255,255,.3);border-radius:4px;padding:12px 24px;cursor:pointer;font-family:Poppins,sans-serif;font-weight:500;min-width:120px;font-size:14px}.cadastro-button-secondary[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;border-color:#fff9;color:#fff}.cadastro-link-text[_ngcontent-%COMP%]{text-align:center;font-family:Poppins,sans-serif;margin-top:15px;color:#fff}.cadastro-link[_ngcontent-%COMP%]{color:#1570ef;text-decoration:none;font-weight:500;font-family:Poppins,sans-serif}.cadastro-link[_ngcontent-%COMP%]:hover{color:#0d4797}.photo-preview[_ngcontent-%COMP%]{position:relative;margin-top:10px;margin-bottom:15px;display:inline-block;border-radius:12px;overflow:hidden;border:2px solid rgba(255,255,255,.3);box-shadow:0 4px 15px #4f46e54d}.preview-image[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:cover;display:block}.remove-photo[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;background:#ef4444e6;color:#fff;border:none;border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;font-size:14px}.remove-photo[_ngcontent-%COMP%]:hover{background:#ef4444;transform:scale(1.1)}`]})};export{$ as CadastroComponent};
