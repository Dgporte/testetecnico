var B0=Object.defineProperty,$0=Object.defineProperties;var H0=Object.getOwnPropertyDescriptors;var Mc=Object.getOwnPropertySymbols,z0=Object.getPrototypeOf,NI=Object.prototype.hasOwnProperty,MI=Object.prototype.propertyIsEnumerable,q0=Reflect.get;var RI=(n,e,t)=>e in n?B0(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,x=(n,e)=>{for(var t in e||={})NI.call(e,t)&&RI(n,t,e[t]);if(Mc)for(var t of Mc(e))MI.call(e,t)&&RI(n,t,e[t]);return n},ie=(n,e)=>$0(n,H0(e));var Pc=(n,e)=>{var t={};for(var r in n)NI.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Mc)for(var r of Mc(n))e.indexOf(r)<0&&MI.call(n,r)&&(t[r]=n[r]);return t};var nr=(n,e,t)=>q0(z0(n),t,e);var _=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function Qh(n,e){return Object.is(n,e)}var Ue=null,xc=!1,Yh=1,Rt=Symbol("SIGNAL");function oe(n){let e=Ue;return Ue=n,e}function Jh(){return Ue}var As={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Rs(n){if(xc)throw new Error("");if(Ue===null)return;Ue.consumerOnSignalRead(n);let e=Ue.nextProducerIndex++;if(Fc(Ue),e<Ue.producerNode.length&&Ue.producerNode[e]!==n&&Ss(Ue)){let t=Ue.producerNode[e];Lc(t,Ue.producerIndexOfThis[e])}Ue.producerNode[e]!==n&&(Ue.producerNode[e]=n,Ue.producerIndexOfThis[e]=Ss(Ue)?xI(n,Ue,e):0),Ue.producerLastReadVersion[e]=n.version}function PI(){Yh++}function Zh(n){if(!(Ss(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Yh)){if(!n.producerMustRecompute(n)&&!nf(n)){Kh(n);return}n.producerRecomputeValue(n),Kh(n)}}function Xh(n){if(n.liveConsumerNode===void 0)return;let e=xc;xc=!0;try{for(let t of n.liveConsumerNode)t.dirty||G0(t)}finally{xc=e}}function ef(){return Ue?.consumerAllowSignalWrites!==!1}function G0(n){n.dirty=!0,Xh(n),n.consumerMarkedDirty?.(n)}function Kh(n){n.dirty=!1,n.lastCleanEpoch=Yh}function Oc(n){return n&&(n.nextProducerIndex=0),oe(n)}function tf(n,e){if(oe(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ss(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Lc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function nf(n){Fc(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Zh(t),r!==t.version))return!0}return!1}function rf(n){if(Fc(n),Ss(n))for(let e=0;e<n.producerNode.length;e++)Lc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function xI(n,e,t){if(kI(n),n.liveConsumerNode.length===0&&OI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=xI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Lc(n,e){if(kI(n),n.liveConsumerNode.length===1&&OI(n))for(let r=0;r<n.producerNode.length;r++)Lc(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Fc(i),i.producerIndexOfThis[r]=e}}function Ss(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Fc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function kI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function OI(n){return n.producerNode!==void 0}function of(n,e){let t=Object.create(W0);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Zh(t),Rs(t),t.value===kc)throw t.error;return t.value};return r[Rt]=t,r}var Gh=Symbol("UNSET"),Wh=Symbol("COMPUTING"),kc=Symbol("ERRORED"),W0=ie(x({},As),{value:Gh,dirty:!0,error:null,equal:Qh,kind:"computed",producerMustRecompute(n){return n.value===Gh||n.value===Wh},producerRecomputeValue(n){if(n.value===Wh)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Wh;let t=Oc(n),r,i=!1;try{r=n.computation(),oe(null),i=e!==Gh&&e!==kc&&r!==kc&&n.equal(e,r)}catch(o){r=kc,n.error=o}finally{tf(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function K0(){throw new Error}var LI=K0;function FI(n){LI(n)}function sf(n){LI=n}var Q0=null;function af(n,e){let t=Object.create(Vc);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Rs(t),t.value);return r[Rt]=t,r}function Ns(n,e){ef()||FI(n),n.equal(n.value,e)||(n.value=e,Y0(n))}function cf(n,e){ef()||FI(n),Ns(n,e(n.value))}var Vc=ie(x({},As),{equal:Qh,value:void 0,kind:"signal"});function Y0(n){n.version++,PI(),Xh(n),Q0?.()}function uf(n){let e=oe(null);try{return n()}finally{oe(e)}}var lf;function Ms(){return lf}function Cn(n){let e=lf;return lf=n,e}var Uc=Symbol("NotFound");function Q(n){return typeof n=="function"}function Oi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var jc=Oi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ps(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Re=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Q(r))try{r()}catch(o){e=o instanceof jc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{VI(o)}catch(s){e=e??[],s instanceof jc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new jc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)VI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ps(t,e)}remove(e){let{_finalizers:t}=this;t&&Ps(t,e),e instanceof n&&e._removeParent(this)}};Re.EMPTY=(()=>{let n=new Re;return n.closed=!0,n})();var df=Re.EMPTY;function Bc(n){return n instanceof Re||n&&"closed"in n&&Q(n.remove)&&Q(n.add)&&Q(n.unsubscribe)}function VI(n){Q(n)?n():n.unsubscribe()}var Ut={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Li={setTimeout(n,e,...t){let{delegate:r}=Li;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Li;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function $c(n){Li.setTimeout(()=>{let{onUnhandledError:e}=Ut;if(e)e(n);else throw n})}function xs(){}var UI=hf("C",void 0,void 0);function jI(n){return hf("E",void 0,n)}function BI(n){return hf("N",n,void 0)}function hf(n,e,t){return{kind:n,value:e,error:t}}var Br=null;function Fi(n){if(Ut.useDeprecatedSynchronousErrorHandling){let e=!Br;if(e&&(Br={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Br;if(Br=null,t)throw r}}else n()}function $I(n){Ut.useDeprecatedSynchronousErrorHandling&&Br&&(Br.errorThrown=!0,Br.error=n)}var $r=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Bc(e)&&e.add(this)):this.destination=nN}static create(e,t,r){return new Vi(e,t,r)}next(e){this.isStopped?pf(BI(e),this):this._next(e)}error(e){this.isStopped?pf(jI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?pf(UI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},eN=Function.prototype.bind;function ff(n,e){return eN.call(n,e)}var gf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Hc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Hc(r)}else Hc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Hc(t)}}},Vi=class extends $r{constructor(e,t,r){super();let i;if(Q(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Ut.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ff(e.next,o),error:e.error&&ff(e.error,o),complete:e.complete&&ff(e.complete,o)}):i=e}this.destination=new gf(i)}};function Hc(n){Ut.useDeprecatedSynchronousErrorHandling?$I(n):$c(n)}function tN(n){throw n}function pf(n,e){let{onStoppedNotification:t}=Ut;t&&Li.setTimeout(()=>t(n,e))}var nN={closed:!0,next:xs,error:tN,complete:xs};var Ui=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Et(n){return n}function mf(...n){return yf(n)}function yf(n){return n.length===0?Et:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=iN(t)?t:new Vi(t,r,i);return Fi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=HI(r),new r((i,o)=>{let s=new Vi({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ui](){return this}pipe(...t){return yf(t)(this)}toPromise(t){return t=HI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function HI(n){var e;return(e=n??Ut.Promise)!==null&&e!==void 0?e:Promise}function rN(n){return n&&Q(n.next)&&Q(n.error)&&Q(n.complete)}function iN(n){return n&&n instanceof $r||rN(n)&&Bc(n)}function vf(n){return Q(n?.lift)}function ue(n){return e=>{if(vf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(n,e,t,r,i){return new _f(n,e,t,r,i)}var _f=class extends $r{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ji(){return ue((n,e)=>{let t=null;n._refCount++;let r=se(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Bi=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,vf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let t=this.getSubject();e.add(this.source.subscribe(se(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return ji()(this)}};var zI=Oi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var He=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new zc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new zI}next(t){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?df:(this.currentObservers=null,o.push(t),new Re(()=>{this.currentObservers=null,Ps(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new zc(e,t),n})(),zc=class extends He{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:df}};var je=class extends He{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ut=new he(n=>n.complete());function qI(n){return n&&Q(n.schedule)}function GI(n){return n[n.length-1]}function qc(n){return Q(GI(n))?n.pop():void 0}function rr(n){return qI(GI(n))?n.pop():void 0}function KI(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function WI(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hr(n){return this instanceof Hr?(this.v=n,this):new Hr(n)}function QI(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(R){return new Promise(function(N,F){o.push([y,R,N,F])>1||u(y,R)})},T&&(i[y]=T(i[y])))}function u(y,T){try{l(r[y](T))}catch(R){m(o[0][3],R)}}function l(y){y.value instanceof Hr?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,T){y(T),o.shift(),o.length&&u(o[0][0],o[0][1])}}function YI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof WI=="function"?WI(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Gc=n=>n&&typeof n.length=="number"&&typeof n!="function";function Wc(n){return Q(n?.then)}function Kc(n){return Q(n[Ui])}function Qc(n){return Symbol.asyncIterator&&Q(n?.[Symbol.asyncIterator])}function Yc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function oN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Jc=oN();function Zc(n){return Q(n?.[Jc])}function Xc(n){return QI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Hr(t.read());if(i)return yield Hr(void 0);yield yield Hr(r)}}finally{t.releaseLock()}})}function eu(n){return Q(n?.getReader)}function Ne(n){if(n instanceof he)return n;if(n!=null){if(Kc(n))return sN(n);if(Gc(n))return aN(n);if(Wc(n))return cN(n);if(Qc(n))return JI(n);if(Zc(n))return uN(n);if(eu(n))return lN(n)}throw Yc(n)}function sN(n){return new he(e=>{let t=n[Ui]();if(Q(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function aN(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function cN(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,$c)})}function uN(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function JI(n){return new he(e=>{dN(n,e).catch(t=>e.error(t))})}function lN(n){return JI(Xc(n))}function dN(n,e){var t,r,i,o;return KI(this,void 0,void 0,function*(){try{for(t=YI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function lt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function tu(n,e=0){return ue((t,r)=>{t.subscribe(se(r,i=>lt(r,n,()=>r.next(i),e),()=>lt(r,n,()=>r.complete(),e),i=>lt(r,n,()=>r.error(i),e)))})}function nu(n,e=0){return ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ZI(n,e){return Ne(n).pipe(nu(e),tu(e))}function XI(n,e){return Ne(n).pipe(nu(e),tu(e))}function eE(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function tE(n,e){return new he(t=>{let r;return lt(t,e,()=>{r=n[Jc](),lt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Q(r?.return)&&r.return()})}function ru(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{lt(t,e,()=>{let r=n[Symbol.asyncIterator]();lt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function nE(n,e){return ru(Xc(n),e)}function rE(n,e){if(n!=null){if(Kc(n))return ZI(n,e);if(Gc(n))return eE(n,e);if(Wc(n))return XI(n,e);if(Qc(n))return ru(n,e);if(Zc(n))return tE(n,e);if(eu(n))return nE(n,e)}throw Yc(n)}function Ee(n,e){return e?rE(n,e):Ne(n)}function q(...n){let e=rr(n);return Ee(n,e)}function $i(n,e){let t=Q(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function If(n){return!!n&&(n instanceof he||Q(n.lift)&&Q(n.subscribe))}var Sn=Oi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function te(n,e){return ue((t,r)=>{let i=0;t.subscribe(se(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:hN}=Array;function fN(n,e){return hN(e)?n(...e):n(e)}function iu(n){return te(e=>fN(n,e))}var{isArray:pN}=Array,{getPrototypeOf:gN,prototype:mN,keys:yN}=Object;function ou(n){if(n.length===1){let e=n[0];if(pN(e))return{args:e,keys:null};if(vN(e)){let t=yN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function vN(n){return n&&typeof n=="object"&&gN(n)===mN}function su(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ks(...n){let e=rr(n),t=qc(n),{args:r,keys:i}=ou(n);if(r.length===0)return Ee([],e);let o=new he(_N(r,e,i?s=>su(i,s):Et));return t?o.pipe(iu(t)):o}function _N(n,e,t=Et){return r=>{iE(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)iE(e,()=>{let l=Ee(n[u],e),h=!1;l.subscribe(se(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function iE(n,e,t){n?lt(t,n,e):e()}function oE(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?T(R):u.push(R),T=R=>{o&&e.next(R),l++;let N=!1;Ne(t(R,h++)).subscribe(se(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let F=u.shift();s?lt(e,s,()=>T(F)):T(F)}m()}catch(F){e.error(F)}}))};return n.subscribe(se(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Ae(n,e,t=1/0){return Q(e)?Ae((r,i)=>te((o,s)=>e(r,o,i,s))(Ne(n(r,i))),t):(typeof e=="number"&&(t=e),ue((r,i)=>oE(r,i,n,t)))}function Hi(n=1/0){return Ae(Et,n)}function sE(){return Hi(1)}function zi(...n){return sE()(Ee(n,rr(n)))}function au(n){return new he(e=>{Ne(n()).subscribe(e)})}function IN(...n){let e=qc(n),{args:t,keys:r}=ou(n),i=new he(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Ne(t[h]).subscribe(se(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?su(r,a):a),o.complete())}))}});return e?i.pipe(iu(e)):i}function ot(n,e){return ue((t,r)=>{let i=0;t.subscribe(se(r,o=>n.call(e,o,i++)&&r.next(o)))})}function An(n){return ue((e,t)=>{let r=null,i=!1,o;r=e.subscribe(se(t,void 0,void 0,s=>{o=Ne(n(s,An(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function aE(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(se(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Zt(n,e){return Q(e)?Ae(n,e,1):Ae(n,1)}function ir(n){return ue((e,t)=>{let r=!1;e.subscribe(se(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Rn(n){return n<=0?()=>ut:ue((e,t)=>{let r=0;e.subscribe(se(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function cu(n=EN){return ue((e,t)=>{let r=!1;e.subscribe(se(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function EN(){return new Sn}function zr(n){return ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Nn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ot((i,o)=>n(i,o,r)):Et,Rn(1),t?ir(e):cu(()=>new Sn))}function qi(n){return n<=0?()=>ut:ue((e,t)=>{let r=[];e.subscribe(se(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ef(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ot((i,o)=>n(i,o,r)):Et,qi(1),t?ir(e):cu(()=>new Sn))}function wf(n,e){return ue(aE(n,e,arguments.length>=2,!0))}function Tf(...n){let e=rr(n);return ue((t,r)=>{(e?zi(n,t,e):zi(n,t)).subscribe(r)})}function dt(n,e){return ue((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(se(r,u=>{i?.unsubscribe();let l=0,h=o++;Ne(n(u,h)).subscribe(i=se(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Df(n){return ue((e,t)=>{Ne(n).subscribe(se(t,()=>t.complete(),xs)),!t.closed&&e.subscribe(t)})}function Ke(n,e,t){let r=Q(n)||e||t?{next:n,error:e,complete:t}:n;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(se(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Et}var QE="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",U=class extends Error{code;constructor(e,t){super(YE(e,t)),this.code=e}};function wN(n){return`NG0${Math.abs(n)}`}function YE(n,e){return`${wN(n)}${e?": "+e:""}`}var JE=Symbol("InputSignalNode#UNSET"),TN=ie(x({},Vc),{transformFn:void 0,applyValueToInputSignal(n,e){Ns(n,e)}});function ZE(n,e){let t=Object.create(TN);t.value=n,t.transformFn=e?.transform;function r(){if(Rs(t),t.value===JE){let i=null;throw new U(-950,i)}return t.value}return r[Rt]=t,r}function qs(n){return{toString:n}.toString()}var uu="__parameters__";function DN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function XE(n,e,t){return qs(()=>{let r=DN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(uu)?u[uu]:Object.defineProperty(u,uu,{value:[]})[uu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Vf=globalThis;function ve(n){for(let e in n)if(n[e]===ve)return e;throw Error("Could not find renamed property on target object.")}function bN(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function pt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(pt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Uf(n,e){return n?e?`${n} ${e}`:n:e||""}var CN=ve({__forward_ref__:ve});function ew(n){return n.__forward_ref__=ew,n.toString=function(){return pt(this())},n}function st(n){return tw(n)?n():n}function tw(n){return typeof n=="function"&&n.hasOwnProperty(CN)&&n.__forward_ref__===ew}function j(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ti(n){return{providers:n.providers||[],imports:n.imports||[]}}function Hu(n){return cE(n,rw)||cE(n,iw)}function nw(n){return Hu(n)!==null}function cE(n,e){return n.hasOwnProperty(e)?n[e]:null}function SN(n){let e=n&&(n[rw]||n[iw]);return e||null}function uE(n){return n&&(n.hasOwnProperty(lE)||n.hasOwnProperty(AN))?n[lE]:null}var rw=ve({\u0275prov:ve}),lE=ve({\u0275inj:ve}),iw=ve({ngInjectableDef:ve}),AN=ve({ngInjectorDef:ve}),B=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=j({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ow(n){return n&&!!n.\u0275providers}var RN=ve({\u0275cmp:ve}),NN=ve({\u0275dir:ve}),MN=ve({\u0275pipe:ve}),PN=ve({\u0275mod:ve}),yu=ve({\u0275fac:ve}),Vs=ve({__NG_ELEMENT_ID__:ve}),dE=ve({__NG_ENV_ID__:ve});function Zi(n){return typeof n=="string"?n:n==null?"":String(n)}function xN(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Zi(n)}function sw(n,e){throw new U(-200,n)}function Ap(n,e){throw new U(-201,!1)}var ee=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ee||{}),jf;function aw(){return jf}function Nt(n){let e=jf;return jf=n,e}function cw(n,e,t){let r=Hu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ee.Optional)return null;if(e!==void 0)return e;Ap(n,"Injector")}var kN={},qr=kN,Bf="__NG_DI_FLAG__",vu=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Uc:qr,r)}},_u="ngTempTokenPath",ON="ngTokenPath",LN=/\n/gm,FN="\u0275",hE="__source";function VN(n,e=ee.Default){if(Ms()===void 0)throw new U(-203,!1);if(Ms()===null)return cw(n,void 0,e);{let t=Ms(),r;return t instanceof vu?r=t.injector:r=t,r.get(n,e&ee.Optional?null:void 0,e)}}function $(n,e=ee.Default){return(aw()||VN)(st(n),e)}function k(n,e=ee.Default){return $(n,zu(e))}function zu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function $f(n){let e=[];for(let t=0;t<n.length;t++){let r=st(n[t]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,o=ee.Default;for(let s=0;s<r.length;s++){let a=r[s],u=UN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push($(i,o))}else e.push($(r))}return e}function uw(n,e){return n[Bf]=e,n.prototype[Bf]=e,n}function UN(n){return n[Bf]}function jN(n,e,t,r){let i=n[_u];throw e[hE]&&i.unshift(e[hE]),n.message=BN(`
`+n.message,i,t,r),n[ON]=i,n[_u]=null,n}function BN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==FN?n.slice(2):n;let i=pt(e);if(Array.isArray(e))i=e.map(pt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):pt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(LN,`
  `)}`}var $N=uw(XE("Optional"),8);var HN=uw(XE("SkipSelf"),4);function Xi(n,e){let t=n.hasOwnProperty(yu);return t?n[yu]:null}function Rp(n,e){n.forEach(t=>Array.isArray(t)?Rp(t,e):e(t))}function lw(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Iu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function zN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Np(n,e,t){let r=Gs(n,e);return r>=0?n[r|1]=t:(r=~r,zN(n,r,e,t)),r}function bf(n,e){let t=Gs(n,e);if(t>=0)return n[t|1]}function Gs(n,e){return qN(n,e,1)}function qN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Wr={},ht=[],Us=new B(""),dw=new B("",-1),hw=new B(""),Eu=class{get(e,t=qr){if(t===qr){let r=new Error(`NullInjectorError: No provider for ${pt(e)}!`);throw r.name="NullInjectorError",r}return t}};function fw(n,e){let t=n[PN]||null;if(!t&&e===!0)throw new Error(`Type ${pt(n)} does not have '\u0275mod' property.`);return t}function Kr(n){return n[RN]||null}function GN(n){return n[NN]||null}function WN(n){return n[MN]||null}function uo(n){return{\u0275providers:n}}function KN(...n){return{\u0275providers:pw(!0,n),\u0275fromNgModule:!0}}function pw(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Rp(e,s=>{let a=s;Hf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&gw(i,o),t}function gw(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Mp(i,o=>{e(o,r)})}}function Hf(n,e,t,r){if(n=st(n),!n)return!1;let i=null,o=uE(n),s=!o&&Kr(n);if(!o&&!s){let u=n.ngModule;if(o=uE(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Hf(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Rp(o.imports,h=>{Hf(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&gw(l,e)}if(!a){let l=Xi(i)||(()=>new i);e({provide:i,useFactory:l,deps:ht},i),e({provide:hw,useValue:i,multi:!0},i),e({provide:Us,useValue:()=>$(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Mp(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Mp(n,e){for(let t of n)ow(t)&&(t=t.\u0275providers),Array.isArray(t)?Mp(t,e):e(t)}var QN=ve({provide:String,useValue:ve});function mw(n){return n!==null&&typeof n=="object"&&QN in n}function YN(n){return!!(n&&n.useExisting)}function JN(n){return!!(n&&n.useFactory)}function eo(n){return typeof n=="function"}function ZN(n){return!!n.useClass}var qu=new B(""),hu={},fE={},Cf;function Pp(){return Cf===void 0&&(Cf=new Eu),Cf}var et=class{},js=class extends et{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,qf(e,s=>this.processProvider(s)),this.records.set(dw,Gi(void 0,this)),i.has("environment")&&this.records.set(et,Gi(void 0,this));let o=this.records.get(qu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(hw,ht,ee.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Uc:qr,r)}destroy(){Ls(this),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return Ls(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ls(this);let t=Cn(this),r=Nt(void 0),i;try{return e()}finally{Cn(t),Nt(r)}}get(e,t=qr,r=ee.Default){if(Ls(this),e.hasOwnProperty(dE))return e[dE](this);r=zu(r);let i,o=Cn(this),s=Nt(void 0);try{if(!(r&ee.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=rM(e)&&Hu(e);l&&this.injectableDefInScope(l)?u=Gi(zf(e),hu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let a=r&ee.Self?Pp():this.parent;return t=r&ee.Optional&&t===qr?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[_u]=a[_u]||[]).unshift(pt(e)),o)throw a;return jN(a,e,"R3InjectorError",this.source)}else throw a}finally{Nt(s),Cn(o)}}resolveInjectorInitializers(){let e=oe(null),t=Cn(this),r=Nt(void 0),i;try{let o=this.get(Us,ht,ee.Self);for(let s of o)s()}finally{Cn(t),Nt(r),oe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(pt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=st(e);let t=eo(e)?e:st(e&&e.provide),r=eM(e);if(!eo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Gi(void 0,hu,!0),i.factory=()=>$f(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=oe(null);try{return t.value===fE?sw(pt(e)):t.value===hu&&(t.value=fE,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&nM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{oe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=st(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function zf(n){let e=Hu(n),t=e!==null?e.factory:Xi(n);if(t!==null)return t;if(n instanceof B)throw new U(204,!1);if(n instanceof Function)return XN(n);throw new U(204,!1)}function XN(n){if(n.length>0)throw new U(204,!1);let t=SN(n);return t!==null?()=>t.factory(n):()=>new n}function eM(n){if(mw(n))return Gi(void 0,n.useValue);{let e=yw(n);return Gi(e,hu)}}function yw(n,e,t){let r;if(eo(n)){let i=st(n);return Xi(i)||zf(i)}else if(mw(n))r=()=>st(n.useValue);else if(JN(n))r=()=>n.useFactory(...$f(n.deps||[]));else if(YN(n))r=(i,o)=>$(st(n.useExisting),o!==void 0&&o&ee.Optional?ee.Optional:void 0);else{let i=st(n&&(n.useClass||n.provide));if(tM(n))r=()=>new i(...$f(n.deps));else return Xi(i)||zf(i)}return r}function Ls(n){if(n.destroyed)throw new U(205,!1)}function Gi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function tM(n){return!!n.deps}function nM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function rM(n){return typeof n=="function"||typeof n=="object"&&n instanceof B}function qf(n,e){for(let t of n)Array.isArray(t)?qf(t,e):t&&ow(t)?qf(t.\u0275providers,e):e(t)}function mt(n,e){let t;n instanceof js?(Ls(n),t=n):t=new vu(n);let r,i=Cn(t),o=Nt(void 0);try{return e()}finally{Cn(i),Nt(o)}}function vw(){return aw()!==void 0||Ms()!=null}function iM(n){if(!vw())throw new U(-203,!1)}function oM(n){return typeof n=="function"}var kn=0,le=1,Y=2,at=3,$t=4,zt=5,wu=6,Tu=7,gt=8,to=9,Mn=10,Me=11,Bs=12,pE=13,lo=14,en=15,no=16,Wi=17,ro=18,Gu=19,_w=20,or=21,Sf=22,Du=23,Mt=24,Yi=25,Pn=26,Iw=1;var Qr=7,bu=8,Cu=9,Pt=10;function sr(n){return Array.isArray(n)&&typeof n[Iw]=="object"}function On(n){return Array.isArray(n)&&n[Iw]===!0}function Ew(n){return(n.flags&4)!==0}function ho(n){return n.componentOffset>-1}function xp(n){return(n.flags&1)===1}function tn(n){return!!n.template}function Su(n){return(n[Y]&512)!==0}function fo(n){return(n[Y]&256)===256}var Gf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function ww(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Ws=(()=>{let n=()=>Tw;return n.ngInherit=!0,n})();function Tw(n){return n.type.prototype.ngOnChanges&&(n.setInput=aM),sM}function sM(){let n=bw(this),e=n?.current;if(e){let t=n.previous;if(t===Wr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function aM(n,e,t,r,i){let o=this.declaredInputs[r],s=bw(n)||cM(n,{previous:Wr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Gf(l&&l.currentValue,t,u===Wr),ww(n,e,i,t)}var Dw="__ngSimpleChanges__";function bw(n){return n[Dw]||null}function cM(n,e){return n[Dw]=e}var gE=null;var me=function(n,e=null,t){gE?.(n,e,t)},uM="svg",lM="math";function nn(n){for(;Array.isArray(n);)n=n[kn];return n}function Cw(n,e){return nn(e[n])}function an(n,e){return nn(e[n.index])}function Sw(n,e){return n.data[e]}function rn(n,e){let t=e[n];return sr(t)?t:t[kn]}function kp(n){return(n[Y]&128)===128}function dM(n){return On(n[at])}function Au(n,e){return e==null?null:n[e]}function Aw(n){n[Wi]=0}function Rw(n){n[Y]&1024||(n[Y]|=1024,kp(n)&&Ks(n))}function hM(n,e){for(;n>0;)e=e[lo],n--;return e}function Wu(n){return!!(n[Y]&9216||n[Mt]?.dirty)}function Wf(n){n[Mn].changeDetectionScheduler?.notify(8),n[Y]&64&&(n[Y]|=1024),Wu(n)&&Ks(n)}function Ks(n){n[Mn].changeDetectionScheduler?.notify(0);let e=Yr(n);for(;e!==null&&!(e[Y]&8192||(e[Y]|=8192,!kp(e)));)e=Yr(e)}function Nw(n,e){if(fo(n))throw new U(911,!1);n[or]===null&&(n[or]=[]),n[or].push(e)}function fM(n,e){if(n[or]===null)return;let t=n[or].indexOf(e);t!==-1&&n[or].splice(t,1)}function Yr(n){let e=n[at];return On(e)?e[at]:e}function Mw(n){return n[Tu]??=[]}function Pw(n){return n.cleanup??=[]}var ne={lFrame:jw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Kf=!1;function pM(){return ne.lFrame.elementDepthCount}function gM(){ne.lFrame.elementDepthCount++}function mM(){ne.lFrame.elementDepthCount--}function xw(){return ne.bindingsEnabled}function yM(){return ne.skipHydrationRootTNode!==null}function vM(n){return ne.skipHydrationRootTNode===n}function _M(){ne.skipHydrationRootTNode=null}function _e(){return ne.lFrame.lView}function yt(){return ne.lFrame.tView}function O3(n){return ne.lFrame.contextLView=n,n[gt]}function L3(n){return ne.lFrame.contextLView=null,n}function vt(){let n=kw();for(;n!==null&&n.type===64;)n=n.parent;return n}function kw(){return ne.lFrame.currentTNode}function IM(){let n=ne.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Qs(n,e){let t=ne.lFrame;t.currentTNode=n,t.isParent=e}function Ow(){return ne.lFrame.isParent}function EM(){ne.lFrame.isParent=!1}function Lw(){return Kf}function mE(n){let e=Kf;return Kf=n,e}function wM(){return ne.lFrame.bindingIndex}function TM(n){return ne.lFrame.bindingIndex=n}function Ku(){return ne.lFrame.bindingIndex++}function Op(n){let e=ne.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function DM(){return ne.lFrame.inI18n}function bM(n,e){let t=ne.lFrame;t.bindingIndex=t.bindingRootIndex=n,Qf(e)}function CM(){return ne.lFrame.currentDirectiveIndex}function Qf(n){ne.lFrame.currentDirectiveIndex=n}function SM(n){let e=ne.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Fw(n){ne.lFrame.currentQueryIndex=n}function AM(n){let e=n[le];return e.type===2?e.declTNode:e.type===1?n[zt]:null}function Vw(n,e,t){if(t&ee.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ee.Host);)if(i=AM(o),i===null||(o=o[lo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ne.lFrame=Uw();return r.currentTNode=e,r.lView=n,!0}function Lp(n){let e=Uw(),t=n[le];ne.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Uw(){let n=ne.lFrame,e=n===null?null:n.child;return e===null?jw(n):e}function jw(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Bw(){let n=ne.lFrame;return ne.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var $w=Bw;function Fp(){let n=Bw();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function RM(n){return(ne.lFrame.contextLView=hM(n,ne.lFrame.contextLView))[gt]}function cr(){return ne.lFrame.selectedIndex}function Jr(n){ne.lFrame.selectedIndex=n}function Vp(){let n=ne.lFrame;return Sw(n.tView,n.selectedIndex)}function NM(){return ne.lFrame.currentNamespace}var Hw=!0;function Up(){return Hw}function jp(n){Hw=n}function MM(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Tw(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function zw(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function fu(n,e,t){qw(n,e,3,t)}function pu(n,e,t,r){(n[Y]&3)===t&&qw(n,e,t,r)}function Af(n,e){let t=n[Y];(t&3)===e&&(t&=16383,t+=1,n[Y]=t)}function qw(n,e,t,r){let i=r!==void 0?n[Wi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Wi]+=65536),(a<o||o==-1)&&(PM(n,t,e,u),n[Wi]=(n[Wi]&4294901760)+u+2),u++}function yE(n,e){me(4,n,e);let t=oe(null);try{e.call(n)}finally{oe(t),me(5,n,e)}}function PM(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Y]>>14<n[Wi]>>16&&(n[Y]&3)===e&&(n[Y]+=16384,yE(a,o)):yE(a,o)}var Ji=-1,Zr=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function xM(n){return(n.flags&8)!==0}function kM(n){return(n.flags&16)!==0}function OM(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];LM(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Gw(n){return n===3||n===4||n===6}function LM(n){return n.charCodeAt(0)===64}function $s(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?vE(n,t,i,null,e[++r]):vE(n,t,i,null,null))}}return n}function vE(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Ww(n){return n!==Ji}function Ru(n){return n&32767}function FM(n){return n>>16}function Nu(n,e){let t=FM(n),r=e;for(;t>0;)r=r[lo],t--;return r}var Yf=!0;function _E(n){let e=Yf;return Yf=n,e}var VM=256,Kw=VM-1,Qw=5,UM=0,Xt={};function jM(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Vs)&&(r=t[Vs]),r==null&&(r=t[Vs]=UM++);let i=r&Kw,o=1<<i;e.data[n+(i>>Qw)]|=o}function Mu(n,e){let t=Yw(n,e);if(t!==-1)return t;let r=e[le];r.firstCreatePass&&(n.injectorIndex=e.length,Rf(r.data,n),Rf(e,null),Rf(r.blueprint,null));let i=Bp(n,e),o=n.injectorIndex;if(Ww(i)){let s=Ru(i),a=Nu(i,e),u=a[le].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Rf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Yw(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Bp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=tT(i),r===null)return Ji;if(t++,i=i[lo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ji}function Jf(n,e,t){jM(n,e,t)}function BM(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(Gw(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function Jw(n,e,t){if(t&ee.Optional||n!==void 0)return n;Ap(e,"NodeInjector")}function Zw(n,e,t,r){if(t&ee.Optional&&r===void 0&&(r=null),(t&(ee.Self|ee.Host))===0){let i=n[to],o=Nt(void 0);try{return i?i.get(e,r,t&ee.Optional):cw(e,r,t&ee.Optional)}finally{Nt(o)}}return Jw(r,e,t)}function Xw(n,e,t,r=ee.Default,i){if(n!==null){if(e[Y]&2048&&!(r&ee.Self)){let s=GM(n,e,t,r,Xt);if(s!==Xt)return s}let o=eT(n,e,t,r,Xt);if(o!==Xt)return o}return Zw(e,t,r,i)}function eT(n,e,t,r,i){let o=zM(t);if(typeof o=="function"){if(!Vw(e,n,r))return r&ee.Host?Jw(i,t,r):Zw(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ee.Optional))Ap(t);else return s}finally{$w()}}else if(typeof o=="number"){let s=null,a=Yw(n,e),u=Ji,l=r&ee.Host?e[en][zt]:null;for((a===-1||r&ee.SkipSelf)&&(u=a===-1?Bp(n,e):e[a+8],u===Ji||!EE(r,!1)?a=-1:(s=e[le],a=Ru(u),e=Nu(u,e)));a!==-1;){let h=e[le];if(IE(o,a,h.data)){let p=$M(a,e,t,s,r,l);if(p!==Xt)return p}u=e[a+8],u!==Ji&&EE(r,e[le].data[a+8]===l)&&IE(o,a,e)?(s=h,a=Ru(u),e=Nu(u,e)):a=-1}}return i}function $M(n,e,t,r,i,o){let s=e[le],a=s.data[n+8],u=r==null?ho(a)&&Yf:r!=s&&(a.type&3)!==0,l=i&ee.Host&&o===a,h=HM(a,s,t,u,l);return h!==null?Pu(e,s,h,a,i):Xt}function HM(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let T=s[y];if(y<u&&t===T||y>=u&&T.type===t)return y}if(i){let y=s[u];if(y&&tn(y)&&y.type===t)return u}return null}function Pu(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Zr){let a=o;a.resolving&&sw(xN(s[t]));let u=_E(a.canSeeViewProviders);a.resolving=!0;let l,h=a.injectImpl?Nt(a.injectImpl):null,p=Vw(n,r,ee.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&MM(t,s[t],e)}finally{h!==null&&Nt(h),_E(u),a.resolving=!1,$w()}}return o}function zM(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Vs)?n[Vs]:void 0;return typeof e=="number"?e>=0?e&Kw:qM:e}function IE(n,e,t){let r=1<<n;return!!(t[e+(n>>Qw)]&r)}function EE(n,e){return!(n&ee.Self)&&!(n&ee.Host&&e)}var Gr=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Xw(this._tNode,this._lView,e,zu(r),t)}};function qM(){return new Gr(vt(),_e())}function $p(n){return qs(()=>{let e=n.prototype.constructor,t=e[yu]||Zf(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[yu]||Zf(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Zf(n){return tw(n)?()=>{let e=Zf(st(n));return e&&e()}:Xi(n)}function GM(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Y]&2048&&!Su(s);){let a=eT(o,s,t,r|ee.Self,Xt);if(a!==Xt)return a;let u=o.parent;if(!u){let l=s[_w];if(l){let h=l.get(t,Xt,r);if(h!==Xt)return h}u=tT(s),s=s[lo]}o=u}return i}function tT(n){let e=n[le],t=e.type;return t===2?e.declTNode:t===1?n[zt]:null}function Hp(n){return BM(vt(),n)}function wE(n,e=null,t=null,r){let i=nT(n,e,t,r);return i.resolveInjectorInitializers(),i}function nT(n,e=null,t=null,r,i=new Set){let o=[t||ht,KN(n)];return r=r||(typeof n=="object"?void 0:pt(n)),new js(o,e||Pp(),r||null,i)}var Ht=class n{static THROW_IF_NOT_FOUND=qr;static NULL=new Eu;static create(e,t){if(Array.isArray(e))return wE({name:""},t,e,"");{let r=e.name??"";return wE({name:r},e.parent,e.providers,r)}}static \u0275prov=j({token:n,providedIn:"any",factory:()=>$(dw)});static __NG_ELEMENT_ID__=-1};var WM=new B("");WM.__NG_ELEMENT_ID__=n=>{let e=vt();if(e===null)throw new U(204,!1);if(e.type&2)return e.value;if(n&ee.Optional)return null;throw new U(204,!1)};var rT=!1,po=(()=>{class n{static __NG_ELEMENT_ID__=KM;static __NG_ENV_ID__=t=>t}return n})(),Xf=class extends po{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return fo(t)?(e(),()=>{}):(Nw(t,e),()=>fM(t,e))}};function KM(){return new Xf(_e())}var io=class{},zp=new B("",{providedIn:"root",factory:()=>!1});var iT=new B(""),oT=new B(""),ur=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new je(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})();var ep=class extends He{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,vw()&&(this.destroyRef=k(po,{optional:!0})??void 0,this.pendingTasks=k(ur,{optional:!0})??void 0)}emit(e){let t=oe(null);try{super.next(e)}finally{oe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Re&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ft=ep;function xu(...n){}function sT(n){let e,t;function r(){n=xu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function TE(n){return queueMicrotask(()=>n()),()=>{n=xu}}var qp="isAngularZone",ku=qp+"_ID",QM=0,be=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ft(!1);onMicrotaskEmpty=new ft(!1);onStable=new ft(!1);onError=new ft(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=rT}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,ZM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(qp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new U(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,YM,xu,xu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},YM={};function Gp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function JM(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){sT(()=>{n.callbackScheduled=!1,tp(n),n.isCheckStableRunning=!0,Gp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),tp(n)}function ZM(n){let e=()=>{JM(n)},t=QM++;n._inner=n._inner.fork({name:"angular",properties:{[qp]:!0,[ku]:t,[ku+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(XM(u))return r.invokeTask(o,s,a,u);try{return DE(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),bE(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return DE(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!eP(u)&&e(),bE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,tp(n),Gp(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function tp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function DE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function bE(n){n._nesting--,Gp(n)}var np=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ft;onMicrotaskEmpty=new ft;onStable=new ft;onError=new ft;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function XM(n){return aT(n,"__ignore_ng_zone__")}function eP(n){return aT(n,"__scheduler_tick__")}function aT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var on=class{_console=console;handleError(e){this._console.error("ERROR",e)}},tP=new B("",{providedIn:"root",factory:()=>{let n=k(be),e=k(on);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function CE(n,e){return ZE(n,e)}function nP(n){return ZE(JE,n)}var cT=(CE.required=nP,CE);function rP(){return Qu(vt(),_e())}function Qu(n,e){return new Ys(an(n,e))}var Ys=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=rP}return n})();function iP(n){return typeof n=="function"&&n[Rt]!==void 0}function F3(n,e){let t=af(n,e?.equal),r=t[Rt];return t.set=i=>Ns(r,i),t.update=i=>cf(r,i),t.asReadonly=oP.bind(t),t}function oP(){let n=this[Rt];if(n.readonlyFn===void 0){let e=()=>this();e[Rt]=n,n.readonlyFn=e}return n.readonlyFn}function uT(n){return iP(n)&&typeof n.set=="function"}function lT(n){return(n.flags&128)===128}var dT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(dT||{}),hT=new Map,sP=0;function aP(){return sP++}function cP(n){hT.set(n[Gu],n)}function rp(n){hT.delete(n[Gu])}var SE="__ngContext__";function Js(n,e){sr(e)?(n[SE]=e[Gu],cP(e)):n[SE]=e}function fT(n){return gT(n[Bs])}function pT(n){return gT(n[$t])}function gT(n){for(;n!==null&&!On(n);)n=n[$t];return n}var ip;function mT(n){ip=n}function uP(){if(ip!==void 0)return ip;if(typeof document<"u")return document;throw new U(210,!1)}var Wp=new B("",{providedIn:"root",factory:()=>lP}),lP="ng",Kp=new B(""),go=new B("",{providedIn:"platform",factory:()=>"unknown"});var Qp=new B("",{providedIn:"root",factory:()=>uP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var dP="h",hP="b";var yT=!1,fP=new B("",{providedIn:"root",factory:()=>yT});var Yp=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Yp||{}),mo=new B(""),AE=new Set;function yo(n){AE.has(n)||(AE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var vT=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=pP}return n})();function pP(){return new vT(_e(),vt())}var Ki=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ki||{}),_T=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),gP=[Ki.EarlyRead,Ki.Write,Ki.MixedReadWrite,Ki.Read],mP=(()=>{class n{ngZone=k(be);scheduler=k(io);errorHandler=k(on,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(mo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&me(16),this.executing=!0;for(let r of gP)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&me(17)}register(t){let{view:r}=t;r!==void 0?((r[Yi]??=[]).push(t),Ks(r),r[Y]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Yp.AFTER_NEXT_RENDER,t):t()}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),op=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Yi];e&&(this.view[Yi]=e.filter(t=>t!==this))}};function Jp(n,e){!e?.injector&&iM(Jp);let t=e?.injector??k(Ht);return yo("NgAfterNextRender"),vP(n,t,e,!0)}function yP(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function vP(n,e,t,r){let i=e.get(_T);i.impl??=e.get(mP);let o=e.get(mo,null,{optional:!0}),s=t?.phase??Ki.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(po):null,u=e.get(vT,null,{optional:!0}),l=new op(i.impl,yP(n,s),u?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var _P=(n,e,t,r)=>{};function IP(n,e,t,r){_P(n,e,t,r)}var EP=()=>null;function IT(n,e,t=!1){return EP(n,e,t)}function ET(n,e){let t=n.contentQueries;if(t!==null){let r=oe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Fw(o),a.contentQueries(2,e[s],s)}}}finally{oe(r)}}}function sp(n,e,t){Fw(0);let r=oe(null);try{e(n,t)}finally{oe(r)}}function wT(n,e,t){if(Ew(e)){let r=oe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{oe(r)}}}var sn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(sn||{});var lu;function wP(){if(lu===void 0&&(lu=null,Vf.trustedTypes))try{lu=Vf.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return lu}function RE(n){return wP()?.createScriptURL(n)||n}var Ou=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${QE})`}};function Zs(n){return n instanceof Ou?n.changingThisBreaksApplicationSecurity:n}function TT(n,e){let t=TP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${QE})`)}return t===e}function TP(n){return n instanceof Ou&&n.getTypeName()||null}var DP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function bP(n){return n=String(n),n.match(DP)?n:"unsafe:"+n}var Zp=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Zp||{});function CP(n){let e=bT();return e?e.sanitize(Zp.URL,n)||"":TT(n,"URL")?Zs(n):bP(Zi(n))}function SP(n){let e=bT();if(e)return RE(e.sanitize(Zp.RESOURCE_URL,n)||"");if(TT(n,"ResourceURL"))return RE(Zs(n));throw new U(904,!1)}function AP(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?SP:CP}function DT(n,e,t){return AP(e,t)(n)}function bT(){let n=_e();return n&&n[Mn].sanitizer}function CT(n){return n instanceof Function?n():n}function RP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var ST="ng-template";function NP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&RP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Xp(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Xp(n){return n.type===4&&n.value!==ST}function MP(n,e,t){let r=n.type===4&&!t?ST:n.value;return e===r}function PP(n,e,t){let r=4,i=n.attrs,o=i!==null?OP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!jt(r)&&!jt(u))return!1;if(s&&jt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!MP(n,u,t)||u===""&&e.length===1){if(jt(r))return!1;s=!0}}else if(r&8){if(i===null||!NP(n,i,u,t)){if(jt(r))return!1;s=!0}}else{let l=e[++a],h=xP(u,i,Xp(n),t);if(h===-1){if(jt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(jt(r))return!1;s=!0}}}}return jt(r)||s}function jt(n){return(n&1)===0}function xP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return LP(e,n)}function kP(n,e,t=!1){for(let r=0;r<e.length;r++)if(PP(n,e[r],t))return!0;return!1}function OP(n){for(let e=0;e<n.length;e++){let t=n[e];if(Gw(t))return e}return n.length}function LP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function NE(n,e){return n?":not("+e.trim()+")":e}function FP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!jt(s)&&(e+=NE(o,i),i=""),r=s,o=o||!jt(r);t++}return i!==""&&(e+=NE(o,i)),e}function VP(n){return n.map(FP).join(",")}function UP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!jt(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var cn={};function jP(n,e){return n.createText(e)}function BP(n,e,t){n.setValue(e,t)}function AT(n,e,t){return n.createElement(e,t)}function Lu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function RT(n,e,t){n.appendChild(e,t)}function ME(n,e,t,r,i){r!==null?Lu(n,e,t,r,i):RT(n,e,t)}function $P(n,e,t){n.removeChild(null,e,t)}function HP(n,e,t){n.setAttribute(e,"style",t)}function zP(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function NT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&OM(n,e,r),i!==null&&zP(n,e,i),o!==null&&HP(n,e,o)}function eg(n,e,t,r,i,o,s,a,u,l,h){let p=Pn+r,m=p+i,y=qP(p,m),T=typeof l=="function"?l():l;return y[le]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:h}}function qP(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:cn);return t}function GP(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=eg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function tg(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[kn]=i,p[Y]=r|4|128|8|64|1024,(l!==null||n&&n[Y]&2048)&&(p[Y]|=2048),Aw(p),p[at]=p[lo]=n,p[gt]=t,p[Mn]=s||n&&n[Mn],p[Me]=a||n&&n[Me],p[to]=u||n&&n[to]||null,p[zt]=o,p[Gu]=aP(),p[wu]=h,p[_w]=l,p[en]=e.type==2?n[en]:p,p}function WP(n,e,t){let r=an(e,n),i=GP(t),o=n[Mn].rendererFactory,s=ng(n,tg(n,i,null,MT(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function MT(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function PT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ng(n,e){return n[Bs]?n[pE][$t]=e:n[Bs]=e,n[pE]=e,e}function V3(n=1){xT(yt(),_e(),cr()+n,!1)}function xT(n,e,t,r){if(!r)if((e[Y]&3)===3){let o=n.preOrderCheckHooks;o!==null&&fu(e,o,t)}else{let o=n.preOrderHooks;o!==null&&pu(e,o,0,t)}Jr(t)}var Yu=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Yu||{});function ap(n,e,t,r){let i=oe(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Yu.SignalBased)!==0&&(u=e[o][Rt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):ww(e,u,o,r)}finally{oe(i)}}function kT(n,e,t,r,i){let o=cr(),s=r&2;try{Jr(-1),s&&e.length>Pn&&xT(n,e,Pn,!1),me(s?2:0,i),t(r,i)}finally{Jr(o),me(s?3:1,i)}}function rg(n,e,t){XP(n,e,t),(t.flags&64)===64&&ex(n,e,t)}function OT(n,e,t=an){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function KP(n,e,t,r){let o=r.get(fP,yT)||t===sn.ShadowDom,s=n.selectRootElement(e,o);return QP(s),s}function QP(n){YP(n)}var YP=()=>null;function JP(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function LT(n,e,t,r,i,o,s,a){if(!a&&ig(e,n,t,r,i)){ho(e)&&ZP(t,e.index);return}if(e.type&3){let u=an(e,t);r=JP(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function ZP(n,e){let t=rn(e,n);t[Y]&16||(t[Y]|=64)}function XP(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ho(t)&&WP(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Mu(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Pu(e,n,s,t);if(Js(u,e),o!==null&&ix(e,s-r,u,a,t,o),tn(a)){let l=rn(t.index,e);l[gt]=Pu(e,n,s,t)}}}function ex(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=CM();try{Jr(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Qf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&tx(u,l)}}finally{Jr(-1),Qf(s)}}function tx(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function FT(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];kP(e,o.selectors,!1)&&(r??=[],tn(o)?r.unshift(o):r.push(o))}return r}function nx(n,e,t,r,i,o){let s=an(n,e);rx(e[Me],s,o,n.value,t,r,i)}function rx(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Zi(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function ix(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];ap(r,t,u,l)}}function ox(n,e){let t=n[to],r=t?t.get(on,null):null;r&&r.handleError(e)}function ig(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];ap(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];ap(h,l,r,i),a=!0}return a}function sx(n,e){let t=rn(e,n),r=t[le];ax(r,t);let i=t[kn];i!==null&&t[wu]===null&&(t[wu]=IT(i,t[to])),me(18),og(r,t,t[gt]),me(19,t[gt])}function ax(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function og(n,e,t){Lp(e);try{let r=n.viewQuery;r!==null&&sp(1,r,t);let i=n.template;i!==null&&kT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ro]?.finishViewCreation(n),n.staticContentQueries&&ET(n,e),n.staticViewQueries&&sp(2,n.viewQuery,t);let o=n.components;o!==null&&cx(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Y]&=-5,Fp()}}function cx(n,e){for(let t=0;t<e.length;t++)sx(n,e[t])}function ux(n,e,t,r){let i=oe(null);try{let o=e.tView,a=n[Y]&4096?4096:16,u=tg(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[no]=l;let h=n[ro];return h!==null&&(u[ro]=h.createEmbeddedView(o)),og(o,u,t),u}finally{oe(i)}}function PE(n,e){return!e||e.firstChild===null||lT(n)}var lx;function sg(n,e){return lx(n,e)}var xn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(xn||{});function VT(n){return(n.flags&32)===32}function Qi(n,e,t,r,i){if(r!=null){let o,s=!1;On(r)?o=r:sr(r)&&(s=!0,r=r[kn]);let a=nn(r);n===0&&t!==null?i==null?RT(e,t,a):Lu(e,t,a,i||null,!0):n===1&&t!==null?Lu(e,t,a,i||null,!0):n===2?$P(e,a,s):n===3&&e.destroyNode(a),o!=null&&wx(e,n,o,t,i)}}function dx(n,e){UT(n,e),e[kn]=null,e[zt]=null}function hx(n,e,t,r,i,o){r[kn]=i,r[zt]=e,Ju(n,r,t,1,i,o)}function UT(n,e){e[Mn].changeDetectionScheduler?.notify(9),Ju(n,e,e[Me],2,null,null)}function fx(n){let e=n[Bs];if(!e)return Nf(n[le],n);for(;e;){let t=null;if(sr(e))t=e[Bs];else{let r=e[Pt];r&&(t=r)}if(!t){for(;e&&!e[$t]&&e!==n;)sr(e)&&Nf(e[le],e),e=e[at];e===null&&(e=n),sr(e)&&Nf(e[le],e),t=e&&e[$t]}e=t}}function ag(n,e){let t=n[Cu],r=t.indexOf(e);t.splice(r,1)}function jT(n,e){if(fo(e))return;let t=e[Me];t.destroyNode&&Ju(n,e,t,3,null,null),fx(e)}function Nf(n,e){if(fo(e))return;let t=oe(null);try{e[Y]&=-129,e[Y]|=256,e[Mt]&&rf(e[Mt]),gx(n,e),px(n,e),e[le].type===1&&e[Me].destroy();let r=e[no];if(r!==null&&On(e[at])){r!==e[at]&&ag(r,e);let i=e[ro];i!==null&&i.detachView(n)}rp(e)}finally{oe(t)}}function px(n,e){let t=n.cleanup,r=e[Tu];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Tu]=null);let i=e[or];if(i!==null){e[or]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Du];if(o!==null){e[Du]=null;for(let s of o)s.destroy()}}function gx(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Zr)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];me(4,a,u);try{u.call(a)}finally{me(5,a,u)}}else{me(4,i,o);try{o.call(i)}finally{me(5,i,o)}}}}}function mx(n,e,t){return yx(n,e.parent,t)}function yx(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[kn];if(ho(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===sn.None||i===sn.Emulated)return null}return an(r,t)}function vx(n,e,t){return Ix(n,e,t)}function _x(n,e,t){return n.type&40?an(n,t):null}var Ix=_x,xE;function cg(n,e,t,r){let i=mx(n,r,e),o=e[Me],s=r.parent||e[zt],a=vx(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)ME(o,i,t[u],a,!1);else ME(o,i,t,a,!1);xE!==void 0&&xE(o,r,e,t,i)}function Fs(n,e){if(e!==null){let t=e.type;if(t&3)return an(e,n);if(t&4)return cp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Fs(n,r);{let i=n[e.index];return On(i)?cp(-1,i):nn(i)}}else{if(t&128)return Fs(n,e.next);if(t&32)return sg(e,n)()||nn(n[e.index]);{let r=BT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Yr(n[en]);return Fs(i,r)}else return Fs(n,e.next)}}}return null}function BT(n,e){if(e!==null){let r=n[en][zt],i=e.projection;return r.projection[i]}return null}function cp(n,e){let t=Pt+n+1;if(t<e.length){let r=e[t],i=r[le].firstChild;if(i!==null)return Fs(r,i)}return e[Qr]}function ug(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Js(nn(a),r),t.flags|=2),!VT(t))if(u&8)ug(n,e,t.child,r,i,o,!1),Qi(e,n,i,a,o);else if(u&32){let l=sg(t,r),h;for(;h=l();)Qi(e,n,i,h,o);Qi(e,n,i,a,o)}else u&16?Ex(n,e,r,t,i,o):Qi(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Ju(n,e,t,r,i,o){ug(t,r,n.firstChild,e,i,o,!1)}function Ex(n,e,t,r,i,o){let s=t[en],u=s[zt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Qi(e,n,i,h,o)}else{let l=u,h=s[at];lT(r)&&(l.flags|=128),ug(n,e,l,h,i,o,!0)}}function wx(n,e,t,r,i){let o=t[Qr],s=nn(t);o!==s&&Qi(e,n,r,o,i);for(let a=Pt;a<t.length;a++){let u=t[a];Ju(u[le],u,n,e,r,o)}}function Tx(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:xn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=xn.Important),n.setStyle(t,r,i,o))}}function Fu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(nn(o)),On(o)&&Dx(o,r);let s=t.type;if(s&8)Fu(n,e,t.child,r);else if(s&32){let a=sg(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=BT(e,t);if(Array.isArray(a))r.push(...a);else{let u=Yr(e[en]);Fu(u[le],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Dx(n,e){for(let t=Pt;t<n.length;t++){let r=n[t],i=r[le].firstChild;i!==null&&Fu(r[le],r,i,e)}n[Qr]!==n[kn]&&e.push(n[Qr])}function $T(n){if(n[Yi]!==null){for(let e of n[Yi])e.impl.addSequence(e);n[Yi].length=0}}var HT=[];function bx(n){return n[Mt]??Cx(n)}function Cx(n){let e=HT.pop()??Object.create(Ax);return e.lView=n,e}function Sx(n){n.lView[Mt]!==n&&(n.lView=null,HT.push(n))}var Ax=ie(x({},As),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ks(n.lView)},consumerOnSignalRead(){this.lView[Mt]=this}});function Rx(n){let e=n[Mt]??Object.create(Nx);return e.lView=n,e}var Nx=ie(x({},As),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Yr(n.lView);for(;e&&!zT(e[le]);)e=Yr(e);e&&Rw(e)},consumerOnSignalRead(){this.lView[Mt]=this}});function zT(n){return n.type!==2}function qT(n){if(n[Du]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Du])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Y]&8192)}}var Mx=100;function GT(n,e=!0,t=0){let i=n[Mn].rendererFactory,o=!1;o||i.begin?.();try{Px(n,t)}catch(s){throw e&&ox(n,s),s}finally{o||i.end?.()}}function Px(n,e){let t=Lw();try{mE(!0),up(n,e);let r=0;for(;Wu(n);){if(r===Mx)throw new U(103,!1);r++,up(n,1)}}finally{mE(t)}}function xx(n,e,t,r){if(fo(e))return;let i=e[Y],o=!1,s=!1;Lp(e);let a=!0,u=null,l=null;o||(zT(n)?(l=bx(e),u=Oc(l)):Jh()===null?(a=!1,l=Rx(e),u=Oc(l)):e[Mt]&&(rf(e[Mt]),e[Mt]=null));try{Aw(e),TM(n.bindingStartIndex),t!==null&&kT(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&fu(e,y,null)}else{let y=n.preOrderHooks;y!==null&&pu(e,y,0,null),Af(e,0)}if(s||kx(e),qT(e),WT(e,0),n.contentQueries!==null&&ET(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&fu(e,y)}else{let y=n.contentHooks;y!==null&&pu(e,y,1),Af(e,1)}Lx(n,e);let p=n.components;p!==null&&QT(e,p,0);let m=n.viewQuery;if(m!==null&&sp(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&fu(e,y)}else{let y=n.viewHooks;y!==null&&pu(e,y,2),Af(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Sf]){for(let y of e[Sf])y();e[Sf]=null}o||($T(e),e[Y]&=-73)}catch(h){throw o||Ks(e),h}finally{l!==null&&(tf(l,u),a&&Sx(l)),Fp()}}function WT(n,e){for(let t=fT(n);t!==null;t=pT(t))for(let r=Pt;r<t.length;r++){let i=t[r];KT(i,e)}}function kx(n){for(let e=fT(n);e!==null;e=pT(e)){if(!(e[Y]&2))continue;let t=e[Cu];for(let r=0;r<t.length;r++){let i=t[r];Rw(i)}}}function Ox(n,e,t){me(18);let r=rn(e,n);KT(r,t),me(19,r[gt])}function KT(n,e){kp(n)&&up(n,e)}function up(n,e){let r=n[le],i=n[Y],o=n[Mt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&nf(o)),s||=!1,o&&(o.dirty=!1),n[Y]&=-9217,s)xx(r,n,r.template,n[gt]);else if(i&8192){qT(n),WT(n,1);let a=r.components;a!==null&&QT(n,a,1),$T(n)}}function QT(n,e,t){for(let r=0;r<e.length;r++)Ox(n,e[r],t)}function Lx(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Jr(~i);else{let o=i,s=t[++r],a=t[++r];bM(s,o);let u=e[o];me(24,u),a(2,u),me(25,u)}}}finally{Jr(-1)}}function lg(n,e){let t=Lw()?64:1088;for(n[Mn].changeDetectionScheduler?.notify(e);n;){n[Y]|=t;let r=Yr(n);if(Su(n)&&!r)return n;n=r}return null}function YT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Fx(n,e,t,r=!0){let i=e[le];if(Vx(i,e,n,t),r){let s=cp(t,n),a=e[Me],u=a.parentNode(n[Qr]);u!==null&&hx(i,n[zt],a,e,u,s)}let o=e[wu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function lp(n,e){if(n.length<=Pt)return;let t=Pt+e,r=n[t];if(r){let i=r[no];i!==null&&i!==n&&ag(i,r),e>0&&(n[t-1][$t]=r[$t]);let o=Iu(n,Pt+e);dx(r[le],r);let s=o[ro];s!==null&&s.detachView(o[le]),r[at]=null,r[$t]=null,r[Y]&=-129}return r}function Vx(n,e,t,r){let i=Pt+r,o=t.length;r>0&&(t[i-1][$t]=e),r<o-Pt?(e[$t]=t[i],lw(t,Pt+r,e)):(t.push(e),e[$t]=null),e[at]=t;let s=e[no];s!==null&&t!==s&&JT(s,e);let a=e[ro];a!==null&&a.insertView(n),Wf(e),e[Y]|=128}function JT(n,e){let t=n[Cu],r=e[at];if(sr(r))n[Y]|=2;else{let i=r[at][en];e[en]!==i&&(n[Y]|=2)}t===null?n[Cu]=[e]:t.push(e)}var Hs=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[le];return Fu(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[gt]}set context(e){this._lView[gt]=e}get destroyed(){return fo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[at];if(On(e)){let t=e[bu],r=t?t.indexOf(this):-1;r>-1&&(lp(e,r),Iu(t,r))}this._attachedToViewContainer=!1}jT(this._lView[le],this._lView)}onDestroy(e){Nw(this._lView,e)}markForCheck(){lg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Y]&=-129}reattach(){Wf(this._lView),this._lView[Y]|=128}detectChanges(){this._lView[Y]|=1024,GT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Su(this._lView),t=this._lView[no];t!==null&&!e&&ag(t,this._lView),UT(this._lView[le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let t=Su(this._lView),r=this._lView[no];r!==null&&!t&&JT(r,this._lView),Wf(this._lView)}};var Zu=(()=>{class n{static __NG_ELEMENT_ID__=Bx}return n})(),Ux=Zu,jx=class extends Ux{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=ux(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Hs(i)}};function Bx(){return $x(vt(),_e())}function $x(n,e){return n.type&4?new jx(e,n,Qu(n,e)):null}function dg(n,e,t,r,i){let o=n.data[e];if(o===null)o=Hx(n,e,t,r,i),DM()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=IM();o.injectorIndex=s===null?-1:s.injectorIndex}return Qs(o,!0),o}function Hx(n,e,t,r,i){let o=kw(),s=Ow(),a=s?o:o&&o.parent,u=n.data[e]=qx(n,a,t,e,r,i);return zx(n,u,o,s),u}function zx(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function qx(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return yM()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var B3=new RegExp(`^(\\d+)*(${hP}|${dP})*(.*)`);var Gx=()=>null;function kE(n,e){return Gx(n,e)}var Wx=class{},ZT=class{},dp=class{resolveComponentFactory(e){throw Error(`No component factory found for ${pt(e)}.`)}},Xu=class{static NULL=new dp},oo=class{},el=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Kx()}return n})();function Kx(){let n=_e(),e=vt(),t=rn(e.index,n);return(sr(t)?t:n)[Me]}var Qx=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>null})}return n})();var Mf={},hp=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=zu(r);let i=this.injector.get(e,Mf,r);return i!==Mf||t===Mf?i:this.parentInjector.get(e,t,r)}};function OE(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Uf(i,a);else if(o==2){let u=a,l=e[++s];r=Uf(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ct(n,e=ee.Default){let t=_e();if(t===null)return $(n,e);let r=vt();return Xw(r,t,st(n),e)}function XT(){let n="invalid";throw new Error(n)}function eD(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,u=null,l=null,h=Jx(s);h===null?a=s:[a,u,l]=h,ek(n,e,t,a,o,u,l)}o!==null&&r!==null&&Yx(t,r,o)}function Yx(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new U(-301,!1);r.push(e[i],o)}}function Jx(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&tn(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,Zx(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function Zx(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function Xx(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function ek(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&tn(y)&&(u=!0,Xx(n,t,m)),Jf(Mu(t,e),n,y.type)}sk(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=PT(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=$s(t.mergedAttrs,y.hostAttrs),nk(n,t,e,p,y),ok(p,y,i),s!==null&&s.has(y)){let[R,N]=s.get(y);t.directiveToIndex.set(y.type,[p,R+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let T=y.type.prototype;!l&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(T.ngOnChanges||T.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}tk(n,t,o)}function tk(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))LE(0,e,i,r),LE(1,e,i,r),VE(e,r,!1);else{let o=t.get(i);FE(0,e,o,r),FE(1,e,o,r),VE(e,r,!0)}}}function LE(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),tD(e,o)}}function FE(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),tD(e,s)}}function tD(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function VE(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Xp(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function nk(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Xi(i.type,!0)),s=new Zr(o,tn(i),ct);n.blueprint[r]=s,t[r]=s,rk(n,e,r,PT(n,t,i.hostVars,cn),i)}function rk(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;ik(s)!=a&&s.push(a),s.push(t,r,o)}}function ik(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function ok(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;tn(e)&&(t[""]=n)}}function sk(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function nD(n,e,t,r,i,o,s,a){let u=e.consts,l=Au(u,s),h=dg(e,n,2,r,l);return o&&eD(e,t,h,Au(u,a),i),h.mergedAttrs=$s(h.mergedAttrs,h.attrs),h.attrs!==null&&OE(h,h.attrs,!1),h.mergedAttrs!==null&&OE(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function rD(n,e){zw(n,e),Ew(e)&&n.queries.elementEnd(e)}var Vu=class extends Xu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Kr(e);return new so(t,this.ngModule)}};function ak(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Yu.SignalBased)!==0};return i&&(o.transform=i),o})}function ck(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function uk(n,e,t){let r=e instanceof et?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new hp(t,r):t}function lk(n){let e=n.get(oo,null);if(e===null)throw new U(407,!1);let t=n.get(Qx,null),r=n.get(io,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function dk(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return AT(e,t,t==="svg"?uM:t==="math"?lM:null)}var so=class extends ZT{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=ak(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=ck(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=VP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){me(22);let o=oe(null);try{let s=this.componentDef,a=r?["ng-version","19.2.14"]:UP(this.componentDef.selectors[0]),u=eg(0,null,null,1,0,null,null,null,null,[a],null),l=uk(s,i||this.ngModule,e),h=lk(l),p=h.rendererFactory.createRenderer(null,s),m=r?KP(p,r,s.encapsulation,l):dk(s,p),y=tg(null,u,null,512|MT(s),null,null,h,p,l,null,IT(m,l,!0));y[Pn]=m,Lp(y);let T=null;try{let R=nD(Pn,u,y,"#host",()=>[this.componentDef],!0,0);m&&(NT(p,m,R),Js(m,y)),rg(u,y,R),wT(u,R,y),rD(u,R),t!==void 0&&hk(R,this.ngContentSelectors,t),T=rn(R.index,y),y[gt]=T[gt],og(u,y,null)}catch(R){throw T!==null&&rp(T),rp(y),R}finally{me(23),Fp()}return new fp(this.componentType,y)}finally{oe(o)}}},fp=class extends Wx{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Sw(t[le],Pn),this.location=Qu(this._tNode,t),this.instance=rn(this._tNode.index,t)[gt],this.hostView=this.changeDetectorRef=new Hs(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=ig(r,i[le],i,e,t);this.previousInputValues.set(e,t);let s=rn(r.index,i);lg(s,1)}get injector(){return new Gr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function hk(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var vo=(()=>{class n{static __NG_ELEMENT_ID__=fk}return n})();function fk(){let n=vt();return gk(n,_e())}var pk=vo,iD=class extends pk{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Qu(this._hostTNode,this._hostLView)}get injector(){return new Gr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Bp(this._hostTNode,this._hostLView);if(Ww(e)){let t=Nu(e,this._hostLView),r=Ru(e),i=t[le].data[r+8];return new Gr(i,t)}else return new Gr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=UE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Pt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=kE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,PE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!oM(e),a;if(s)a=t;else{let T=t||{};a=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef}let u=s?e:new so(Kr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let R=(s?l:this.parentInjector).get(et,null);R&&(o=R)}let h=Kr(u.componentType??{}),p=kE(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,PE(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(dM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[at],l=new iD(u,u[zt],u[at]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Fx(s,i,o,r),e.attachToViewContainerRef(),lw(Pf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=UE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=lp(this._lContainer,t);r&&(Iu(Pf(this._lContainer),t),jT(r[le],r))}detach(e){let t=this._adjustIndex(e,-1),r=lp(this._lContainer,t);return r&&Iu(Pf(this._lContainer),t)!=null?new Hs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function UE(n){return n[bu]}function Pf(n){return n[bu]||(n[bu]=[])}function gk(n,e){let t,r=e[n.index];return On(r)?t=r:(t=YT(r,e,null,n),e[n.index]=t,ng(e,t)),yk(t,e,n,r),new iD(t,n,e)}function mk(n,e){let t=n[Me],r=t.createComment(""),i=an(e,n),o=t.parentNode(i);return Lu(t,o,r,t.nextSibling(i),!1),r}var yk=Ik,vk=()=>!1;function _k(n,e,t){return vk(n,e,t)}function Ik(n,e,t,r){if(n[Qr])return;let i;t.type&8?i=nn(r):i=mk(e,t),n[Qr]=i}var ao=class{},hg=class{};var pp=class extends ao{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Vu(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=fw(e);this._bootstrapComponents=CT(o.bootstrap),this._r3Injector=nT(e,t,[{provide:ao,useValue:this},{provide:Xu,useValue:this.componentFactoryResolver},...r],pt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gp=class extends hg{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new pp(this.moduleType,e,[])}};var Uu=class extends ao{injector;componentFactoryResolver=new Vu(this);instance=null;constructor(e){super();let t=new js([...e.providers,{provide:ao,useValue:this},{provide:Xu,useValue:this.componentFactoryResolver}],e.parent||Pp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Xs(n,e,t=null){return new Uu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Ek=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=pw(!1,t.type),i=r.length>0?Xs([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=j({token:n,providedIn:"environment",factory:()=>new n($(et))})}return n})();function oD(n){return qs(()=>{let e=sD(n),t=ie(x({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===dT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Ek).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||sn.Emulated,styles:n.styles||ht,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&yo("NgStandalone"),aD(t);let r=n.dependencies;return t.directiveDefs=jE(r,!1),t.pipeDefs=jE(r,!0),t.id=Ck(t),t})}function wk(n){return Kr(n)||GN(n)}function Tk(n){return n!==null}function ni(n){return qs(()=>({type:n.type,bootstrap:n.bootstrap||ht,declarations:n.declarations||ht,imports:n.imports||ht,exports:n.exports||ht,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Dk(n,e){if(n==null)return Wr;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Yu.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function bk(n){if(n==null)return Wr;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ri(n){return qs(()=>{let e=sD(n);return aD(e),e})}function sD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Wr,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ht,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Dk(n.inputs,e),outputs:bk(n.outputs),debugInfo:null}}function aD(n){n.features?.forEach(e=>e(n))}function jE(n,e){if(!n)return null;let t=e?WN:wk;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(Tk)}function Ck(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Sk(n){return Object.getPrototypeOf(n.prototype).constructor}function Ak(n){let e=Sk(n.type),t=!0,r=[n];for(;e;){let i;if(tn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=xf(n.inputs),s.declaredInputs=xf(n.declaredInputs),s.outputs=xf(n.outputs);let a=i.hostBindings;a&&xk(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&Mk(n,u),l&&Pk(n,l),Rk(n,i),bN(n.outputs,i.outputs),tn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Ak&&(t=!1)}}e=Object.getPrototypeOf(e)}Nk(r)}function Rk(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Nk(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=$s(i.hostAttrs,t=$s(t,i.hostAttrs))}}function xf(n){return n===Wr?{}:n===ht?[]:n}function Mk(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Pk(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function xk(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function cD(n){return Ok(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function kk(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Ok(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ar(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Lk(n,e,t,r){let i=ar(n,e,t);return ar(n,e+1,r)||i}function Fk(n,e,t,r,i,o,s,a,u){let l=e.consts,h=dg(e,n,4,s||null,a||null);xw()&&eD(e,t,h,Au(l,u),FT),h.mergedAttrs=$s(h.mergedAttrs,h.attrs),zw(e,h);let p=h.tView=eg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Vk(n,e,t,r,i,o,s,a,u,l){let h=t+Pn,p=e.firstCreatePass?Fk(h,e,n,r,i,o,s,a,u):e.data[h];Qs(p,!1);let m=jk(e,n,p,t);Up()&&cg(e,n,m,p),Js(m,n);let y=YT(m,n,m,p);return n[h]=y,ng(n,y),_k(y,p,n),xp(p)&&rg(e,n,p),u!=null&&OT(n,p,l),p}function Uk(n,e,t,r,i,o,s,a){let u=_e(),l=yt(),h=Au(l.consts,o);return Vk(u,l,n,e,t,r,i,h,s,a),Uk}var jk=Bk;function Bk(n,e,t,r){return jp(!0),e[Me].createComment("")}var uD=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var lD=new B("");var $k=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>new mp})}return n})(),mp=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function ea(n){return!!n&&typeof n.then=="function"}function dD(n){return!!n&&typeof n.subscribe=="function"}var hD=new B("");function fg(n){return uo([{provide:hD,multi:!0,useValue:n}])}var fD=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=k(hD,{optional:!0})??[];injector=k(Ht);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=mt(this.injector,i);if(ea(o))t.push(o);else if(dD(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tl=new B("");function Hk(){sf(()=>{throw new U(600,!1)})}function zk(n){return n.isBoundToModule}var qk=10;var Xr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(tP);afterRenderManager=k(_T);zonelessEnabled=k(zp);rootEffectScheduler=k($k);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new He;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=k(ur).hasPendingTasks.pipe(te(t=>!t));constructor(){k(mo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=k(et);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ht.NULL){me(10);let o=t instanceof ZT;if(!this._injector.get(fD).done){let y="";throw new U(405,y)}let a;o?a=t:a=this._injector.get(Xu).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let u=zk(a)?void 0:this._injector.get(ao),l=r||a.selector,h=a.create(i,[],l,u),p=h.location.nativeElement,m=h.injector.get(lD,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),gu(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),me(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){me(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Yp.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);let t=oe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,oe(t),this.afterTick.next(),me(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(oo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<qk;)me(14),this.synchronizeOnce(),me(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)Gk(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Wu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;gu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(tl,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>gu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new U(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Gk(n,e,t,r){if(!t&&!Wu(n))return;GT(n,e,t&&!r?0:1)}function pg(n,e,t,r){let i=_e(),o=Ku();if(ar(i,o,e)){let s=yt(),a=Vp();nx(a,i,n,e,t,r)}return pg}function Wk(n,e,t,r){return ar(n,Ku(),t)?e+Zi(t)+r:cn}function Kk(n,e,t,r,i,o){let s=wM(),a=Lk(n,s,t,i);return Op(2),a?e+Zi(t)+r+Zi(i)+o:cn}function du(n,e){return n<<17|e<<2}function ei(n){return n>>17&32767}function Qk(n){return(n&2)==2}function Yk(n,e){return n&131071|e<<17}function yp(n){return n|2}function co(n){return(n&131068)>>2}function kf(n,e){return n&-131069|e<<2}function Jk(n){return(n&1)===1}function vp(n){return n|1}function Zk(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ei(s),u=co(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Gs(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=ei(n[a+1]);n[r+1]=du(m,a),m!==0&&(n[m+1]=kf(n[m+1],r)),n[a+1]=Yk(n[a+1],r)}else n[r+1]=du(a,0),a!==0&&(n[a+1]=kf(n[a+1],r)),a=r;else n[r+1]=du(u,0),a===0?a=r:n[u+1]=kf(n[u+1],r),u=r;l&&(n[r+1]=yp(n[r+1])),BE(n,h,r,!0),BE(n,h,r,!1),Xk(e,h,n,r,o),s=du(a,u),o?e.classBindings=s:e.styleBindings=s}function Xk(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Gs(o,e)>=0&&(t[r+1]=vp(t[r+1]))}function BE(n,e,t,r){let i=n[t+1],o=e===null,s=r?ei(i):co(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];eO(u,e)&&(a=!0,n[s+1]=r?vp(l):yp(l)),s=r?ei(l):co(l)}a&&(n[t+1]=r?yp(i):vp(i))}function eO(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Gs(n,e)>=0:!1}var Bt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function tO(n){return n.substring(Bt.key,Bt.keyEnd)}function nO(n){return rO(n),pD(n,gD(n,0,Bt.textEnd))}function pD(n,e){let t=Bt.textEnd;return t===e?-1:(e=Bt.keyEnd=iO(n,Bt.key=e,t),gD(n,e,t))}function rO(n){Bt.key=0,Bt.keyEnd=0,Bt.value=0,Bt.valueEnd=0,Bt.textEnd=n.length}function gD(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function iO(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function oO(n,e,t){let r=_e(),i=Ku();if(ar(r,i,e)){let o=yt(),s=Vp();LT(o,s,r,n,e,r[Me],t,!1)}return oO}function _p(n,e,t,r,i){ig(e,n,t,i?"class":"style",r)}function sO(n,e){return cO(n,e,null,!0),sO}function K3(n){uO(gO,aO,n,!0)}function aO(n,e){for(let t=nO(e);t>=0;t=pD(e,t))Np(n,tO(e),!0)}function cO(n,e,t,r){let i=_e(),o=yt(),s=Op(2);if(o.firstUpdatePass&&yD(o,n,s,r),e!==cn&&ar(i,s,e)){let a=o.data[cr()];vD(o,a,i,i[Me],n,i[s+1]=yO(e,t),r,s)}}function uO(n,e,t,r){let i=yt(),o=Op(2);i.firstUpdatePass&&yD(i,null,o,r);let s=_e();if(t!==cn&&ar(s,o,t)){let a=i.data[cr()];if(_D(a,r)&&!mD(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=Uf(u,t||"")),_p(i,a,s,t,r)}else mO(i,a,s,s[Me],s[o+1],s[o+1]=pO(n,e,t),r,o)}}function mD(n,e){return e>=n.expandoStartIndex}function yD(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[cr()],s=mD(n,t);_D(o,r)&&e===null&&!s&&(e=!1),e=lO(i,o,e,r),Zk(i,o,e,t,s,r)}}function lO(n,e,t,r){let i=SM(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Of(null,n,e,t,r),t=zs(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Of(i,n,e,t,r),o===null){let u=dO(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Of(null,n,e,u[1],r),u=zs(u,e.attrs,r),hO(n,e,r,u))}else o=fO(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function dO(n,e,t){let r=t?e.classBindings:e.styleBindings;if(co(r)!==0)return n[ei(r)]}function hO(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ei(i)]=r}function fO(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=zs(r,s,t)}return zs(r,e.attrs,t)}function Of(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=zs(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function zs(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Np(n,s,t?!0:e[++o]))}return n===void 0?null:n}function pO(n,e,t){if(t==null||t==="")return ht;let r=[],i=Zs(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function gO(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Np(n,r,t)}function mO(n,e,t,r,i,o,s,a){i===cn&&(i=ht);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,T=null,R;h===p?(u+=2,l+=2,m!==y&&(T=p,R=y)):p===null||h!==null&&h<p?(u+=2,T=h):(l+=2,T=p,R=y),T!==null&&vD(n,e,t,r,T,R,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function vD(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=Jk(l)?$E(u,e,t,i,co(l),s):void 0;if(!ju(h)){ju(o)||Qk(l)&&(o=$E(u,null,t,i,a,s));let p=Cw(cr(),t);Tx(r,s,p,i,o)}}function $E(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===cn&&(m=p?ht:void 0);let y=p?bf(m,r):h===r?m:void 0;if(l&&!ju(y)&&(y=bf(u,r)),ju(y)&&(a=y,s))return a;let T=n[i+1];i=s?ei(T):co(T)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=bf(u,r))}return a}function ju(n){return n!==void 0}function yO(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=pt(Zs(n)))),n}function _D(n,e){return(n.flags&(e?8:16))!==0}function ID(n,e,t,r){let i=_e(),o=yt(),s=Pn+n,a=i[Me],u=o.firstCreatePass?nD(s,o,i,e,FT,xw(),t,r):o.data[s],l=vO(o,i,u,a,e,n);i[s]=l;let h=xp(u);return Qs(u,!0),NT(a,l,u),!VT(u)&&Up()&&cg(o,i,l,u),(pM()===0||h)&&Js(l,i),gM(),h&&(rg(o,i,u),wT(o,u,i)),r!==null&&OT(i,u),ID}function ED(){let n=vt();Ow()?EM():(n=n.parent,Qs(n,!1));let e=n;vM(e)&&_M(),mM();let t=yt();return t.firstCreatePass&&rD(t,e),e.classesWithoutHost!=null&&xM(e)&&_p(t,e,_e(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&kM(e)&&_p(t,e,_e(),e.stylesWithoutHost,!1),ED}function gg(n,e,t,r){return ID(n,e,t,r),ED(),gg}var vO=(n,e,t,r,i,o)=>(jp(!0),AT(r,i,NM()));function Q3(){return _e()}var Bu="en-US";var _O=Bu;function IO(n){typeof n=="string"&&(_O=n.toLowerCase().replace(/_/g,"-"))}function HE(n,e,t){return function r(i){if(i===Function)return t;let o=ho(n)?rn(n.index,e):e;lg(o,5);let s=e[gt],a=zE(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=zE(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function zE(n,e,t,r){let i=oe(null);try{return me(6,e,t),t(r)!==!1}catch(o){return EO(n,o),!1}finally{me(7,e,t),oe(i)}}function EO(n,e){let t=n[to],r=t?t.get(on,null):null;r&&r.handleError(e)}function qE(n,e,t,r,i,o){let s=e[t],a=e[le],l=a.data[t].outputs[r],h=s[l],p=a.firstCreatePass?Pw(a):null,m=Mw(e),y=h.subscribe(o),T=m.length;m.push(o,y),p&&p.push(i,n.index,T,-(T+1))}function mg(n,e,t,r){let i=_e(),o=yt(),s=vt();return wD(o,i,i[Me],s,n,e,r),mg}function wO(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Tu],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function wD(n,e,t,r,i,o,s){let a=xp(r),l=n.firstCreatePass?Pw(n):null,h=Mw(e),p=!0;if(r.type&3||s){let m=an(r,e),y=s?s(m):m,T=h.length,R=s?F=>s(nn(F[r.index])):r.index,N=null;if(!s&&a&&(N=wO(n,e,i,r.index)),N!==null){let F=N.__ngLastListenerFn__||N;F.__ngNextListenerFn__=o,N.__ngLastListenerFn__=o,p=!1}else{o=HE(r,e,o),IP(e,y,i,o);let F=t.listen(y,i,o);h.push(o,F),l&&l.push(i,R,T,T+1)}}else o=HE(r,e,o);if(p){let m=r.outputs?.[i],y=r.hostDirectiveOutputs?.[i];if(y&&y.length)for(let T=0;T<y.length;T+=2){let R=y[T],N=y[T+1];qE(r,e,R,N,i,o)}if(m&&m.length)for(let T of m)qE(r,e,T,i,i,o)}}function Y3(n=1){return RM(n)}function J3(n,e=""){let t=_e(),r=yt(),i=n+Pn,o=r.firstCreatePass?dg(r,i,1,e,null):r.data[i],s=TO(r,t,o,e,n);t[i]=s,Up()&&cg(r,t,s,o),Qs(o,!1)}var TO=(n,e,t,r,i)=>(jp(!0),jP(e[Me],r));function DO(n){return TD("",n,""),DO}function TD(n,e,t){let r=_e(),i=Wk(r,n,e,t);return i!==cn&&DD(r,cr(),i),TD}function bO(n,e,t,r,i){let o=_e(),s=Kk(o,n,e,t,r,i);return s!==cn&&DD(o,cr(),s),bO}function DD(n,e,t){let r=Cw(e,n);BP(n[Me],r,t)}function CO(n,e,t){uT(e)&&(e=e());let r=_e(),i=Ku();if(ar(r,i,e)){let o=yt(),s=Vp();LT(o,s,r,n,e,r[Me],t,!1)}return CO}function Z3(n,e){let t=uT(n);return t&&n.set(e),t}function SO(n,e){let t=_e(),r=yt(),i=vt();return wD(r,t,t[Me],i,n,e),SO}function AO(n,e,t){let r=yt();if(r.firstCreatePass){let i=tn(n);Ip(t,r.data,r.blueprint,i,!0),Ip(e,r.data,r.blueprint,i,!1)}}function Ip(n,e,t,r,i){if(n=st(n),Array.isArray(n))for(let o=0;o<n.length;o++)Ip(n[o],e,t,r,i);else{let o=yt(),s=_e(),a=vt(),u=eo(n)?n:st(n.provide),l=yw(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(eo(n)||!n.multi){let y=new Zr(l,i,ct),T=Ff(u,e,i?h:h+m,p);T===-1?(Jf(Mu(a,s),o,u),Lf(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[T]=y,s[T]=y)}else{let y=Ff(u,e,h+m,p),T=Ff(u,e,h,h+m),R=y>=0&&t[y],N=T>=0&&t[T];if(i&&!N||!i&&!R){Jf(Mu(a,s),o,u);let F=MO(i?NO:RO,t.length,i,r,l);!i&&N&&(t[T].providerFactory=F),Lf(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=bD(t[i?T:y],l,!i&&r);Lf(o,n,y>-1?y:T,F)}!i&&r&&N&&t[T].componentProviders++}}}function Lf(n,e,t,r){let i=eo(e),o=ZN(e);if(i||o){let u=(o?st(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function bD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ff(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function RO(n,e,t,r,i){return Ep(this.multi,[])}function NO(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Pu(r,r[le],this.providerFactory.index,i);s=u.slice(0,a),Ep(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Ep(o,s);return s}function Ep(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function MO(n,e,t,r,i){let o=new Zr(n,t,ct);return o.multi=[],o.index=e,o.componentProviders=0,bD(o,i,r&&!t),o}function X3(n,e=[]){return t=>{t.providersResolver=(r,i)=>AO(r,i?i(n):n,e)}}var wp=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},CD=(()=>{class n{compileModuleSync(t){return new gp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=fw(t),o=CT(i.declarations).reduce((s,a)=>{let u=Kr(a);return u&&s.push(new so(u)),s},[]);return new wp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var PO=(()=>{class n{zone=k(be);changeDetectionScheduler=k(io);applicationRef=k(Xr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xO=new B("",{factory:()=>!1});function SD({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new be(ie(x({},AD()),{scheduleInRootZone:t})),[{provide:be,useFactory:n},{provide:Us,multi:!0,useFactory:()=>{let r=k(PO,{optional:!0});return()=>r.initialize()}},{provide:Us,multi:!0,useFactory:()=>{let r=k(kO);return()=>{r.initialize()}}},e===!0?{provide:iT,useValue:!0}:[],{provide:oT,useValue:t??rT}]}function e6(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=SD({ngZoneFactory:()=>{let i=AD(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&yo("NgZone_CoalesceEvent"),new be(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return uo([{provide:xO,useValue:!0},{provide:zp,useValue:!1},r])}function AD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var kO=(()=>{class n{subscription=new Re;initialized=!1;zone=k(be);pendingTasks=k(ur);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var OO=(()=>{class n{appRef=k(Xr);taskService=k(ur);ngZone=k(be);zonelessEnabled=k(zp);tracing=k(mo,{optional:!0});disableScheduling=k(iT,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Re;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ku):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(oT,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof np||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?TE:sT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ku+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,TE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LO(){return typeof $localize<"u"&&$localize.locale||Bu}var yg=new B("",{providedIn:"root",factory:()=>k(yg,ee.Optional|ee.SkipSelf)||LO()});var Tp=new B(""),FO=new B("");function Os(n){return!n.moduleRef}function VO(n){let e=Os(n)?n.r3Injector:n.moduleRef.injector,t=e.get(be);return t.run(()=>{Os(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(on,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Os(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Tp);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Tp);s.add(o),n.moduleRef.onDestroy(()=>{gu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return jO(r,t,()=>{let o=e.get(fD);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(yg,Bu);if(IO(s||Bu),!e.get(FO,!0))return Os(n)?e.get(Xr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Os(n)){let u=e.get(Xr);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return UO(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function UO(n,e){let t=n.injector.get(Xr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new U(-403,!1);e.push(n)}function jO(n,e,t){try{let r=t();return ea(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var mu=null;function BO(n=[],e){return Ht.create({name:e,providers:[{provide:qu,useValue:"platform"},{provide:Tp,useValue:new Set([()=>mu=null])},...n]})}function $O(n=[]){if(mu)return mu;let e=BO(n);return mu=e,Hk(),HO(e),e}function HO(n){let e=n.get(Kp,null);mt(n,()=>{e?.forEach(t=>t())})}var ta=(()=>{class n{static __NG_ELEMENT_ID__=zO}return n})();function zO(n){return qO(vt(),_e(),(n&16)===16)}function qO(n,e,t){if(ho(n)&&!t){let r=rn(n.index,e);return new Hs(r,r)}else if(n.type&175){let r=e[en];return new Hs(r,e)}return null}var Dp=class{constructor(){}supports(e){return cD(e)}create(e){return new bp(e)}},GO=(n,e)=>e,bp=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||GO}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<GE(r,i,o)?t:r,a=GE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,T=y+m;h<=T&&T<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!cD(e))throw new U(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,kk(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Cp(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new $u),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new $u),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Cp=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Sp=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},$u=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Sp,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function GE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function WE(){return new vg([new Dp])}var vg=(()=>{class n{factories;static \u0275prov=j({token:n,providedIn:"root",factory:WE});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||WE()),deps:[[n,new HN,new $N]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new U(901,!1)}}return n})();function RD(n){me(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=$O(r),o=[SD({}),{provide:io,useExisting:OO},...t||[]],s=new Uu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return VO({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{me(9)}}function na(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function WO(n){return uf(n)}function t6(n,e){return of(n,e?.equal)}var KE=class{[Rt];constructor(e){this[Rt]=e}destroy(){this[Rt].destroy()}};function ND(n){let e=Kr(n);if(!e)return null;let t=new so(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Pe=new B("");var xD=null;function Fn(){return xD}function _g(n){xD??=n}var ra=class{},ia=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>k(kD),providedIn:"platform"})}return n})(),Ig=new B(""),kD=(()=>{class n extends ia{_location;_history;_doc=k(Pe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fn().getBaseHref(this._doc)}onPopState(t){let r=Fn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Fn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function nl(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function MD(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function qt(n){return n&&n[0]!=="?"?`?${n}`:n}var Gt=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>k(il),providedIn:"root"})}return n})(),rl=new B(""),il=(()=>{class n extends Gt{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(Pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return nl(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+qt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+qt(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+qt(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)($(ia),$(rl,8))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lr=(()=>{class n{_subject=new He;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=YO(MD(PD(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qt(r))}normalize(t){return n.stripTrailingSlash(QO(this._basePath,PD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=qt;static joinWithSlash=nl;static stripTrailingSlash=MD;static \u0275fac=function(r){return new(r||n)($(Gt))};static \u0275prov=j({token:n,factory:()=>KO(),providedIn:"root"})}return n})();function KO(){return new lr($(Gt))}function QO(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function PD(n){return n.replace(/\/index.html$/,"")}function YO(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Eg=(()=>{class n extends Gt{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=nl(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+qt(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+qt(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)($(ia),$(rl,8))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();var ol=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},FD=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ol(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),OD(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);OD(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ct(vo),ct(Zu),ct(vg))};static \u0275dir=ri({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function OD(n,e){n.context.$implicit=e.item}var JO=(()=>{class n{_viewContainer;_context=new sl;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){LD(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){LD(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ct(vo),ct(Zu))};static \u0275dir=ri({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),sl=class{$implicit=null;ngIf=null};function LD(n,e){if(n&&!n.createEmbeddedView)throw new U(2020,!1)}var VD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ni({type:n});static \u0275inj=ti({})}return n})();function oa(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var wg="browser",UD="server";function al(n){return n===UD}var ii=class{};var jD=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>new Tg(k(Pe),window)})}return n})(),Tg=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=ZO(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function ZO(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var ll=new B(""),Sg=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)($(ll),$(be))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),sa=class{_doc;constructor(e){this._doc=e}manager},cl="ng-app-id";function BD(n){for(let e of n)e.remove()}function $D(n,e){let t=e.createElement("style");return t.textContent=n,t}function e1(n,e,t,r){let i=n.head?.querySelectorAll(`style[${cl}="${e}"],link[${cl}="${e}"]`);if(i)for(let o of i)o.removeAttribute(cl),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function bg(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Ag=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=al(o),e1(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,$D);r?.forEach(i=>this.addUsage(i,this.external,bg))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(BD(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])BD(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,$D(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,bg(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(cl,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)($(Pe),$(Wp),$(Qp,8),$(go))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Dg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Rg=/%COMP%/g;var zD="%COMP%",t1=`_nghost-${zD}`,n1=`_ngcontent-${zD}`,r1=!0,i1=new B("",{providedIn:"root",factory:()=>r1});function o1(n){return n1.replace(Rg,n)}function s1(n){return t1.replace(Rg,n)}function qD(n,e){return e.map(t=>t.replace(Rg,n))}var Ng=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=al(a),this.defaultRenderer=new aa(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===sn.ShadowDom&&(r=ie(x({},r),{encapsulation:sn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof ul?i.applyToHost(t):i instanceof ca&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case sn.Emulated:o=new ul(u,l,r,this.appId,h,s,a,p,m);break;case sn.ShadowDom:return new Cg(u,l,t,r,s,a,this.nonce,p,m);default:o=new ca(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)($(Sg),$(Ag),$(Wp),$(i1),$(Pe),$(go),$(be),$(Qp),$(mo,8))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),aa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Dg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(HD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(HD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Dg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Dg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(xn.DashCase|xn.Important)?e.style.setProperty(t,r,i&xn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&xn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Fn().getGlobalEventTarget(this.doc,e),!e))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function HD(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Cg=class extends aa{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=qD(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=bg(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ca=class extends aa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?qD(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ul=class extends ca{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=o1(h),this.hostAttr=s1(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var dl=class n extends ra{supportsDOMEvents=!0;static makeCurrent(){_g(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=a1();return t==null?null:c1(t)}resetBaseElement(){ua=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return oa(document.cookie,e)}},ua=null;function a1(){return ua=ua||document.head.querySelector("base"),ua?ua.getAttribute("href"):null}function c1(n){return new URL(n,document.baseURI).pathname}var u1=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),WD=(()=>{class n extends sa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)($(Pe))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),GD=["alt","control","meta","shift"],l1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},d1={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},KD=(()=>{class n extends sa{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),GD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=l1[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),GD.forEach(s=>{if(s!==i){let a=d1[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)($(Pe))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();function h1(n,e){return RD(x({rootComponent:n},f1(e)))}function f1(n){return{appProviders:[...v1,...n?.providers??[]],platformProviders:y1}}function p1(){dl.makeCurrent()}function g1(){return new on}function m1(){return mT(document),document}var y1=[{provide:go,useValue:wg},{provide:Kp,useValue:p1,multi:!0},{provide:Pe,useFactory:m1}];var v1=[{provide:qu,useValue:"root"},{provide:on,useFactory:g1},{provide:ll,useClass:WD,multi:!0,deps:[Pe]},{provide:ll,useClass:KD,multi:!0,deps:[Pe]},Ng,Ag,Sg,{provide:oo,useExisting:Ng},{provide:ii,useClass:u1},[]];var Io=class{},la=class{},dr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var fl=class{encodeKey(e){return QD(e)}encodeValue(e){return QD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function _1(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var I1=/%(\d[a-f0-9])/gi,E1={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function QD(n){return encodeURIComponent(n).replace(I1,(e,t)=>E1[t]??e)}function hl(n){return`${n}`}var Vn=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new fl,e.fromString){if(e.fromObject)throw new U(2805,!1);this.map=_1(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(hl):[hl(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(hl(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(hl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var pl=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function w1(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function YD(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function JD(n){return typeof Blob<"u"&&n instanceof Blob}function ZD(n){return typeof FormData<"u"&&n instanceof FormData}function T1(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var XD="Content-Type",eb="Accept",tb="X-Request-URL",nb="text/plain",rb="application/json",D1=`${rb}, ${nb}, */*`,_o=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(w1(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new dr,this.context??=new pl,!this.params)this.params=new Vn,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||YD(this.body)||JD(this.body)||ZD(this.body)||T1(this.body)?this.body:this.body instanceof Vn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||ZD(this.body)?null:JD(this.body)?this.body.type||null:YD(this.body)?null:typeof this.body=="string"?nb:this.body instanceof Vn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?rb:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,y)=>m.set(y,e.setHeaders[y]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,y)=>m.set(y,e.setParams[y]),h)),new n(t,r,s,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},oi=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(oi||{}),Eo=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new dr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},gl=class n extends Eo{constructor(e={}){super(e)}type=oi.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},da=class n extends Eo{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=oi.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ha=class extends Eo{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},b1=200,C1=204;function Mg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var ib=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof _o)o=t;else{let u;i.headers instanceof dr?u=i.headers:u=new dr(i.headers);let l;i.params&&(i.params instanceof Vn?l=i.params:l=new Vn({fromObject:i.params})),o=new _o(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=q(o).pipe(Zt(u=>this.handler.handle(u)));if(t instanceof _o||i.observe==="events")return s;let a=s.pipe(ot(u=>u instanceof da));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(te(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new U(2806,!1);return u.body}));case"blob":return a.pipe(te(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new U(2807,!1);return u.body}));case"text":return a.pipe(te(u=>{if(u.body!==null&&typeof u.body!="string")throw new U(2808,!1);return u.body}));case"json":default:return a.pipe(te(u=>u.body))}case"response":return a;default:throw new U(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Vn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Mg(i,r))}post(t,r,i={}){return this.request("POST",t,Mg(i,r))}put(t,r,i={}){return this.request("PUT",t,Mg(i,r))}static \u0275fac=function(r){return new(r||n)($(Io))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();var S1=new B("");function A1(n,e){return e(n)}function R1(n,e,t){return(r,i)=>mt(t,()=>e(r,o=>n(o,i)))}var ob=new B(""),sb=new B(""),ab=new B("",{providedIn:"root",factory:()=>!0});var ml=(()=>{class n extends Io{backend;injector;chain=null;pendingTasks=k(ur);contributeToStability=k(ab);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(ob),...this.injector.get(sb,[])]));this.chain=r.reduceRight((i,o)=>R1(i,o,this.injector),A1)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(zr(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)($(la),$(et))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();var N1=/^\)\]\}',?\n/,M1=RegExp(`^${tb}:`,"m");function P1(n){return"responseURL"in n&&n.responseURL?n.responseURL:M1.test(n.getAllResponseHeaders())?n.getResponseHeader(tb):null}var Pg=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new U(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Ee(r.\u0275loadImpl()):q(null)).pipe(dt(()=>new he(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((R,N)=>s.setRequestHeader(R,N.join(","))),t.headers.has(eb)||s.setRequestHeader(eb,D1),!t.headers.has(XD)){let R=t.detectContentTypeHeader();R!==null&&s.setRequestHeader(XD,R)}if(t.responseType){let R=t.responseType.toLowerCase();s.responseType=R!=="json"?R:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let R=s.statusText||"OK",N=new dr(s.getAllResponseHeaders()),F=P1(s)||t.url;return u=new gl({headers:N,status:s.status,statusText:R,url:F}),u},h=()=>{let{headers:R,status:N,statusText:F,url:Z}=l(),H=null;N!==C1&&(H=typeof s.response>"u"?s.responseText:s.response),N===0&&(N=H?b1:0);let Se=N>=200&&N<300;if(t.responseType==="json"&&typeof H=="string"){let At=H;H=H.replace(N1,"");try{H=H!==""?JSON.parse(H):null}catch($e){H=At,Se&&(Se=!1,H={error:$e,text:H})}}Se?(o.next(new da({body:H,headers:R,status:N,statusText:F,url:Z||void 0})),o.complete()):o.error(new ha({error:H,headers:R,status:N,statusText:F,url:Z||void 0}))},p=R=>{let{url:N}=l(),F=new ha({error:R,status:s.status||0,statusText:s.statusText||"Unknown Error",url:N||void 0});o.error(F)},m=!1,y=R=>{m||(o.next(l()),m=!0);let N={type:oi.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(N.total=R.total),t.responseType==="text"&&s.responseText&&(N.partialText=s.responseText),o.next(N)},T=R=>{let N={type:oi.UploadProgress,loaded:R.loaded};R.lengthComputable&&(N.total=R.total),o.next(N)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",T)),s.send(a),o.next({type:oi.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",T)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)($(ii))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),cb=new B(""),x1="XSRF-TOKEN",k1=new B("",{providedIn:"root",factory:()=>x1}),O1="X-XSRF-TOKEN",L1=new B("",{providedIn:"root",factory:()=>O1}),fa=class{},F1=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=oa(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)($(Pe),$(k1))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();function V1(n,e){let t=n.url.toLowerCase();if(!k(cb)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=k(fa).getToken(),i=k(L1);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function U1(...n){let e=[ib,Pg,ml,{provide:Io,useExisting:ml},{provide:la,useFactory:()=>k(S1,{optional:!0})??k(Pg)},{provide:ob,useValue:V1,multi:!0},{provide:cb,useValue:!0},{provide:fa,useClass:F1}];for(let t of n)e.push(...t.\u0275providers);return uo(e)}var ub=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)($(Pe))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var X="primary",Ca=Symbol("RouteTitle"),Fg=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ci(n){return new Fg(n)}function yb(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function B1(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!un(n[t],e[t]))return!1;return!0}function un(n,e){let t=n?Vg(n):void 0,r=e?Vg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!vb(n[i],e[i]))return!1;return!0}function Vg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function vb(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function _b(n){return n.length>0?n[n.length-1]:null}function mr(n){return If(n)?n:ea(n)?Ee(Promise.resolve(n)):q(n)}var $1={exact:Eb,subset:wb},Ib={exact:H1,subset:z1,ignored:()=>!0};function lb(n,e,t){return $1[t.paths](n.root,e.root,t.matrixParams)&&Ib[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function H1(n,e){return un(n,e)}function Eb(n,e,t){if(!si(n.segments,e.segments)||!_l(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Eb(n.children[r],e.children[r],t))return!1;return!0}function z1(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>vb(n[t],e[t]))}function wb(n,e,t){return Tb(n,e,e.segments,t)}function Tb(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!si(i,t)||e.hasChildren()||!_l(i,t,r))}else if(n.segments.length===t.length){if(!si(n.segments,t)||!_l(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!wb(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!si(n.segments,i)||!_l(n.segments,i,r)||!n.children[X]?!1:Tb(n.children[X],e,o,r)}}function _l(n,e,t){return e.every((r,i)=>Ib[t](n[i].parameters,r.parameters))}var dn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new pe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ci(this.queryParams),this._queryParamMap}toString(){return W1.serialize(this)}},pe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Il(this)}},hr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ci(this.parameters),this._parameterMap}toString(){return bb(this)}};function q1(n,e){return si(n,e)&&n.every((t,r)=>un(t.parameters,e[r].parameters))}function si(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function G1(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===X&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==X&&(t=t.concat(e(i,r)))}),t}var ui=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>new fr,providedIn:"root"})}return n})(),fr=class{parse(e){let t=new jg(e);return new dn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${pa(e.root,!0)}`,r=Y1(e.queryParams),i=typeof e.fragment=="string"?`#${K1(e.fragment)}`:"";return`${t}${r}${i}`}},W1=new fr;function Il(n){return n.segments.map(e=>bb(e)).join("/")}function pa(n,e){if(!n.hasChildren())return Il(n);if(e){let t=n.children[X]?pa(n.children[X],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==X&&r.push(`${i}:${pa(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=G1(n,(r,i)=>i===X?[pa(n.children[X],!1)]:[`${i}:${pa(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[X]!=null?`${Il(n)}/${t[0]}`:`${Il(n)}/(${t.join("//")})`}}function Db(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yl(n){return Db(n).replace(/%3B/gi,";")}function K1(n){return encodeURI(n)}function Ug(n){return Db(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function El(n){return decodeURIComponent(n)}function db(n){return El(n.replace(/\+/g,"%20"))}function bb(n){return`${Ug(n.path)}${Q1(n.parameters)}`}function Q1(n){return Object.entries(n).map(([e,t])=>`;${Ug(e)}=${Ug(t)}`).join("")}function Y1(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${yl(t)}=${yl(i)}`).join("&"):`${yl(t)}=${yl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var J1=/^[^\/()?;#]+/;function xg(n){let e=n.match(J1);return e?e[0]:""}var Z1=/^[^\/()?;=#]+/;function X1(n){let e=n.match(Z1);return e?e[0]:""}var eL=/^[^=?&#]+/;function tL(n){let e=n.match(eL);return e?e[0]:""}var nL=/^[^&#]+/;function rL(n){let e=n.match(nL);return e?e[0]:""}var jg=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[X]=new pe(e,t)),r}parseSegment(){let e=xg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new hr(El(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=X1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=xg(this.remaining);i&&(r=i,this.capture(r))}e[El(t)]=El(r)}parseQueryParam(e){let t=tL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=rL(this.remaining);s&&(r=s,this.capture(r))}let i=db(t),o=db(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=xg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=X);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[X]:new pe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function Cb(n){return n.segments.length>0?new pe([],{[X]:n}):n}function Sb(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=Sb(i);if(r===X&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new pe(n.segments,e);return iL(t)}function iL(n){if(n.numberOfChildren===1&&n.children[X]){let e=n.children[X];return new pe(n.segments.concat(e.segments),e.children)}return n}function pr(n){return n instanceof dn}function Ab(n,e,t=null,r=null){let i=Rb(n);return Nb(i,e,t,r)}function Rb(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new pe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=Cb(r);return e??i}function Nb(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return kg(i,i,i,t,r);let o=oL(e);if(o.toRoot())return kg(i,i,new pe([],{}),t,r);let s=sL(o,i,n),a=s.processChildren?ma(s.segmentGroup,s.index,o.commands):Pb(s.segmentGroup,s.index,o.commands);return kg(i,s.segmentGroup,a,t,r)}function Tl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function va(n){return typeof n=="object"&&n!=null&&n.outlets}function kg(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=Mb(n,e,t);let a=Cb(Sb(s));return new dn(a,o,i)}function Mb(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=Mb(o,e,t)}),new pe(n.segments,r)}var Dl=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Tl(r[0]))throw new U(4003,!1);let i=r.find(va);if(i&&i!==_b(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function oL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Dl(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Dl(t,e,r)}var Do=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function sL(n,e,t){if(n.isAbsolute)return new Do(e,!0,0);if(!t)return new Do(e,!1,NaN);if(t.parent===null)return new Do(t,!0,0);let r=Tl(n.commands[0])?0:1,i=t.segments.length-1+r;return aL(t,i,n.numberOfDoubleDots)}function aL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new Do(r,!1,i-o)}function cL(n){return va(n[0])?n[0].outlets:{[X]:n}}function Pb(n,e,t){if(n??=new pe([],{}),n.segments.length===0&&n.hasChildren())return ma(n,e,t);let r=uL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new pe(n.segments.slice(0,r.pathIndex),{});return o.children[X]=new pe(n.segments.slice(r.pathIndex),n.children),ma(o,0,i)}else return r.match&&i.length===0?new pe(n.segments,{}):r.match&&!n.hasChildren()?Bg(n,e,t):r.match?ma(n,0,i):Bg(n,e,t)}function ma(n,e,t){if(t.length===0)return new pe(n.segments,{});{let r=cL(t),i={};if(Object.keys(r).some(o=>o!==X)&&n.children[X]&&n.numberOfChildren===1&&n.children[X].segments.length===0){let o=ma(n.children[X],e,t);return new pe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Pb(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new pe(n.segments,i)}}function uL(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(va(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!fb(u,l,s))return o;r+=2}else{if(!fb(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Bg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(va(o)){let u=lL(o.outlets);return new pe(r,u)}if(i===0&&Tl(t[0])){let u=n.segments[e];r.push(new hr(u.path,hb(t[0]))),i++;continue}let s=va(o)?o.outlets[X]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Tl(a)?(r.push(new hr(s,hb(a))),i+=2):(r.push(new hr(s,{})),i++)}return new pe(r,{})}function lL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Bg(new pe([],{}),0,r))}),e}function hb(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function fb(n,e,t){return n==t.path&&un(e,t.parameters)}var wl="imperative",Be=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Be||{}),Tt=class{id;url;constructor(e,t){this.id=e,this.url=t}},gr=class extends Tt{type=Be.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},xt=class extends Tt{urlAfterRedirects;type=Be.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_t=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(_t||{}),Co=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Co||{}),ln=class extends Tt{reason;code;type=Be.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},hn=class extends Tt{reason;code;type=Be.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},So=class extends Tt{error;target;type=Be.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_a=class extends Tt{urlAfterRedirects;state;type=Be.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bl=class extends Tt{urlAfterRedirects;state;type=Be.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cl=class extends Tt{urlAfterRedirects;state;shouldActivate;type=Be.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Sl=class extends Tt{urlAfterRedirects;state;type=Be.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Al=class extends Tt{urlAfterRedirects;state;type=Be.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rl=class{route;type=Be.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Nl=class{route;type=Be.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ml=class{snapshot;type=Be.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pl=class{snapshot;type=Be.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xl=class{snapshot;type=Be.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kl=class{snapshot;type=Be.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ao=class{routerEvent;position;anchor;type=Be.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ia=class{},Ro=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function dL(n,e){return n.providers&&!n._injector&&(n._injector=Xs(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Wt(n){return n.outlet||X}function hL(n,e){let t=n.filter(r=>Wt(r)===e);return t.push(...n.filter(r=>Wt(r)!==e)),t}function Sa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ol=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Sa(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new li(this.rootInjector)}},li=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ol(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)($(et))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ll=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=$g(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=$g(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Hg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Hg(e,this._root).map(t=>t.value)}};function $g(n,e){if(n===e.value)return e;for(let t of e.children){let r=$g(n,t);if(r)return r}return null}function Hg(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Hg(n,t);if(r.length)return r.unshift(e),r}return[]}var wt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function To(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ea=class extends Ll{snapshot;constructor(e,t){super(e),this.snapshot=t,Jg(this,e)}toString(){return this.snapshot.toString()}};function xb(n){let e=fL(n),t=new je([new hr("",{})]),r=new je({}),i=new je({}),o=new je({}),s=new je(""),a=new fn(t,r,o,s,i,X,n,e.root);return a.snapshot=e.root,new Ea(new wt(a,[]),e)}function fL(n){let e={},t={},r={},i="",o=new ai([],e,r,i,t,X,n,null,{});return new wa("",new wt(o,[]))}var fn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(te(l=>l[Ca]))??q(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(e=>ci(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(e=>ci(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Fl(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:x(x({},e.params),n.params),data:x(x({},e.data),n.data),resolve:x(x(x(x({},n.data),e.data),i?.data),n._resolvedData)}:r={params:x({},n.params),data:x({},n.data),resolve:x(x({},n.data),n._resolvedData??{})},i&&Ob(i)&&(r.resolve[Ca]=i.title),r}var ai=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ca]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ci(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ci(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},wa=class extends Ll{url;constructor(e,t){super(t),this.url=e,Jg(this,t)}toString(){return kb(this._root)}};function Jg(n,e){e.value._routerState=n,e.children.forEach(t=>Jg(n,t))}function kb(n){let e=n.children.length>0?` { ${n.children.map(kb).join(", ")} } `:"";return`${n.value}${e}`}function Og(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,un(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),un(e.params,t.params)||n.paramsSubject.next(t.params),B1(e.url,t.url)||n.urlSubject.next(t.url),un(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function zg(n,e){let t=un(n.params,e.params)&&q1(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||zg(n.parent,e.parent))}function Ob(n){return typeof n.title=="string"||n.title===null}var Lb=new B(""),Zg=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=X;activateEvents=new ft;deactivateEvents=new ft;attachEvents=new ft;detachEvents=new ft;routerOutletData=cT(void 0);parentContexts=k(li);location=k(vo);changeDetector=k(ta);inputBinder=k(Aa,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new qg(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ri({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ws]})}return n})(),qg=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===fn?this.route:e===li?this.childContexts:e===Lb?this.outletData:this.parent.get(e,t)}},Aa=new B(""),Xg=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ks([r.queryParams,r.params,r.data]).pipe(dt(([o,s,a],u)=>(a=x(x(x({},o),s),a),u===0?q(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=ND(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),em=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=oD({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&gg(0,"router-outlet")},dependencies:[Zg],encapsulation:2})}return n})();function tm(n){let e=n.children&&n.children.map(tm),t=e?ie(x({},n),{children:e}):x({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==X&&(t.component=em),t}function pL(n,e,t){let r=Ta(n,e._root,t?t._root:void 0);return new Ea(r,e)}function Ta(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=gL(n,e,t);return new wt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ta(n,a)),s}}let r=mL(e.value),i=e.children.map(o=>Ta(n,o));return new wt(r,i)}}function gL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ta(n,r,i);return Ta(n,r)})}function mL(n){return new fn(new je(n.url),new je(n.params),new je(n.queryParams),new je(n.fragment),new je(n.data),n.outlet,n.component,n)}var No=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Fb="ngNavigationCancelingError";function Vl(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=pr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Vb(!1,_t.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Vb(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Fb]=!0,t.cancellationCode=e,t}function yL(n){return Ub(n)&&pr(n.url)}function Ub(n){return!!n&&n[Fb]}var vL=(n,e,t,r)=>te(i=>(new Gg(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Gg=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Og(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=To(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=To(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=To(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=To(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new kl(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Pl(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Og(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Og(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ul=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},bo=class{component;route;constructor(e,t){this.component=e,this.route=t}};function _L(n,e,t){let r=n._root,i=e?e._root:null;return ga(r,i,t,[r.value])}function IL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Po(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!nw(n)?n:e.get(n):r}function ga(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=To(e);return n.children.forEach(s=>{EL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ya(a,t.getContext(s),i)),i}function EL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=wL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ul(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ga(n,e,a?a.children:null,r,i):ga(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new bo(a.outlet.component,s))}else s&&ya(e,a,i),i.canActivateChecks.push(new Ul(r)),o.component?ga(n,null,a?a.children:null,r,i):ga(n,null,t,r,i);return i}function wL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!si(n.url,e.url);case"pathParamsOrQueryParamsChange":return!si(n.url,e.url)||!un(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zg(n,e)||!un(n.queryParams,e.queryParams);case"paramsChange":default:return!zg(n,e)}}function ya(n,e,t){let r=To(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ya(s,e.children.getContext(o),t):ya(s,null,t):ya(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new bo(e.outlet.component,i)):t.canDeactivateChecks.push(new bo(null,i)):t.canDeactivateChecks.push(new bo(null,i))}function Ra(n){return typeof n=="function"}function TL(n){return typeof n=="boolean"}function DL(n){return n&&Ra(n.canLoad)}function bL(n){return n&&Ra(n.canActivate)}function CL(n){return n&&Ra(n.canActivateChild)}function SL(n){return n&&Ra(n.canDeactivate)}function AL(n){return n&&Ra(n.canMatch)}function jb(n){return n instanceof Sn||n?.name==="EmptyError"}var vl=Symbol("INITIAL_VALUE");function Mo(){return dt(n=>ks(n.map(e=>e.pipe(Rn(1),Tf(vl)))).pipe(te(e=>{for(let t of e)if(t!==!0){if(t===vl)return vl;if(t===!1||RL(t))return t}return!0}),ot(e=>e!==vl),Rn(1)))}function RL(n){return pr(n)||n instanceof No}function NL(n,e){return Ae(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?q(ie(x({},t),{guardsResult:!0})):ML(s,r,i,n).pipe(Ae(a=>a&&TL(a)?PL(r,o,n,e):q(a)),te(a=>ie(x({},t),{guardsResult:a})))})}function ML(n,e,t,r){return Ee(n).pipe(Ae(i=>FL(i.component,i.route,t,e,r)),Nn(i=>i!==!0,!0))}function PL(n,e,t,r){return Ee(e).pipe(Zt(i=>zi(kL(i.route.parent,r),xL(i.route,r),LL(n,i.path,t),OL(n,i.route,t))),Nn(i=>i!==!0,!0))}function xL(n,e){return n!==null&&e&&e(new xl(n)),q(!0)}function kL(n,e){return n!==null&&e&&e(new Ml(n)),q(!0)}function OL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return q(!0);let i=r.map(o=>au(()=>{let s=Sa(e)??t,a=Po(o,s),u=bL(a)?a.canActivate(e,n):mt(s,()=>a(e,n));return mr(u).pipe(Nn())}));return q(i).pipe(Mo())}function LL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>IL(s)).filter(s=>s!==null).map(s=>au(()=>{let a=s.guards.map(u=>{let l=Sa(s.node)??t,h=Po(u,l),p=CL(h)?h.canActivateChild(r,n):mt(l,()=>h(r,n));return mr(p).pipe(Nn())});return q(a).pipe(Mo())}));return q(o).pipe(Mo())}function FL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return q(!0);let s=o.map(a=>{let u=Sa(e)??i,l=Po(a,u),h=SL(l)?l.canDeactivate(n,e,t,r):mt(u,()=>l(n,e,t,r));return mr(h).pipe(Nn())});return q(s).pipe(Mo())}function VL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return q(!0);let o=i.map(s=>{let a=Po(s,n),u=DL(a)?a.canLoad(e,t):mt(n,()=>a(e,t));return mr(u)});return q(o).pipe(Mo(),Bb(r))}function Bb(n){return mf(Ke(e=>{if(typeof e!="boolean")throw Vl(n,e)}),te(e=>e===!0))}function UL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return q(!0);let o=i.map(s=>{let a=Po(s,n),u=AL(a)?a.canMatch(e,t):mt(n,()=>a(e,t));return mr(u)});return q(o).pipe(Mo(),Bb(r))}var Da=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},ba=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function wo(n){return $i(new Da(n))}function jL(n){return $i(new U(4e3,!1))}function BL(n){return $i(Vb(!1,_t.GuardRejected))}var Wg=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return q(r);if(i.numberOfChildren>1||!i.children[X])return jL(`${e.redirectTo}`);i=i.children[X]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:T,title:R}=i,N=mt(o,()=>a({params:y,data:T,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:R}));if(N instanceof dn)throw new ba(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new ba(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new dn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new pe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Kg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $L(n,e,t,r,i){let o=$b(n,e,t);return o.matched?(r=dL(e,r),UL(r,e,t,i).pipe(te(s=>s===!0?o:x({},Kg)))):q(o)}function $b(n,e,t){if(e.path==="**")return HL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?x({},Kg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||yb)(t,n,e);if(!i)return x({},Kg);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?x(x({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function HL(n){return{matched:!0,parameters:n.length>0?_b(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function pb(n,e,t,r){return t.length>0&&GL(n,t,r)?{segmentGroup:new pe(e,qL(r,new pe(t,n.children))),slicedSegments:[]}:t.length===0&&WL(n,t,r)?{segmentGroup:new pe(n.segments,zL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new pe(n.segments,n.children),slicedSegments:t}}function zL(n,e,t,r){let i={};for(let o of t)if(Bl(n,e,o)&&!r[Wt(o)]){let s=new pe([],{});i[Wt(o)]=s}return x(x({},r),i)}function qL(n,e){let t={};t[X]=e;for(let r of n)if(r.path===""&&Wt(r)!==X){let i=new pe([],{});t[Wt(r)]=i}return t}function GL(n,e,t){return t.some(r=>Bl(n,e,r)&&Wt(r)!==X)}function WL(n,e,t){return t.some(r=>Bl(n,e,r))}function Bl(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function KL(n,e,t){return e.length===0&&!n.children[t]}var Qg=class{};function QL(n,e,t,r,i,o,s="emptyOnly"){return new Yg(n,e,t,r,i,s,o).recognize()}var YL=31,Yg=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Wg(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=pb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(te(({children:t,rootSnapshot:r})=>{let i=new wt(r,t),o=new wa("",i),s=Ab(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ai([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,X,t).pipe(te(r=>({children:r,rootSnapshot:t})),An(r=>{if(r instanceof ba)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Da?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(te(s=>s instanceof wt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ee(o).pipe(Zt(s=>{let a=r.children[s],u=hL(t,s);return this.processSegmentGroup(e,u,a,s,i)}),wf((s,a)=>(s.push(...a),s)),ir(null),Ef(),Ae(s=>{if(s===null)return wo(r);let a=Hb(s);return JL(a),q(a)}))}processSegment(e,t,r,i,o,s,a){return Ee(t).pipe(Zt(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(An(l=>{if(l instanceof Da)return q(null);throw l}))),Nn(u=>!!u),An(u=>{if(jb(u))return KL(r,i,o)?q(new Qg):wo(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Wt(r)!==s&&(s===X||!Bl(i,o,r))?wo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):wo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=$b(t,i,o);if(!u)return wo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>YL&&(this.allowRedirects=!1));let y=new ai(o,l,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,gb(i),Wt(i),i.component??i._loadedComponent??null,i,mb(i)),T=Fl(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(T.params),y.data=Object.freeze(T.data);let R=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(Ae(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=$L(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(dt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(dt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,T=new ai(m,p,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,gb(r),Wt(r),r.component??r._loadedComponent??null,r,mb(r)),R=Fl(T,s,this.paramsInheritanceStrategy);T.params=Object.freeze(R.params),T.data=Object.freeze(R.data);let{segmentGroup:N,slicedSegments:F}=pb(t,m,y,l);if(F.length===0&&N.hasChildren())return this.processChildren(h,l,N,T).pipe(te(H=>new wt(T,H)));if(l.length===0&&F.length===0)return q(new wt(T,[]));let Z=Wt(r)===o;return this.processSegment(h,l,N,F,Z?X:o,!0,T).pipe(te(H=>new wt(T,H instanceof wt?[H]:[])))}))):wo(t)))}getChildConfig(e,t,r){return t.children?q({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?q({routes:t._loadedRoutes,injector:t._loadedInjector}):VL(e,t,r,this.urlSerializer).pipe(Ae(i=>i?this.configLoader.loadChildren(e,t).pipe(Ke(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):BL(t))):q({routes:[],injector:e})}};function JL(n){n.sort((e,t)=>e.value.outlet===X?-1:t.value.outlet===X?1:e.value.outlet.localeCompare(t.value.outlet))}function ZL(n){let e=n.value.routeConfig;return e&&e.path===""}function Hb(n){let e=[],t=new Set;for(let r of n){if(!ZL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Hb(r.children);e.push(new wt(r.value,i))}return e.filter(r=>!t.has(r))}function gb(n){return n.data||{}}function mb(n){return n.resolve||{}}function XL(n,e,t,r,i,o){return Ae(s=>QL(n,e,t,r,s.extractedUrl,i,o).pipe(te(({state:a,tree:u})=>ie(x({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function eF(n,e){return Ae(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return q(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of zb(u))s.add(l);let a=0;return Ee(s).pipe(Zt(u=>o.has(u)?tF(u,r,n,e):(u.data=Fl(u,u.parent,n).resolve,q(void 0))),Ke(()=>a++),qi(1),Ae(u=>a===s.size?q(t):ut))})}function zb(n){let e=n.children.map(t=>zb(t)).flat();return[n,...e]}function tF(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Ob(i)&&(o[Ca]=i.title),nF(o,n,e,r).pipe(te(s=>(n._resolvedData=s,n.data=Fl(n,n.parent,t).resolve,null)))}function nF(n,e,t,r){let i=Vg(n);if(i.length===0)return q({});let o={};return Ee(i).pipe(Ae(s=>rF(n[s],e,t,r).pipe(Nn(),Ke(a=>{if(a instanceof No)throw Vl(new fr,a);o[s]=a}))),qi(1),te(()=>o),An(s=>jb(s)?ut:$i(s)))}function rF(n,e,t,r){let i=Sa(e)??r,o=Po(n,i),s=o.resolve?o.resolve(e,t):mt(i,()=>o(e,t));return mr(s)}function Lg(n){return dt(e=>{let t=n(e);return t?Ee(t).pipe(te(()=>e)):q(e)})}var nm=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(t){return t.data[Ca]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>k(qb),providedIn:"root"})}return n})(),qb=(()=>{class n extends nm{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)($(ub))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),di=new B("",{providedIn:"root",factory:()=>({})}),hi=new B(""),$l=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(CD);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=mr(t.loadComponent()).pipe(te(Wb),Ke(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),zr(()=>{this.componentLoaders.delete(t)})),i=new Bi(r,()=>new He).pipe(ji());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Gb(r,this.compiler,t,this.onLoadEndListener).pipe(zr(()=>{this.childrenLoaders.delete(r)})),s=new Bi(o,()=>new He).pipe(ji());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gb(n,e,t,r){return mr(n.loadChildren()).pipe(te(Wb),Ae(i=>i instanceof hg||Array.isArray(i)?q(i):Ee(e.compileModuleAsync(i))),te(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(hi,[],{optional:!0,self:!0}).flat()),{routes:s.map(tm),injector:o}}))}function iF(n){return n&&typeof n=="object"&&"default"in n}function Wb(n){return iF(n)?n.default:n}var Hl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>k(oF),providedIn:"root"})}return n})(),oF=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rm=new B(""),im=new B("");function Kb(n,e,t){let r=n.get(im),i=n.get(Pe);return n.get(be).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),sF(n))),{onViewTransitionCreated:u}=r;return u&&mt(n,()=>u({transition:a,from:e,to:t})),s})}function sF(n){return new Promise(e=>{Jp({read:()=>setTimeout(e)},{injector:n})})}var om=new B(""),zl=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new He;transitionAbortSubject=new He;configLoader=k($l);environmentInjector=k(et);destroyRef=k(po);urlSerializer=k(ui);rootContexts=k(li);location=k(lr);inputBindingEnabled=k(Aa,{optional:!0})!==null;titleStrategy=k(nm);options=k(di,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(Hl);createViewTransition=k(rm,{optional:!0});navigationErrorHandler=k(om,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>q(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Rl(i)),r=i=>this.events.next(new Nl(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ie(x({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new je(null),this.transitions.pipe(ot(r=>r!==null),dt(r=>{let i=!1,o=!1;return q(r).pipe(dt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",_t.SupersededByNewNavigation),ut;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ie(x({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&u!=="reload"){let l="";return this.events.next(new hn(s.id,this.urlSerializer.serialize(s.rawUrl),l,Co.IgnoredSameUrlNavigation)),s.resolve(!1),ut}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return q(s).pipe(dt(l=>(this.events.next(new gr(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?ut:Promise.resolve(l))),XL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ke(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=ie(x({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let h=new _a(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:h,source:p,restoredState:m,extras:y}=s,T=new gr(l,this.urlSerializer.serialize(h),p,m);this.events.next(T);let R=xb(this.rootComponentType).snapshot;return this.currentTransition=r=ie(x({},s),{targetSnapshot:R,urlAfterRedirects:h,extras:ie(x({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,q(r)}else{let l="";return this.events.next(new hn(s.id,this.urlSerializer.serialize(s.extractedUrl),l,Co.IgnoredByUrlHandlingStrategy)),s.resolve(!1),ut}}),Ke(s=>{let a=new bl(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),te(s=>(this.currentTransition=r=ie(x({},s),{guards:_L(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),NL(this.environmentInjector,s=>this.events.next(s)),Ke(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Vl(this.urlSerializer,s.guardsResult);let a=new Cl(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),ot(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",_t.GuardRejected),!1)),Lg(s=>{if(s.guards.canActivateChecks.length!==0)return q(s).pipe(Ke(a=>{let u=new Sl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),dt(a=>{let u=!1;return q(a).pipe(eF(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",_t.NoDataFromResolver)}}))}),Ke(a=>{let u=new Al(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Lg(s=>{let a=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ke(h=>{u.component=h}),te(()=>{})));for(let h of u.children)l.push(...a(h));return l};return ks(a(s.targetSnapshot.root)).pipe(ir(null),Rn(1))}),Lg(()=>this.afterPreactivation()),dt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Ee(u).pipe(te(()=>r)):q(r)}),te(s=>{let a=pL(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ie(x({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Ke(()=>{this.events.next(new Ia)}),vL(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Rn(1),Ke({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xt(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Df(this.transitionAbortSubject.pipe(Ke(s=>{throw s}))),zr(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",_t.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),An(s=>{if(this.destroyed)return r.resolve(!1),ut;if(o=!0,Ub(s))this.events.next(new ln(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),yL(s)?this.events.next(new Ro(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new So(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=mt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof No){let{message:l,cancellationCode:h}=Vl(this.urlSerializer,u);this.events.next(new ln(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Ro(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return ut}))}))}cancelNavigationTransition(t,r,i){let o=new ln(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aF(n){return n!==wl}var Qb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>k(cF),providedIn:"root"})}return n})(),jl=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},cF=(()=>{class n extends jl{static \u0275fac=(()=>{let t;return function(i){return(t||(t=$p(n)))(i||n)}})();static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yb=(()=>{class n{urlSerializer=k(ui);options=k(di,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(lr);urlHandlingStrategy=k(Hl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new dn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof dn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=xb(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>k(uF),providedIn:"root"})}return n})(),uF=(()=>{class n extends Yb{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof gr?this.updateStateMemento():t instanceof hn?this.commitTransition(r):t instanceof _a?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ia?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ln&&(t.code===_t.GuardRejected||t.code===_t.NoDataFromResolver)?this.restoreHistory(r):t instanceof So?this.restoreHistory(r,!0):t instanceof xt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=x(x({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=x(x({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=$p(n)))(i||n)}})();static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ql(n,e){n.events.pipe(ot(t=>t instanceof xt||t instanceof ln||t instanceof So||t instanceof hn),te(t=>t instanceof xt||t instanceof hn?0:(t instanceof ln?t.code===_t.Redirect||t.code===_t.SupersededByNewNavigation:!1)?2:1),ot(t=>t!==2),Rn(1)).subscribe(()=>{e()})}var lF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},kt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(uD);stateManager=k(Yb);options=k(di,{optional:!0})||{};pendingTasks=k(ur);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(zl);urlSerializer=k(ui);location=k(lr);urlHandlingStrategy=k(Hl);_events=new He;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(Qb);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(hi,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(Aa,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Re;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ln&&r.code!==_t.Redirect&&r.code!==_t.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof xt)this.navigated=!0;else if(r instanceof Ro){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=x({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||aF(i.source)},s);this.scheduleNavigation(a,wl,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}fF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),wl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=x({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(tm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=x(x({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=Rb(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return Nb(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=pr(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,wl,null,r)}navigate(t,r={skipLocationChange:!1}){return hF(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=x({},lF):r===!1?i=x({},dF):i=r,pr(t))return lb(this.currentUrlTree,t,i);let o=this.parseUrl(t);return lb(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return ql(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hF(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new U(4008,!1)}function fF(n){return!(n instanceof Ia)&&!(n instanceof Ro)}var Jb=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new He;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof xt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(pr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:DT(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:pr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ct(kt),ct(fn),Hp("tabindex"),ct(el),ct(Ys),ct(Gt))};static \u0275dir=ri({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&mg("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&pg("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",na],skipLocationChange:[2,"skipLocationChange","skipLocationChange",na],replaceUrl:[2,"replaceUrl","replaceUrl",na],routerLink:"routerLink"},features:[Ws]})}return n})();var Na=class{};var Zb=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ot(t=>t instanceof xt),Zt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Xs(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ee(i).pipe(Hi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=q(null);let o=i.pipe(Ae(s=>s===null?q(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ee([o,s]).pipe(Hi())}else return o})}static \u0275fac=function(r){return new(r||n)($(kt),$(et),$(Na),$($l))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xb=new B(""),pF=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof gr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof hn&&t.code===Co.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ao&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ao(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){XT()};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();function gF(n,...e){return uo([{provide:hi,multi:!0,useValue:n},[],{provide:fn,useFactory:eC,deps:[kt]},{provide:tl,multi:!0,useFactory:tC},e.map(t=>t.\u0275providers)])}function eC(n){return n.routerState.root}function Ma(n,e){return{\u0275kind:n,\u0275providers:e}}function tC(){let n=k(Ht);return e=>{let t=n.get(Xr);if(e!==t.components[0])return;let r=n.get(kt),i=n.get(nC);n.get(am)===1&&r.initialNavigation(),n.get(oC,null,ee.Optional)?.setUpPreloading(),n.get(Xb,null,ee.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var nC=new B("",{factory:()=>new He}),am=new B("",{providedIn:"root",factory:()=>1});function rC(){let n=[{provide:am,useValue:0},fg(()=>{let e=k(Ht);return e.get(Ig,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(kt),o=e.get(nC);ql(i,()=>{r(!0)}),e.get(zl).afterPreactivation=()=>(r(!0),o.closed?q(void 0):o),i.initialNavigation()}))})];return Ma(2,n)}function iC(){let n=[fg(()=>{k(kt).setUpLocationChangeListener()}),{provide:am,useValue:2}];return Ma(3,n)}var oC=new B("");function sC(n){return Ma(0,[{provide:oC,useExisting:Zb},{provide:Na,useExisting:n}])}function aC(){return Ma(8,[Xg,{provide:Aa,useExisting:Xg}])}function cC(n){yo("NgRouterViewTransitions");let e=[{provide:rm,useValue:Kb},{provide:im,useValue:x({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ma(9,e)}var uC=[lr,{provide:ui,useClass:fr},kt,li,{provide:fn,useFactory:eC,deps:[kt]},$l,[]],mF=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[uC,[],{provide:hi,multi:!0,useValue:t},[],r?.errorHandler?{provide:om,useValue:r.errorHandler}:[],{provide:di,useValue:r||{}},r?.useHash?vF():_F(),yF(),r?.preloadingStrategy?sC(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?IF(r):[],r?.bindToComponentInputs?aC().\u0275providers:[],r?.enableViewTransitions?cC().\u0275providers:[],EF()]}}static forChild(t){return{ngModule:n,providers:[{provide:hi,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ni({type:n});static \u0275inj=ti({})}return n})();function yF(){return{provide:Xb,useFactory:()=>{let n=k(jD),e=k(be),t=k(di),r=k(zl),i=k(ui);return t.scrollOffset&&n.setOffset(t.scrollOffset),new pF(i,r,n,e,t)}}}function vF(){return{provide:Gt,useClass:Eg}}function _F(){return{provide:Gt,useClass:il}}function IF(n){return[n.initialNavigation==="disabled"?iC().\u0275providers:[],n.initialNavigation==="enabledBlocking"?rC().\u0275providers:[]]}var sm=new B("");function EF(){return[{provide:sm,useFactory:tC},{provide:tl,multi:!0,useExisting:sm}]}var lC=()=>{};var fC=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},TF=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},pC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):TF(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new um;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},um=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},DF=function(n){let e=fC(n);return pC.encodeByteArray(e,!0)},xa=function(n){return DF(n).replace(/\./g,"")},Wl=function(n){try{return pC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function gC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var bF=()=>gC().__FIREBASE_DEFAULTS__,CF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},SF=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Wl(n[1]);return e&&JSON.parse(e)},Kl=()=>{try{return lC()||bF()||CF()||SF()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dm=n=>Kl()?.emulatorHosts?.[n],mC=n=>{let e=dm(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},hm=()=>Kl()?.config,fm=n=>Kl()?.[`_${n}`];var Gl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function yr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Ql(n){return _(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function yC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=x({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xa(JSON.stringify(t)),xa(JSON.stringify(s)),""].join(".")}var Pa={};function AF(){let n={prod:[],emulator:[]};for(let e of Object.keys(Pa))Pa[e]?n.emulator.push(e):n.prod.push(e);return n}function RF(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var dC=!1;function Yl(n,e){if(typeof window>"u"||typeof document>"u"||!yr(window.location.host)||Pa[n]===e||Pa[n]||dC)return;Pa[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=AF().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{dC=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=RF(r),y=t("text"),T=document.getElementById(y)||document.createElement("span"),R=t("learnmore"),N=document.getElementById(R)||document.createElement("a"),F=t("preprendIcon"),Z=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let H=m.element;a(H),h(N,R);let Se=l();u(Z,F),H.append(Z,T,N,Se),document.body.appendChild(H)}o?(T.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function NF(){let n=Kl()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _C(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IC(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function EC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wC(){let n=ze();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function TC(){return!NF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pm(){try{return typeof indexedDB=="object"}catch{return!1}}function DC(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var MF="FirebaseError",Dt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=MF,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Un.prototype.create)}},Un=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?PF(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Dt(i,a,r)}};function PF(n,e){return n.replace(xF,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var xF=/\{\$([^}]+)}/g;function bC(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function pn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(hC(o)&&hC(s)){if(!pn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function hC(n){return n!==null&&typeof n=="object"}function ka(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xo(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ko(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function CC(n,e){let t=new lm(n,e);return t.subscribe.bind(t)}var lm=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");kF(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=cm),i.error===void 0&&(i.error=cm),i.complete===void 0&&(i.complete=cm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function kF(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function cm(){}var o5=4*60*60*1e3;function xe(n){return n&&n._delegate?n._delegate:n}var Ot=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var fi="[DEFAULT]";var gm=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Gl;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LF(e))try{this.getOrInitializeService({instanceIdentifier:fi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=fi){return this.instances.has(e)}getOptions(e=fi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OF(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fi){return this.component?this.component.multipleInstances?e:fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function OF(n){return n===fi?void 0:n}function LF(n){return n.instantiationMode==="EAGER"}var Jl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new gm(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var FF=[],re=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(re||{}),VF={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},UF=re.INFO,jF={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},BF=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=jF[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},vr=class{constructor(e){this.name=e,this._logLevel=UF,this._logHandler=BF,this._userLogHandler=null,FF.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}};var $F=(n,e)=>e.some(t=>n instanceof t),SC,AC;function HF(){return SC||(SC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zF(){return AC||(AC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var RC=new WeakMap,ym=new WeakMap,NC=new WeakMap,mm=new WeakMap,_m=new WeakMap;function qF(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(gn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&RC.set(t,n)}).catch(()=>{}),_m.set(e,n),e}function GF(n){if(ym.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});ym.set(n,e)}var vm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ym.get(n);if(e==="objectStoreNames")return n.objectStoreNames||NC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function MC(n){vm=n(vm)}function WF(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Zl(this),e,...t);return NC.set(r,e.sort?e.sort():[e]),gn(r)}:zF().includes(n)?function(...e){return n.apply(Zl(this),e),gn(RC.get(this))}:function(...e){return gn(n.apply(Zl(this),e))}}function KF(n){return typeof n=="function"?WF(n):(n instanceof IDBTransaction&&GF(n),$F(n,HF())?new Proxy(n,vm):n)}function gn(n){if(n instanceof IDBRequest)return qF(n);if(mm.has(n))return mm.get(n);let e=KF(n);return e!==n&&(mm.set(n,e),_m.set(e,n)),e}var Zl=n=>_m.get(n);function xC(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=gn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(gn(s.result),u.oldVersion,u.newVersion,gn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var QF=["get","getKey","getAll","getAllKeys","count"],YF=["put","add","delete","clear"],Im=new Map;function PC(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Im.get(e))return Im.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=YF.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||QF.includes(t)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return Im.set(e,o),o}MC(n=>ie(x({},n),{get:(e,t,r)=>PC(e,t)||n.get(e,t,r),has:(e,t)=>!!PC(e,t)||n.has(e,t)}));var wm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(JF(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function JF(n){return n.getComponent()?.type==="VERSION"}var Tm="@firebase/app",kC="0.14.2";var jn=new vr("@firebase/app"),ZF="@firebase/app-compat",XF="@firebase/analytics-compat",eV="@firebase/analytics",tV="@firebase/app-check-compat",nV="@firebase/app-check",rV="@firebase/auth",iV="@firebase/auth-compat",oV="@firebase/database",sV="@firebase/data-connect",aV="@firebase/database-compat",cV="@firebase/functions",uV="@firebase/functions-compat",lV="@firebase/installations",dV="@firebase/installations-compat",hV="@firebase/messaging",fV="@firebase/messaging-compat",pV="@firebase/performance",gV="@firebase/performance-compat",mV="@firebase/remote-config",yV="@firebase/remote-config-compat",vV="@firebase/storage",_V="@firebase/storage-compat",IV="@firebase/firestore",EV="@firebase/ai",wV="@firebase/firestore-compat",TV="firebase",DV="12.2.0";var Dm="[DEFAULT]",bV={[Tm]:"fire-core",[ZF]:"fire-core-compat",[eV]:"fire-analytics",[XF]:"fire-analytics-compat",[nV]:"fire-app-check",[tV]:"fire-app-check-compat",[rV]:"fire-auth",[iV]:"fire-auth-compat",[oV]:"fire-rtdb",[sV]:"fire-data-connect",[aV]:"fire-rtdb-compat",[cV]:"fire-fn",[uV]:"fire-fn-compat",[lV]:"fire-iid",[dV]:"fire-iid-compat",[hV]:"fire-fcm",[fV]:"fire-fcm-compat",[pV]:"fire-perf",[gV]:"fire-perf-compat",[mV]:"fire-rc",[yV]:"fire-rc-compat",[vV]:"fire-gcs",[_V]:"fire-gcs-compat",[IV]:"fire-fst",[wV]:"fire-fst-compat",[EV]:"fire-vertex","fire-js":"fire-js",[TV]:"fire-js-all"};var Xl=new Map,CV=new Map,bm=new Map;function OC(n,e){try{n.container.addComponent(e)}catch(t){jn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ir(n){let e=n.name;if(bm.has(e))return jn.debug(`There were multiple attempts to register component ${e}.`),!1;bm.set(e,n);for(let t of Xl.values())OC(t,n);for(let t of CV.values())OC(t,n);return!0}function La(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bt(n){return n==null?!1:n.settings!==void 0}var SV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new Un("app","Firebase",SV);var Cm=class{constructor(e,t,r){this._isDeleted=!1,this._options=x({},e),this._config=x({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ot("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}};var Er=DV;function Rm(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=x({name:Dm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw _r.create("bad-app-name",{appName:String(i)});if(t||(t=hm()),!t)throw _r.create("no-options");let o=Xl.get(i);if(o){if(pn(t,o.options)&&pn(r,o.config))return o;throw _r.create("duplicate-app",{appName:i})}let s=new Jl(i);for(let u of bm.values())s.addComponent(u);let a=new Cm(t,r,s);return Xl.set(i,a),a}function ed(n=Dm){let e=Xl.get(n);if(!e&&n===Dm&&hm())return Rm();if(!e)throw _r.create("no-app",{appName:n});return e}function Kt(n,e,t){let r=bV[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jn.warn(s.join(" "));return}Ir(new Ot(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var AV="firebase-heartbeat-database",RV=1,Oa="firebase-heartbeat-store",Em=null;function UC(){return Em||(Em=xC(AV,RV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Oa)}catch(t){console.warn(t)}}}}).catch(n=>{throw _r.create("idb-open",{originalErrorMessage:n.message})})),Em}function NV(n){return _(this,null,function*(){try{let t=(yield UC()).transaction(Oa),r=yield t.objectStore(Oa).get(jC(n));return yield t.done,r}catch(e){if(e instanceof Dt)jn.warn(e.message);else{let t=_r.create("idb-get",{originalErrorMessage:e?.message});jn.warn(t.message)}}})}function LC(n,e){return _(this,null,function*(){try{let r=(yield UC()).transaction(Oa,"readwrite");yield r.objectStore(Oa).put(e,jC(n)),yield r.done}catch(t){if(t instanceof Dt)jn.warn(t.message);else{let r=_r.create("idb-set",{originalErrorMessage:t?.message});jn.warn(r.message)}}})}function jC(n){return`${n.name}!${n.options.appId}`}var MV=1024,PV=30,Sm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Am(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=FC();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>PV){let i=kV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){jn.warn(e)}})}getHeartbeatsHeader(){return _(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=FC(),{heartbeatsToSend:t,unsentEntries:r}=xV(this._heartbeatsCache.heartbeats),i=xa(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return jn.warn(e),""}})}};function FC(){return new Date().toISOString().substring(0,10)}function xV(n,e=MV){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),VC(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),VC(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Am=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return pm()?DC().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield NV(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return LC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return LC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function VC(n){return xa(JSON.stringify({version:2,heartbeats:n})).length}function kV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function OV(n){Ir(new Ot("platform-logger",e=>new wm(e),"PRIVATE")),Ir(new Ot("heartbeat",e=>new Sm(e),"PRIVATE")),Kt(Tm,kC,n),Kt(Tm,kC,"esm2020"),Kt("fire-js","")}OV("");function rS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var iS=rS,oS=new Un("auth","Firebase",rS());var sd=new vr("@firebase/auth");function LV(n,...e){sd.logLevel<=re.WARN&&sd.warn(`Auth (${Er}): ${n}`,...e)}function nd(n,...e){sd.logLevel<=re.ERROR&&sd.error(`Auth (${Er}): ${n}`,...e)}function yn(n,...e){throw Xm(n,...e)}function pi(n,...e){return Xm(n,...e)}function sS(n,e,t){let r=ie(x({},iS()),{[e]:t});return new Un("auth","Firebase",r).create(e,{appName:n.name})}function Dr(n){return sS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xm(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return oS.create(n,...e)}function W(n,e,...t){if(!n)throw Xm(e,...t)}function Bn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw nd(e),new Error(e)}function br(n,e){n||Bn(e)}function xm(){return typeof self<"u"&&self.location?.href||""}function FV(){return BC()==="http:"||BC()==="https:"}function BC(){return typeof self<"u"&&self.location?.protocol||null}function VV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FV()||IC()||"connection"in navigator)?navigator.onLine:!0}function UV(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var gi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,br(t>e,"Short delay should be less than long delay!"),this.isMobile=vC()||EC()}get(){return VV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ey(n,e){br(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ad=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var jV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var BV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$V=new gi(3e4,6e4);function yi(n,e){return n.tenantId&&!e.tenantId?ie(x({},e),{tenantId:n.tenantId}):e}function Cr(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){return aS(n,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=ka(x({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=x({method:e,headers:m},l);return _C()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&yr(n.emulatorConfig.host)&&(y.credentials="include"),ad.fetch()(yield cS(n,n.config.apiHost,t,p),y)}))})}function aS(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=x(x({},jV),e);try{let i=new km(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw td(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw td(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw td(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw td(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw sS(n,h,l);yn(n,h)}}catch(i){if(i instanceof Dt)throw i;yn(n,"network-request-failed",{message:String(i)})}})}function vd(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){let l=yield Cr(n,e,t,r,i);return"mfaPendingCredential"in l&&yn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function cS(n,e,t,r){return _(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?ey(n.config,i):`${n.config.apiScheme}://${i}`;return BV.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function HV(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var km=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(pi(this.auth,"network-request-failed")),$V.get())})}};function td(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=pi(n,e,r);return i.customData._tokenResponse=t,i}function $C(n){return n!==void 0&&n.enterprise!==void 0}var Om=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return HV(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function zV(n,e){return _(this,null,function*(){return Cr(n,"GET","/v2/recaptchaConfig",yi(n,e))})}function qV(n,e){return _(this,null,function*(){return Cr(n,"POST","/v1/accounts:delete",e)})}function cd(n,e){return _(this,null,function*(){return Cr(n,"POST","/v1/accounts:lookup",e)})}function Va(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function uS(n,e=!1){return _(this,null,function*(){let t=xe(n),r=yield t.getIdToken(e),i=ty(r);W(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Va(Nm(i.auth_time)),issuedAtTime:Va(Nm(i.iat)),expirationTime:Va(Nm(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Nm(n){return Number(n)*1e3}function ty(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return nd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Wl(t);return i?JSON.parse(i):(nd("Failed to decode base64 JWT payload"),null)}catch(i){return nd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function HC(n){let e=ty(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ja(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Dt&&GV(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function GV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Lm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ba=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Va(this.lastLoginAt),this.creationTime=Va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ud(n){return _(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield ja(n,cd(e,{idToken:t}));W(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?dS(i.providerUserInfo):[],s=WV(n.providerData,o),a=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!s?.length,l=a?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ba(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,h)})}function lS(n){return _(this,null,function*(){let e=xe(n);yield ud(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function WV(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function dS(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Pc(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function KV(n,e){return _(this,null,function*(){let t=yield aS(n,{},()=>_(null,null,function*(){let r=ka({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield cS(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&yr(n.emulatorConfig.host)&&(u.credentials="include"),ad.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function QV(n,e){return _(this,null,function*(){return Cr(n,"POST","/v2/accounts:revokeToken",yi(n,e))})}var Ua=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");let t=HC(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield KV(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(W(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Bn("not implemented")}};function wr(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Tr=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=Pc(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ba(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield ja(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return uS(this,e)}reload(){return lS(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>x({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(ie(x({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ud(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(bt(this.auth.app))return Promise.reject(Dr(this.auth));let e=yield this.getIdToken();return yield ja(this,qV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return ie(x({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>x({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,u=t._redirectEventId??void 0,l=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:T,stsTokenManager:R}=t;W(p&&R,e,"internal-error");let N=Ua.fromJSON(this.name,R);W(typeof p=="string",e,"internal-error"),wr(r,e.name),wr(i,e.name),W(typeof m=="boolean",e,"internal-error"),W(typeof y=="boolean",e,"internal-error"),wr(o,e.name),wr(s,e.name),wr(a,e.name),wr(u,e.name),wr(l,e.name),wr(h,e.name);let F=new n({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:N,createdAt:l,lastLoginAt:h});return T&&Array.isArray(T)&&(F.providerData=T.map(Z=>x({},Z))),u&&(F._redirectEventId=u),F}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new Ua;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ud(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?dS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ua;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ba(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var zC=new Map;function $n(n){br(n instanceof Function,"Expected a class definition");let e=zC.get(n);return e?(br(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,zC.set(n,e),e)}var YV=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Fm=YV;function rd(n,e,t){return`firebase:${n}:${e}:${t}`}var ld=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=rd(this.userKey,i.apiKey,o),this.fullPersistenceKey=rd("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield cd(this.auth,{idToken:e}).catch(()=>{});return t?Tr._fromGetAccountInfoResponse(this.auth,t,e):null}return Tr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n($n(Fm),e,r);let i=(yield Promise.all(t.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||$n(Fm),s=rd(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield cd(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield Tr._fromGetAccountInfoResponse(e,m,h)}else p=Tr._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function qC(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yS(e))return"Blackberry";if(vS(e))return"Webos";if(fS(e))return"Safari";if((e.includes("chrome/")||pS(e))&&!e.includes("edge/"))return"Chrome";if(mS(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function hS(n=ze()){return/firefox\//i.test(n)}function fS(n=ze()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pS(n=ze()){return/crios\//i.test(n)}function gS(n=ze()){return/iemobile/i.test(n)}function mS(n=ze()){return/android/i.test(n)}function yS(n=ze()){return/blackberry/i.test(n)}function vS(n=ze()){return/webos/i.test(n)}function ny(n=ze()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function JV(n=ze()){return ny(n)&&!!window.navigator?.standalone}function ZV(){return wC()&&document.documentMode===10}function _S(n=ze()){return ny(n)||mS(n)||vS(n)||yS(n)||/windows phone/i.test(n)||gS(n)}function IS(n,e=[]){let t;switch(n){case"Browser":t=qC(ze());break;case"Worker":t=`${qC(ze())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Er}/${r}`}var Vm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function XV(t){return _(this,arguments,function*(n,e={}){return Cr(n,"GET","/v2/passwordPolicy",yi(n,e))})}var e2=6,Um=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??e2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var jm=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dd(this),this.idTokenSubscription=new dd(this),this.beforeStateQueue=new Vm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$n(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield ld.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield cd(this,{idToken:e}),r=yield Tr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){if(bt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield ud(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=UV()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(bt(this.app))return Promise.reject(Dr(this));let t=e?xe(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return bt(this.app)?Promise.reject(Dr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return bt(this.app)?Promise.reject(Dr(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence($n(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield XV(this),t=new Um(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Un("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield QV(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&$n(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=yield ld.create(this,[$n(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return _(this,null,function*(){if(bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&LV(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function Oo(n){return xe(n)}var dd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=CC(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var _d={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t2(n){_d=n}function ES(n){return _d.loadJS(n)}function n2(){return _d.recaptchaEnterpriseScript}function r2(){return _d.gapiScript}function wS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Bm=class{constructor(){this.enterprise=new $m}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},$m=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var i2="recaptcha-enterprise",TS="NO_RECAPTCHA",Hm=class{constructor(e){this.type=i2,this.auth=Oo(e)}verify(e="verify",t=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>_(null,null,function*(){zV(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Om(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;$C(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(TS)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Bm().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&$C(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=n2();u.length!==0&&(u+=a),ES(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Fa(n,e,t,r=!1,i=!1){return _(this,null,function*(){let o=new Hm(n),s;if(i)s=TS;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=x({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function GC(n,e,t,r,i){return _(this,null,function*(){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield Fa(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>_(null,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield Fa(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}));else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let o=yield Fa(n,e,t);return r(n,o).catch(s=>_(null,null,function*(){if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(s.code==="auth/missing-recaptcha-token"||s.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let a=yield Fa(n,e,t,!1,!0);return r(n,a)}return Promise.reject(s)}))}else{let o=yield Fa(n,e,t,!1,!0);return r(n,o)}else return Promise.reject(i+" provider is not supported.")})}function DS(n,e){let t=La(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(pn(o,e??{}))return i;yn(i,"already-initialized")}return t.initialize({options:e})}function o2(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map($n);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function bS(n,e,t){let r=Oo(n);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=CS(e),{host:s,port:a}=s2(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(pn(l,r.config.emulator)&&pn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,yr(s)?(Ql(`${o}//${s}${u}`),Yl("Auth",!0)):i||a2()}function CS(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function s2(n){let e=CS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:WC(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:WC(s)}}}function WC(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function a2(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var $a=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bn("not implemented")}_getIdTokenResponse(e){return Bn("not implemented")}_linkToIdToken(e,t){return Bn("not implemented")}_getReauthenticationResolver(e){return Bn("not implemented")}};function c2(n,e){return _(this,null,function*(){return Cr(n,"POST","/v1/accounts:signUp",e)})}function u2(n,e){return _(this,null,function*(){return vd(n,"POST","/v1/accounts:signInWithPassword",yi(n,e))})}function l2(n,e){return _(this,null,function*(){return vd(n,"POST","/v1/accounts:signInWithEmailLink",yi(n,e))})}function d2(n,e){return _(this,null,function*(){return vd(n,"POST","/v1/accounts:signInWithEmailLink",yi(n,e))})}var Ha=class n extends $a{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return GC(e,t,"signInWithPassword",u2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return l2(e,{email:this._email,oobCode:this._password});default:yn(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return GC(e,r,"signUpPassword",c2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return d2(e,{idToken:t,email:this._email,oobCode:this._password});default:yn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Mm(n,e){return _(this,null,function*(){return vd(n,"POST","/v1/accounts:signInWithIdp",yi(n,e))})}function h2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function f2(n){let e=xo(ko(n)).link,t=e?xo(ko(e)).deep_link_id:null,r=xo(ko(n)).deep_link_id;return(r?xo(ko(r)).link:null)||r||t||e||n}var hd=class n{constructor(e){let t=xo(ko(e)),r=t.apiKey??null,i=t.oobCode??null,o=h2(t.mode??null);W(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t=f2(e);try{return new n(t)}catch{return null}}};var SS=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Ha._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=hd.parseLink(r);return W(i,"argument-error"),Ha._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),fd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var zm=class extends fd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var za=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield Tr._fromIdTokenResponse(e,r,i),s=KC(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=KC(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function KC(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var qm=class n extends Dt{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function AS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?qm._fromErrorAndOperation(n,o,e,r):o})}function p2(n,e,t=!1){return _(this,null,function*(){let r=yield ja(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return za._forOperation(n,"link",r)})}function g2(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(bt(r.app))return Promise.reject(Dr(r));let i="reauthenticate";try{let o=yield ja(n,AS(r,i,e,n),t);W(o.idToken,r,"internal-error");let s=ty(o.idToken);W(s,r,"internal-error");let{sub:a}=s;return W(n.uid===a,r,"user-mismatch"),za._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&yn(r,"user-mismatch"),o}})}function RS(n,e,t=!1){return _(this,null,function*(){if(bt(n.app))return Promise.reject(Dr(n));let r="signIn",i=yield AS(n,r,e),o=yield za._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function NS(n,e){return _(this,null,function*(){return RS(Oo(n),e)})}function m2(n){return _(this,null,function*(){let e=Oo(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function ry(n,e,t){return bt(n.app)?Promise.reject(Dr(n)):NS(xe(n),SS.credential(e,t)).catch(r=>_(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&m2(n),r}))}function MS(n,e,t,r){return xe(n).onIdTokenChanged(e,t,r)}function PS(n,e,t){return xe(n).beforeAuthStateChanged(e,t)}function iy(n,e,t,r){return xe(n).onAuthStateChanged(e,t,r)}function oy(n){return xe(n).signOut()}var pd="__sak";var gd=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pd,"1"),this.storage.removeItem(pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var y2=1e3,v2=10,_2=(()=>{class n extends gd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_S(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);ZV()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,v2):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield nr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield nr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield nr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),xS=_2;var I2=(()=>{class n extends gd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),sy=I2;function E2(n){return Promise.all(n.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var w2=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield E2(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function kS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Gm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=kS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function mn(){return window}function T2(n){mn().location.href=n}function OS(){return typeof mn().WorkerGlobalScope<"u"&&typeof mn().importScripts=="function"}function D2(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function b2(){return navigator?.serviceWorker?.controller||null}function C2(){return OS()?self:null}var LS="firebaseLocalStorageDb",S2=1,md="firebaseLocalStorage",FS="fbase_key",mi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Id(n,e){return n.transaction([md],e?"readwrite":"readonly").objectStore(md)}function A2(){let n=indexedDB.deleteDatabase(LS);return new mi(n).toPromise()}function Wm(){let n=indexedDB.open(LS,S2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(md,{keyPath:FS})}catch(i){t(i)}}),n.addEventListener("success",()=>_(null,null,function*(){let r=n.result;r.objectStoreNames.contains(md)?e(r):(r.close(),yield A2(),e(yield Wm()))}))})}function QC(n,e,t){return _(this,null,function*(){let r=Id(n,!0).put({[FS]:e,value:t});return new mi(r).toPromise()})}function R2(n,e){return _(this,null,function*(){let t=Id(n,!1).get(e),r=yield new mi(t).toPromise();return r===void 0?null:r.value})}function YC(n,e){let t=Id(n,!0).delete(e);return new mi(t).toPromise()}var N2=800,M2=3,P2=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Wm(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>M2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return OS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=w2._getInstance(C2()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){if(this.activeServiceWorker=yield D2(),!this.activeServiceWorker)return;this.sender=new Gm(this.activeServiceWorker);let t=yield this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||b2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Wm();return yield QC(t,pd,"1"),yield YC(t,pd),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>QC(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>R2(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>YC(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let s=Id(o,!1).getAll();return new mi(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),N2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),VS=P2;var P5=wS("rcb"),x5=new gi(3e4,6e4);function x2(n,e){return e?$n(e):(W(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var qa=class extends $a{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mm(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function k2(n){return RS(n.auth,new qa(n),n.bypassAuthState)}function O2(n){let{auth:e,user:t}=n;return W(t,e,"internal-error"),g2(t,new qa(n),n.bypassAuthState)}function L2(n){return _(this,null,function*(){let{auth:e,user:t}=n;return W(t,e,"internal-error"),p2(t,new qa(n),n.bypassAuthState)})}var Km=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return k2;case"linkViaPopup":case"linkViaRedirect":return L2;case"reauthViaPopup":case"reauthViaRedirect":return O2;default:yn(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var k5=new gi(2e3,1e4);var F2="pendingRedirect",id=new Map,Qm=class n extends Km{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=id.get(this.auth._key());if(!e){try{let r=(yield V2(this.resolver,this.auth))?yield nr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}id.set(this.auth._key(),e)}return this.bypassAuthState||id.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return nr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,nr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function V2(n,e){return _(this,null,function*(){let t=B2(e),r=j2(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function U2(n,e){id.set(n._key(),e)}function j2(n){return $n(n._redirectPersistence)}function B2(n){return rd(F2,n.config.apiKey,n.name)}function $2(n,e,t=!1){return _(this,null,function*(){if(bt(n.app))return Promise.reject(Dr(n));let r=Oo(n),i=x2(r,e),s=yield new Qm(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var H2=10*60*1e3,Ym=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!z2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!US(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(pi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H2&&this.cachedEventUids.clear(),this.cachedEventUids.has(JC(e))}saveEventToCache(e){this.cachedEventUids.add(JC(e)),this.lastProcessedEventTime=Date.now()}};function JC(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function US({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function z2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return US(n);default:return!1}}function q2(t){return _(this,arguments,function*(n,e={}){return Cr(n,"GET","/v1/projects",e)})}var G2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W2=/^https?/;function K2(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield q2(n);for(let t of e)try{if(Q2(t))return}catch{}yn(n,"unauthorized-domain")})}function Q2(n){let e=xm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!W2.test(t))return!1;if(G2.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Y2=new gi(3e4,6e4);function ZC(){let n=mn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function J2(n){return new Promise((e,t)=>{function r(){ZC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZC(),t(pi(n,"network-request-failed"))},timeout:Y2.get()})}if(mn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(mn().gapi?.load)r();else{let i=wS("iframefcb");return mn()[i]=()=>{gapi.load?r():t(pi(n,"network-request-failed"))},ES(`${r2()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw od=null,e})}var od=null;function Z2(n){return od=od||J2(n),od}var X2=new gi(5e3,15e3),eU="__/auth/iframe",tU="emulator/auth/iframe",nU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iU(n){let e=n.config;W(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?ey(e,tU):`https://${n.config.authDomain}/${eU}`,r={apiKey:e.apiKey,appName:n.name,v:Er},i=rU.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ka(r).slice(1)}`}function oU(n){return _(this,null,function*(){let e=yield Z2(n),t=mn().gapi;return W(t,n,"internal-error"),e.open({where:document.body,url:iU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nU,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=pi(n,"network-request-failed"),a=mn().setTimeout(()=>{o(s)},X2.get());function u(){mn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var sU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aU=500,cU=600,uU="_blank",lU="http://localhost",yd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function dU(n,e,t,r=aU,i=cU){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=ie(x({},sU),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ze().toLowerCase();t&&(a=pS(l)?uU:t),hS(l)&&(e=e||lU,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,T])=>`${m}${y}=${T},`,"");if(JV(l)&&a!=="_self")return hU(e||"",a),new yd(null);let p=window.open(e||"",a,h);W(p,n,"popup-blocked");try{p.focus()}catch{}return new yd(p)}function hU(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var fU="__/auth/handler",pU="emulator/auth/handler",gU=encodeURIComponent("fac");function XC(n,e,t,r,i,o){return _(this,null,function*(){W(n.config.authDomain,n,"auth-domain-config-required"),W(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Er,eventId:i};if(e instanceof fd){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",bC(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof zm){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${gU}=${encodeURIComponent(u)}`:"";return`${mU(n)}?${ka(a).slice(1)}${l}`})}function mU({config:n}){return n.emulator?ey(n,pU):`https://${n.authDomain}/${fU}`}var Pm="webStorageSupport",Jm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sy,this._completeRedirectFn=$2,this._overrideRedirectResult=U2}_openPopup(e,t,r,i){return _(this,null,function*(){br(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=yield XC(e,t,r,xm(),i);return dU(e,o,kS())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield XC(e,t,r,xm(),i);return T2(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(br(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield oU(e),r=new Ym(e);return t.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pm,{type:Pm},i=>{let o=i?.[0]?.[Pm];o!==void 0&&t(!!o),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=K2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _S()||fS()||ny()}},jS=Jm;var eS="@firebase/auth",tS="1.11.0";var Zm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function yU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vU(n){Ir(new Ot("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;W(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IS(n)},l=new jm(r,i,o,u);return o2(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ir(new Ot("auth-internal",e=>{let t=Oo(e.getProvider("auth").getImmediate());return(r=>new Zm(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kt(eS,tS,yU(n)),Kt(eS,tS,"esm2020")}var _U=5*60,IU=fm("authIdTokenMaxAge")||_U,nS=null,EU=n=>e=>_(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>IU)return;let i=t?.token;nS!==i&&(nS=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function ay(n=ed()){let e=La(n,"auth");if(e.isInitialized())return e.getImmediate();let t=DS(n,{popupRedirectResolver:jS,persistence:[VS,xS,sy]}),r=fm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=EU(o.toString());PS(t,s,()=>s(t.currentUser)),MS(t,a=>s(a))}}let i=dm("auth");return i&&bS(t,`http://${i}`),t}function wU(){return document.getElementsByTagName("head")?.[0]??document}t2({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=pi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",wU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vU("Browser");var TU="firebase",DU="12.2.1";Kt(TU,DU,"app");var BS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$S={};var Hn,cy;(function(){var n;function e(C,v){function E(){}E.prototype=v.prototype,C.D=v.prototype,C.prototype=new E,C.prototype.constructor=C,C.C=function(w,D,S){for(var I=Array(arguments.length-2),Tn=2;Tn<arguments.length;Tn++)I[Tn-2]=arguments[Tn];return v.prototype[D].apply(w,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,E){E||(E=0);var w=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)w[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)w[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=C.g[0],E=C.g[1],D=C.g[2];var S=C.g[3],I=v+(S^E&(D^S))+w[0]+3614090360&4294967295;v=E+(I<<7&4294967295|I>>>25),I=S+(D^v&(E^D))+w[1]+3905402710&4294967295,S=v+(I<<12&4294967295|I>>>20),I=D+(E^S&(v^E))+w[2]+606105819&4294967295,D=S+(I<<17&4294967295|I>>>15),I=E+(v^D&(S^v))+w[3]+3250441966&4294967295,E=D+(I<<22&4294967295|I>>>10),I=v+(S^E&(D^S))+w[4]+4118548399&4294967295,v=E+(I<<7&4294967295|I>>>25),I=S+(D^v&(E^D))+w[5]+1200080426&4294967295,S=v+(I<<12&4294967295|I>>>20),I=D+(E^S&(v^E))+w[6]+2821735955&4294967295,D=S+(I<<17&4294967295|I>>>15),I=E+(v^D&(S^v))+w[7]+4249261313&4294967295,E=D+(I<<22&4294967295|I>>>10),I=v+(S^E&(D^S))+w[8]+1770035416&4294967295,v=E+(I<<7&4294967295|I>>>25),I=S+(D^v&(E^D))+w[9]+2336552879&4294967295,S=v+(I<<12&4294967295|I>>>20),I=D+(E^S&(v^E))+w[10]+4294925233&4294967295,D=S+(I<<17&4294967295|I>>>15),I=E+(v^D&(S^v))+w[11]+2304563134&4294967295,E=D+(I<<22&4294967295|I>>>10),I=v+(S^E&(D^S))+w[12]+1804603682&4294967295,v=E+(I<<7&4294967295|I>>>25),I=S+(D^v&(E^D))+w[13]+4254626195&4294967295,S=v+(I<<12&4294967295|I>>>20),I=D+(E^S&(v^E))+w[14]+2792965006&4294967295,D=S+(I<<17&4294967295|I>>>15),I=E+(v^D&(S^v))+w[15]+1236535329&4294967295,E=D+(I<<22&4294967295|I>>>10),I=v+(D^S&(E^D))+w[1]+4129170786&4294967295,v=E+(I<<5&4294967295|I>>>27),I=S+(E^D&(v^E))+w[6]+3225465664&4294967295,S=v+(I<<9&4294967295|I>>>23),I=D+(v^E&(S^v))+w[11]+643717713&4294967295,D=S+(I<<14&4294967295|I>>>18),I=E+(S^v&(D^S))+w[0]+3921069994&4294967295,E=D+(I<<20&4294967295|I>>>12),I=v+(D^S&(E^D))+w[5]+3593408605&4294967295,v=E+(I<<5&4294967295|I>>>27),I=S+(E^D&(v^E))+w[10]+38016083&4294967295,S=v+(I<<9&4294967295|I>>>23),I=D+(v^E&(S^v))+w[15]+3634488961&4294967295,D=S+(I<<14&4294967295|I>>>18),I=E+(S^v&(D^S))+w[4]+3889429448&4294967295,E=D+(I<<20&4294967295|I>>>12),I=v+(D^S&(E^D))+w[9]+568446438&4294967295,v=E+(I<<5&4294967295|I>>>27),I=S+(E^D&(v^E))+w[14]+3275163606&4294967295,S=v+(I<<9&4294967295|I>>>23),I=D+(v^E&(S^v))+w[3]+4107603335&4294967295,D=S+(I<<14&4294967295|I>>>18),I=E+(S^v&(D^S))+w[8]+1163531501&4294967295,E=D+(I<<20&4294967295|I>>>12),I=v+(D^S&(E^D))+w[13]+2850285829&4294967295,v=E+(I<<5&4294967295|I>>>27),I=S+(E^D&(v^E))+w[2]+4243563512&4294967295,S=v+(I<<9&4294967295|I>>>23),I=D+(v^E&(S^v))+w[7]+1735328473&4294967295,D=S+(I<<14&4294967295|I>>>18),I=E+(S^v&(D^S))+w[12]+2368359562&4294967295,E=D+(I<<20&4294967295|I>>>12),I=v+(E^D^S)+w[5]+4294588738&4294967295,v=E+(I<<4&4294967295|I>>>28),I=S+(v^E^D)+w[8]+2272392833&4294967295,S=v+(I<<11&4294967295|I>>>21),I=D+(S^v^E)+w[11]+1839030562&4294967295,D=S+(I<<16&4294967295|I>>>16),I=E+(D^S^v)+w[14]+4259657740&4294967295,E=D+(I<<23&4294967295|I>>>9),I=v+(E^D^S)+w[1]+2763975236&4294967295,v=E+(I<<4&4294967295|I>>>28),I=S+(v^E^D)+w[4]+1272893353&4294967295,S=v+(I<<11&4294967295|I>>>21),I=D+(S^v^E)+w[7]+4139469664&4294967295,D=S+(I<<16&4294967295|I>>>16),I=E+(D^S^v)+w[10]+3200236656&4294967295,E=D+(I<<23&4294967295|I>>>9),I=v+(E^D^S)+w[13]+681279174&4294967295,v=E+(I<<4&4294967295|I>>>28),I=S+(v^E^D)+w[0]+3936430074&4294967295,S=v+(I<<11&4294967295|I>>>21),I=D+(S^v^E)+w[3]+3572445317&4294967295,D=S+(I<<16&4294967295|I>>>16),I=E+(D^S^v)+w[6]+76029189&4294967295,E=D+(I<<23&4294967295|I>>>9),I=v+(E^D^S)+w[9]+3654602809&4294967295,v=E+(I<<4&4294967295|I>>>28),I=S+(v^E^D)+w[12]+3873151461&4294967295,S=v+(I<<11&4294967295|I>>>21),I=D+(S^v^E)+w[15]+530742520&4294967295,D=S+(I<<16&4294967295|I>>>16),I=E+(D^S^v)+w[2]+3299628645&4294967295,E=D+(I<<23&4294967295|I>>>9),I=v+(D^(E|~S))+w[0]+4096336452&4294967295,v=E+(I<<6&4294967295|I>>>26),I=S+(E^(v|~D))+w[7]+1126891415&4294967295,S=v+(I<<10&4294967295|I>>>22),I=D+(v^(S|~E))+w[14]+2878612391&4294967295,D=S+(I<<15&4294967295|I>>>17),I=E+(S^(D|~v))+w[5]+4237533241&4294967295,E=D+(I<<21&4294967295|I>>>11),I=v+(D^(E|~S))+w[12]+1700485571&4294967295,v=E+(I<<6&4294967295|I>>>26),I=S+(E^(v|~D))+w[3]+2399980690&4294967295,S=v+(I<<10&4294967295|I>>>22),I=D+(v^(S|~E))+w[10]+4293915773&4294967295,D=S+(I<<15&4294967295|I>>>17),I=E+(S^(D|~v))+w[1]+2240044497&4294967295,E=D+(I<<21&4294967295|I>>>11),I=v+(D^(E|~S))+w[8]+1873313359&4294967295,v=E+(I<<6&4294967295|I>>>26),I=S+(E^(v|~D))+w[15]+4264355552&4294967295,S=v+(I<<10&4294967295|I>>>22),I=D+(v^(S|~E))+w[6]+2734768916&4294967295,D=S+(I<<15&4294967295|I>>>17),I=E+(S^(D|~v))+w[13]+1309151649&4294967295,E=D+(I<<21&4294967295|I>>>11),I=v+(D^(E|~S))+w[4]+4149444226&4294967295,v=E+(I<<6&4294967295|I>>>26),I=S+(E^(v|~D))+w[11]+3174756917&4294967295,S=v+(I<<10&4294967295|I>>>22),I=D+(v^(S|~E))+w[2]+718787259&4294967295,D=S+(I<<15&4294967295|I>>>17),I=E+(S^(D|~v))+w[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+S&4294967295}r.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var E=v-this.blockSize,w=this.B,D=this.h,S=0;S<v;){if(D==0)for(;S<=E;)i(this,C,S),S+=this.blockSize;if(typeof C=="string"){for(;S<v;)if(w[D++]=C.charCodeAt(S++),D==this.blockSize){i(this,w),D=0;break}}else for(;S<v;)if(w[D++]=C[S++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var E=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=E&255,E/=256;for(this.u(C),C=Array(16),v=E=0;4>v;++v)for(var w=0;32>w;w+=8)C[E++]=this.g[v]>>>w&255;return C};function o(C,v){var E=a;return Object.prototype.hasOwnProperty.call(E,C)?E[C]:E[C]=v(C)}function s(C,v){this.h=v;for(var E=[],w=!0,D=C.length-1;0<=D;D--){var S=C[D]|0;w&&S==v||(E[D]=S,w=!1)}this.g=E}var a={};function u(C){return-128<=C&&128>C?o(C,function(v){return new s([v|0],0>v?-1:0)}):new s([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return N(l(-C));for(var v=[],E=1,w=0;C>=E;w++)v[w]=C/E|0,E*=4294967296;return new s(v,0)}function h(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return N(h(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),w=p,D=0;D<C.length;D+=8){var S=Math.min(8,C.length-D),I=parseInt(C.substring(D,D+S),v);8>S?(S=l(Math.pow(v,S)),w=w.j(S).add(l(I))):(w=w.j(E),w=w.add(l(I)))}return w}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(R(this))return-N(this).m();for(var C=0,v=1,E=0;E<this.g.length;E++){var w=this.i(E);C+=(0<=w?w:4294967296+w)*v,v*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T(this))return"0";if(R(this))return"-"+N(this).toString(C);for(var v=l(Math.pow(C,6)),E=this,w="";;){var D=Se(E,v).g;E=F(E,D.j(v));var S=((0<E.g.length?E.g[0]:E.h)>>>0).toString(C);if(E=D,T(E))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function T(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function R(C){return C.h==-1}n.l=function(C){return C=F(this,C),R(C)?-1:T(C)?0:1};function N(C){for(var v=C.g.length,E=[],w=0;w<v;w++)E[w]=~C.g[w];return new s(E,~C.h).add(m)}n.abs=function(){return R(this)?N(this):this},n.add=function(C){for(var v=Math.max(this.g.length,C.g.length),E=[],w=0,D=0;D<=v;D++){var S=w+(this.i(D)&65535)+(C.i(D)&65535),I=(S>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);w=I>>>16,S&=65535,I&=65535,E[D]=I<<16|S}return new s(E,E[E.length-1]&-2147483648?-1:0)};function F(C,v){return C.add(N(v))}n.j=function(C){if(T(this)||T(C))return p;if(R(this))return R(C)?N(this).j(N(C)):N(N(this).j(C));if(R(C))return N(this.j(N(C)));if(0>this.l(y)&&0>C.l(y))return l(this.m()*C.m());for(var v=this.g.length+C.g.length,E=[],w=0;w<2*v;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<C.g.length;D++){var S=this.i(w)>>>16,I=this.i(w)&65535,Tn=C.i(D)>>>16,cs=C.i(D)&65535;E[2*w+2*D]+=I*cs,Z(E,2*w+2*D),E[2*w+2*D+1]+=S*cs,Z(E,2*w+2*D+1),E[2*w+2*D+1]+=I*Tn,Z(E,2*w+2*D+1),E[2*w+2*D+2]+=S*Tn,Z(E,2*w+2*D+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function Z(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function H(C,v){this.g=C,this.h=v}function Se(C,v){if(T(v))throw Error("division by zero");if(T(C))return new H(p,p);if(R(C))return v=Se(N(C),v),new H(N(v.g),N(v.h));if(R(v))return v=Se(C,N(v)),new H(N(v.g),v.h);if(30<C.g.length){if(R(C)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,w=v;0>=w.l(C);)E=At(E),w=At(w);var D=$e(E,1),S=$e(w,1);for(w=$e(w,2),E=$e(E,2);!T(w);){var I=S.add(w);0>=I.l(C)&&(D=D.add(E),S=I),w=$e(w,1),E=$e(E,1)}return v=F(C,D.j(v)),new H(D,v)}for(D=p;0<=C.l(v);){for(E=Math.max(1,Math.floor(C.m()/v.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(E),I=S.j(v);R(I)||0<I.l(C);)E-=w,S=l(E),I=S.j(v);T(S)&&(S=m),D=D.add(S),C=F(C,I)}return new H(D,C)}n.A=function(C){return Se(this,C).h},n.and=function(C){for(var v=Math.max(this.g.length,C.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)&C.i(w);return new s(E,this.h&C.h)},n.or=function(C){for(var v=Math.max(this.g.length,C.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)|C.i(w);return new s(E,this.h|C.h)},n.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)^C.i(w);return new s(E,this.h^C.h)};function At(C){for(var v=C.g.length+1,E=[],w=0;w<v;w++)E[w]=C.i(w)<<1|C.i(w-1)>>>31;return new s(E,C.h)}function $e(C,v){var E=v>>5;v%=32;for(var w=C.g.length-E,D=[],S=0;S<w;S++)D[S]=0<v?C.i(S+E)>>>v|C.i(S+E+1)<<32-v:C.i(S+E);return new s(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cy=$S.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Hn=$S.Integer=s}).apply(typeof BS<"u"?BS:typeof self<"u"?self:typeof window<"u"?window:{});var Ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zn={};var uy,bU,Lo,ly,Ga,wd,dy,hy,fy;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ed=="object"&&Ed];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function T(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var O=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)O[ye-2]=arguments[ye];return d.prototype[b].apply(g,O)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let O=0;O<A;O++)c[b+O]=g[O]}else c.push(g)}}class F{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Z(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Se(c){return Se[" "](c),c}Se[" "]=function(){};var At=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function $e(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function C(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<E.length;A++)f=E[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Eh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Tn{constructor(){this.h=this.g=null}add(d,f){let g=cs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var cs=new F(()=>new a0,c=>c.reset());class a0{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let us,ls=!1,Eh=new Tn,A_=()=>{let c=a.Promise.resolve(void 0);us=()=>{c.then(c0)}};var c0=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){S(f)}var d=cs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ls=!1};function Zn(){this.s=this.s,this.C=this.C}Zn.prototype.s=!1,Zn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Zn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ye(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};var u0=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function ds(c,d){if(Ye.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(At){e:{try{Se(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:l0[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ds.aa.h.call(this)}}T(ds,Ye);var l0={2:"touch",3:"pen",4:"mouse"};ds.prototype.h=function(){ds.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var hs="closure_listenable_"+(1e6*Math.random()|0),d0=0;function h0(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++d0,this.da=this.fa=!1}function pc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function gc(c){this.src=c,this.g={},this.h=0}gc.prototype.add=function(c,d,f,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var O=Th(c,d,g,b);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new h0(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function wh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(pc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Th(c,d,f,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var Dh="closure_lm_"+(1e6*Math.random()|0),bh={};function R_(c,d,f,g,b){if(g&&g.once)return M_(c,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)R_(c,d[A],f,g,b);return null}return f=Rh(f),c&&c[hs]?c.K(d,f,l(g)?!!g.capture:!!g,b):N_(c,d,f,!1,g,b)}function N_(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");var O=l(b)?!!b.capture:!!b,ye=Sh(c);if(ye||(c[Dh]=ye=new gc(c)),f=ye.add(d,f,g,O,A),f.proxy)return f;if(g=f0(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)u0||(b=O),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(x_(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function f0(){function c(f){return d.call(c.src,c.listener,f)}let d=p0;return c}function M_(c,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)M_(c,d[A],f,g,b);return null}return f=Rh(f),c&&c[hs]?c.L(d,f,l(g)?!!g.capture:!!g,b):N_(c,d,f,!0,g,b)}function P_(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)P_(c,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=Rh(f),c&&c[hs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Th(A,f,g,b),-1<f&&(pc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Sh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Th(d,f,g,b)),(f=-1<c?d[c]:null)&&Ch(f))}function Ch(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[hs])wh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(x_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Sh(d))?(wh(f,c),f.h==0&&(f.src=null,d[Dh]=null)):pc(c)}}}function x_(c){return c in bh?bh[c]:bh[c]="on"+c}function p0(c,d){if(c.da)c=!0;else{d=new ds(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Ch(c),c=f.call(g,d)}return c}function Sh(c){return c=c[Dh],c instanceof gc?c:null}var Ah="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rh(c){return typeof c=="function"?c:(c[Ah]||(c[Ah]=function(d){return c.handleEvent(d)}),c[Ah])}function Je(){Zn.call(this),this.i=new gc(this),this.M=this,this.F=null}T(Je,Zn),Je.prototype[hs]=!0,Je.prototype.removeEventListener=function(c,d,f,g){P_(this,c,d,f,g)};function rt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Ye(d,c);else if(d instanceof Ye)d.target=d.target||c;else{var b=d;d=new Ye(g,c),w(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var O=d.g=f[A];b=mc(O,g,!0,d)&&b}if(O=d.g=c,b=mc(O,g,!0,d)&&b,b=mc(O,g,!1,d)&&b,f)for(A=0;A<f.length;A++)O=d.g=f[A],b=mc(O,g,!1,d)&&b}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)pc(f[g]);delete c.g[d],c.h--}}this.F=null},Je.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Je.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function mc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var O=d[A];if(O&&!O.da&&O.capture==f){var ye=O.listener,We=O.ha||O.src;O.fa&&wh(c.i,O),b=ye.call(We,g)!==!1&&b}}return b&&!g.defaultPrevented}function k_(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function O_(c){c.g=k_(()=>{c.g=null,c.i&&(c.i=!1,O_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class g0 extends Zn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:O_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fs(c){Zn.call(this),this.h=c,this.g={}}T(fs,Zn);var L_=[];function F_(c){$e(c.g,function(d,f){this.g.hasOwnProperty(f)&&Ch(d)},c),c.g={}}fs.prototype.N=function(){fs.aa.N.call(this),F_(this)},fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nh=a.JSON.stringify,m0=a.JSON.parse,y0=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Mh(){}Mh.prototype.h=null;function V_(c){return c.h||(c.h=c.i())}function U_(){}var ps={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ph(){Ye.call(this,"d")}T(Ph,Ye);function xh(){Ye.call(this,"c")}T(xh,Ye);var Fr={},j_=null;function yc(){return j_=j_||new Je}Fr.La="serverreachability";function B_(c){Ye.call(this,Fr.La,c)}T(B_,Ye);function gs(c){let d=yc();rt(d,new B_(d))}Fr.STAT_EVENT="statevent";function $_(c,d){Ye.call(this,Fr.STAT_EVENT,c),this.stat=d}T($_,Ye);function it(c){let d=yc();rt(d,new $_(d,c))}Fr.Ma="timingevent";function H_(c,d){Ye.call(this,Fr.Ma,c),this.size=d}T(H_,Ye);function ms(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ys(){this.g=!0}ys.prototype.xa=function(){this.g=!1};function v0(c,d,f,g,b,A){c.info(function(){if(c.g)if(A)for(var O="",ye=A.split("&"),We=0;We<ye.length;We++){var fe=ye[We].split("=");if(1<fe.length){var Ze=fe[0];fe=fe[1];var Xe=Ze.split("_");O=2<=Xe.length&&Xe[1]=="type"?O+(Ze+"="+fe+"&"):O+(Ze+"=redacted&")}}else O=null;else O=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+O})}function _0(c,d,f,g,b,A,O){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+O})}function Mi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+E0(c,f)+(g?" "+g:"")})}function I0(c,d){c.info(function(){return"TIMEOUT: "+d})}ys.prototype.info=function(){};function E0(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var O=1;O<b.length;O++)b[O]=""}}}}return Nh(f)}catch{return d}}var vc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},z_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kh;function _c(){}T(_c,Mh),_c.prototype.g=function(){return new XMLHttpRequest},_c.prototype.i=function(){return{}},kh=new _c;function Xn(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new q_}function q_(){this.i=null,this.g="",this.h=!1}var G_={},Oh={};function Lh(c,d,f){c.L=1,c.v=Tc(Dn(d)),c.m=f,c.P=!0,W_(c,null)}function W_(c,d){c.F=Date.now(),Ic(c),c.A=Dn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),aI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new q_,c.g=bI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new g0(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(L_[0]=b.toString()),b=L_);for(var A=0;A<b.length;A++){var O=R_(f,b[A],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),gs(),v0(c.i,c.u,c.A,c.l,c.R,c.m)}Xn.prototype.ca=function(c){c=c.target;let d=this.M;d&&bn(c)==3?d.j():this.Y(c)},Xn.prototype.Y=function(c){try{if(c==this.g)e:{let Xe=bn(this.g);var d=this.g.Ba();let ki=this.g.Z();if(!(3>Xe)&&(Xe!=3||this.g&&(this.h.h||this.g.oa()||pI(this.g)))){this.J||Xe!=4||d==7||(d==8||0>=ki?gs(3):gs(2)),Fh(this);var f=this.g.Z();this.X=f;t:if(K_(this)){var g=pI(this.g);c="";var b=g.length,A=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vr(this),vs(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,_0(this.i,this.u,this.A,this.l,this.R,Xe,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,We=this.g;if((ye=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(ye)){var fe=ye;break t}}fe=null}if(f=fe)Mi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vh(this,f);else{this.o=!1,this.s=3,it(12),Vr(this),vs(this);break e}}if(this.P){f=!0;let Vt;for(;!this.J&&this.C<O.length;)if(Vt=w0(this,O),Vt==Oh){Xe==4&&(this.s=4,it(14),f=!1),Mi(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==G_){this.s=4,it(15),Mi(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else Mi(this.i,this.l,Vt,null),Vh(this,Vt);if(K_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||O.length!=0||this.h.h||(this.s=1,it(16),f=!1),this.o=this.o&&f,!f)Mi(this.i,this.l,O,"[Invalid Chunked Response]"),Vr(this),vs(this);else if(0<O.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),zh(Ze),Ze.M=!0,it(11))}}else Mi(this.i,this.l,O,null),Vh(this,O);Xe==4&&Vr(this),this.o&&!this.J&&(Xe==4?EI(this.j,this):(this.o=!1,Ic(this)))}else U0(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,it(12)):(this.s=0,it(13)),Vr(this),vs(this)}}}catch{}finally{}};function K_(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function w0(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Oh:(f=Number(d.substring(f,g)),isNaN(f)?G_:(g+=1,g+f>d.length?Oh:(d=d.slice(g,g+f),c.C=g+f,d)))}Xn.prototype.cancel=function(){this.J=!0,Vr(this)};function Ic(c){c.S=Date.now()+c.I,Q_(c,c.I)}function Q_(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ms(m(c.ba,c),d)}function Fh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Xn.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(I0(this.i,this.A),this.L!=2&&(gs(),it(17)),Vr(this),this.s=2,vs(this)):Q_(this,this.S-c)};function vs(c){c.j.G==0||c.J||EI(c.j,c)}function Vr(c){Fh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,F_(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Vh(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Uh(f.h,c))){if(!c.K&&Uh(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Ac(f),Cc(f);else break e;Hh(f),it(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=ms(m(f.Za,f),6e3));if(1>=Z_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else jr(f,11)}else if((c.K||f.g==c)&&Ac(f),!Z(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let fe=b[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let Ze=fe[3];Ze!=null&&(f.la=Ze,f.j.info("VER="+f.la));let Xe=fe[4];Xe!=null&&(f.Aa=Xe,f.j.info("SVER="+f.Aa));let ki=fe[5];ki!=null&&typeof ki=="number"&&0<ki&&(g=1.5*ki,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Vt=c.g;if(Vt){let Nc=Vt.g?Vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nc){var A=g.h;A.g||Nc.indexOf("spdy")==-1&&Nc.indexOf("quic")==-1&&Nc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(jh(A,A.h),A.h=null))}if(g.D){let qh=Vt.g?Vt.g.getResponseHeader("X-HTTP-Session-Id"):null;qh&&(g.ya=qh,Ie(g.I,g.D,qh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=c;if(g.qa=DI(g,g.J?g.ia:null,g.W),O.K){X_(g.h,O);var ye=O,We=g.L;We&&(ye.I=We),ye.B&&(Fh(ye),Ic(ye)),g.g=O}else _I(g);0<f.i.length&&Sc(f)}else fe[0]!="stop"&&fe[0]!="close"||jr(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?jr(f,7):$h(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}gs(4)}catch{}}var T0=class{constructor(c,d){this.g=c,this.map=d}};function Y_(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function J_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Z_(c){return c.h?1:c.g?c.g.size:0}function Uh(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function jh(c,d){c.g?c.g.add(d):c.h=d}function X_(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Y_.prototype.cancel=function(){if(this.i=eI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function eI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function D0(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function b0(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function tI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=b0(c),g=D0(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],c)}var nI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function C0(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var A=c[f].substring(0,g);b=c[f].substring(g+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Ur(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ur){this.h=c.h,Ec(this,c.j),this.o=c.o,this.g=c.g,wc(this,c.s),this.l=c.l;var d=c.i,f=new Es;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),rI(this,f),this.m=c.m}else c&&(d=String(c).match(nI))?(this.h=!1,Ec(this,d[1]||"",!0),this.o=_s(d[2]||""),this.g=_s(d[3]||"",!0),wc(this,d[4]),this.l=_s(d[5]||"",!0),rI(this,d[6]||"",!0),this.m=_s(d[7]||"")):(this.h=!1,this.i=new Es(null,this.h))}Ur.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Is(d,iI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Is(d,iI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Is(f,f.charAt(0)=="/"?R0:A0,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Is(f,M0)),c.join("")};function Dn(c){return new Ur(c)}function Ec(c,d,f){c.j=f?_s(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function wc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function rI(c,d,f){d instanceof Es?(c.i=d,P0(c.i,c.h)):(f||(d=Is(d,N0)),c.i=new Es(d,c.h))}function Ie(c,d,f){c.i.set(d,f)}function Tc(c){return Ie(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function _s(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Is(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,S0),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function S0(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var iI=/[#\/\?@]/g,A0=/[#\?:]/g,R0=/[#\?]/g,N0=/[#\?@]/g,M0=/#/g;function Es(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function er(c){c.g||(c.g=new Map,c.h=0,c.i&&C0(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Es.prototype,n.add=function(c,d){er(this),this.i=null,c=Pi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function oI(c,d){er(c),d=Pi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function sI(c,d){return er(c),d=Pi(c,d),c.g.has(d)}n.forEach=function(c,d){er(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},n.na=function(){er(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},n.V=function(c){er(this);let d=[];if(typeof c=="string")sI(this,c)&&(d=d.concat(this.g.get(Pi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return er(this),this.i=null,c=Pi(this,c),sI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function aI(c,d,f){oI(c,d),0<f.length&&(c.i=null,c.g.set(Pi(c,d),R(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var b=A;O[g]!==""&&(b+="="+encodeURIComponent(String(O[g]))),c.push(b)}}return this.i=c.join("&")};function Pi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function P0(c,d){d&&!c.j&&(er(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(oI(this,g),aI(this,b,f))},c)),c.j=d}function x0(c,d){let f=new ys;if(a.Image){let g=new Image;g.onload=y(tr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(tr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(tr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(tr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function k0(c,d){let f=new ys,g=new AbortController,b=setTimeout(()=>{g.abort(),tr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?tr(f,"TestPingServer: ok",!0,d):tr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),tr(f,"TestPingServer: error",!1,d)})}function tr(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function O0(){this.g=new y0}function L0(c,d,f){let g=f||"";try{tI(c,function(b,A){let O=b;l(b)&&(O=Nh(b)),d.push(g+A+"="+encodeURIComponent(O))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function ws(c){this.l=c.Ub||null,this.j=c.eb||!1}T(ws,Mh),ws.prototype.g=function(){return new Dc(this.l,this.j)},ws.prototype.i=function(c){return function(){return c}}({});function Dc(c,d){Je.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Dc,Je),n=Dc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ds(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ts(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ds(this)),this.g&&(this.readyState=3,Ds(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function cI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ts(this):Ds(this),this.readyState==3&&cI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ts(this))},n.Qa=function(c){this.g&&(this.response=c,Ts(this))},n.ga=function(){this.g&&Ts(this)};function Ts(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ds(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ds(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Dc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function uI(c){let d="";return $e(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Bh(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=uI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ie(c,d,f))}function De(c){Je.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(De,Je);var F0=/^https?$/i,V0=["POST","PUT"];n=De.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kh.g(),this.v=this.o?V_(this.o):V_(kh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){lI(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(V0,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,O]of f)this.g.setRequestHeader(A,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fI(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){lI(this,A)}};function lI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,dI(c),bc(c)}function dI(c){c.A||(c.A=!0,rt(c,"complete"),rt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,rt(this,"complete"),rt(this,"abort"),bc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bc(this,!0)),De.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?hI(this):this.bb())},n.bb=function(){hI(this)};function hI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||bn(c)!=4||c.Z()!=2)){if(c.u&&bn(c)==4)k_(c.Ea,0,c);else if(rt(c,"readystatechange"),bn(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var b=String(c.D).match(nI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!F0.test(b?b.toLowerCase():"")}f=g}if(f)rt(c,"complete"),rt(c,"success");else{c.m=6;try{var A=2<bn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",dI(c)}}finally{bc(c)}}}}function bc(c,d){if(c.g){fI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||rt(c,"ready");try{f.onreadystatechange=g}catch{}}}function fI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function bn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),m0(d)}};function pI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function U0(c){let d={};c=(c.g&&2<=bn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(Z(c[g]))continue;var f=D(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}C(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function gI(c){this.Aa=0,this.i=[],this.j=new ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bs("baseRetryDelayMs",5e3,c),this.cb=bs("retryDelaySeedMs",1e4,c),this.Wa=bs("forwardChannelMaxRetries",2,c),this.wa=bs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Y_(c&&c.concurrentRequestLimit),this.Da=new O0,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=gI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){it(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=DI(this,null,this.W),Sc(this)};function $h(c){if(mI(c),c.G==3){var d=c.U++,f=Dn(c.I);if(Ie(f,"SID",c.K),Ie(f,"RID",d),Ie(f,"TYPE","terminate"),Cs(c,f),d=new Xn(c,c.j,d),d.L=2,d.v=Tc(Dn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=bI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ic(d)}TI(c)}function Cc(c){c.g&&(zh(c),c.g.cancel(),c.g=null)}function mI(c){Cc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ac(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Sc(c){if(!J_(c.h)&&!c.s){c.s=!0;var d=c.Ga;us||A_(),ls||(us(),ls=!0),Eh.add(d,c),c.B=0}}function j0(c,d){return Z_(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ms(m(c.Ga,c,d),wI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Xn(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=vI(this,b,d),f=Dn(this.I),Ie(f,"RID",c),Ie(f,"CVER",22),this.D&&Ie(f,"X-HTTP-Session-Id",this.D),Cs(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(uI(A)))+"&"+d:this.m&&Bh(f,this.m,A)),jh(this.h,b),this.Ua&&Ie(f,"TYPE","init"),this.P?(Ie(f,"$req",d),Ie(f,"SID","null"),b.T=!0,Lh(b,f,null)):Lh(b,f,d),this.G=2}}else this.G==3&&(c?yI(this,c):this.i.length==0||J_(this.h)||yI(this))};function yI(c,d){var f;d?f=d.l:f=c.U++;let g=Dn(c.I);Ie(g,"SID",c.K),Ie(g,"RID",f),Ie(g,"AID",c.T),Cs(c,g),c.m&&c.o&&Bh(g,c.m,c.o),f=new Xn(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=vI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),jh(c.h,f),Lh(f,g,d)}function Cs(c,d){c.H&&$e(c.H,function(f,g){Ie(d,g,f)}),c.l&&tI({},function(f,g){Ie(d,g,f)})}function vI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let O=["count="+f];A==-1?0<f?(A=b[0].g,O.push("ofs="+A)):A=0:O.push("ofs="+A);let ye=!0;for(let We=0;We<f;We++){let fe=b[We].g,Ze=b[We].map;if(fe-=A,0>fe)A=Math.max(0,b[We].g-100),ye=!1;else try{L0(Ze,O,"req"+fe+"_")}catch{g&&g(Ze)}}if(ye){g=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function _I(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;us||A_(),ls||(us(),ls=!0),Eh.add(d,c),c.v=0}}function Hh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ms(m(c.Fa,c),wI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,II(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ms(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,it(10),Cc(this),II(this))};function zh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function II(c){c.g=new Xn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Dn(c.qa);Ie(d,"RID","rpc"),Ie(d,"SID",c.K),Ie(d,"AID",c.T),Ie(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ie(d,"TO",c.ja),Ie(d,"TYPE","xmlhttp"),Cs(c,d),c.m&&c.o&&Bh(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Tc(Dn(d)),f.m=null,f.P=!0,W_(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Cc(this),Hh(this),it(19))};function Ac(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function EI(c,d){var f=null;if(c.g==d){Ac(c),zh(c),c.g=null;var g=2}else if(Uh(c.h,d))f=d.D,X_(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=yc(),rt(g,new H_(g,f)),Sc(c)}else _I(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&j0(c,d)||g==2&&Hh(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:jr(c,5);break;case 4:jr(c,10);break;case 3:jr(c,6);break;default:jr(c,2)}}}function wI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function jr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new Ur(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ec(g,"https"),Tc(g),b?x0(g.toString(),f):k0(g.toString(),f)}else it(2);c.G=0,c.l&&c.l.sa(d),TI(c),mI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function TI(c){if(c.G=0,c.ka=[],c.l){let d=eI(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function DI(c,d,f){var g=f instanceof Ur?Dn(f):new Ur(f);if(g.g!="")d&&(g.g=d+"."+g.g),wc(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new Ur(null);g&&Ec(A,g),d&&(A.g=d),b&&wc(A,b),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ie(g,f,d),Ie(g,"VER",c.la),Cs(c,g),g}function bI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new De(new ws({eb:f})):new De(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function CI(){}n=CI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Rc(){}Rc.prototype.g=function(c,d){return new It(c,d)};function It(c,d){Je.call(this),this.g=new gI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!Z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new xi(this)}T(It,Je),It.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){$h(this.g)},It.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Nh(c),c=f);d.i.push(new T0(d.Ya++,c)),d.G==3&&Sc(d)},It.prototype.N=function(){this.g.l=null,delete this.j,$h(this.g),delete this.g,It.aa.N.call(this)};function SI(c){Ph.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}T(SI,Ph);function AI(){xh.call(this),this.status=1}T(AI,xh);function xi(c){this.g=c}T(xi,CI),xi.prototype.ua=function(){rt(this.g,"a")},xi.prototype.ta=function(c){rt(this.g,new SI(c))},xi.prototype.sa=function(c){rt(this.g,new AI)},xi.prototype.ra=function(){rt(this.g,"b")},Rc.prototype.createWebChannel=Rc.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,fy=zn.createWebChannelTransport=function(){return new Rc},hy=zn.getStatEventTarget=function(){return yc()},dy=zn.Event=Fr,wd=zn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vc.NO_ERROR=0,vc.TIMEOUT=8,vc.HTTP_ERROR=6,Ga=zn.ErrorCode=vc,z_.COMPLETE="complete",ly=zn.EventType=z_,U_.EventType=ps,ps.OPEN="a",ps.CLOSE="b",ps.ERROR="c",ps.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Lo=zn.WebChannel=U_,bU=zn.FetchXmlHttpFactory=ws,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,uy=zn.XhrIo=De}).apply(typeof Ed<"u"?Ed:typeof self<"u"?self:typeof window<"u"?window:{});var HS="@firebase/firestore",zS="4.9.1";var qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qe.UNAUTHENTICATED=new qe(null),qe.GOOGLE_CREDENTIALS=new qe("google-credentials-uid"),qe.FIRST_PARTY=new qe("first-party-uid"),qe.MOCK_USER=new qe("mock-user");var is="12.2.0";var wi=new vr("@firebase/firestore");function Fo(){return wi.logLevel}function V(n,...e){if(wi.logLevel<=re.DEBUG){let t=e.map(n_);wi.debug(`Firestore (${is}): ${n}`,...t)}}function Gn(n,...e){if(wi.logLevel<=re.ERROR){let t=e.map(n_);wi.error(`Firestore (${is}): ${n}`,...t)}}function qo(n,...e){if(wi.logLevel<=re.WARN){let t=e.map(n_);wi.warn(`Firestore (${is}): ${n}`,...t)}}function n_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function G(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,xA(n,r,t)}function xA(n,e,t){let r=`FIRESTORE (${is}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Gn(r),new Error(r)}function ge(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||xA(e,i,r)}function K(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends Dt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Qt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Rd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},_y=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qe.UNAUTHENTICATED))}shutdown(){}},Iy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Ey=class{constructor(e){this.t=e,this.currentUser=qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ge(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Qt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new Rd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new qe(e)}},wy=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=qe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Ty=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new wy(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Nd=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Dy=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ge(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Nd(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Nd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function CU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Za=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=CU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ae(n,e){return n<e?-1:n>e?1:0}function by(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return py(i)===py(o)?ae(i,o):py(i)?1:-1}return ae(n.length,e.length)}var SU=55296,AU=57343;function py(n){let e=n.charCodeAt(0);return e>=SU&&e<=AU}function Go(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var qS="__name__",Md=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&G(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&G(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ae(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):by(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hn.fromString(e.substring(4,e.length-2))}},Te=class n extends Md{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},RU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,St=class n extends Md{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return RU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qS}static keyField(){return new n([qS])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(Te.fromString(e))}static fromName(e){return new n(Te.fromString(e).popFirst(5))}static empty(){return new n(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Te.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Te(e.slice()))}};function kA(n,e,t){if(!t)throw new L(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function NU(n,e,t,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function GS(n){if(!z.isDocumentKey(n))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WS(n){if(z.isDocumentKey(n))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function OA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function dh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":G(12329,{type:typeof n})}function Wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=dh(n);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Fe(n,e){let t={typeString:n};return e&&(t.value=e),t}function lc(n,e){if(!OA(n))throw new L(M.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new L(M.INVALID_ARGUMENT,t);return!0}var KS=-62135596800,QS=1e6,Ve=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*QS);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<KS)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/QS}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lc(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-KS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:Fe("string",Ve._jsonSchemaVersion),seconds:Fe("number"),nanoseconds:Fe("number")};var J=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ve(0,0))}static max(){return new n(new Ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Xa=-1,Cy=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Cy.UNKNOWN_ID=-1;function MU(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new Ve(t+1,0):new Ve(t,r));return new Ti(i,z.empty(),e)}function PU(n){return new Ti(n.readTime,n.key,Xa)}var Ti=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(J.min(),z.empty(),Xa)}static max(){return new n(J.max(),z.empty(),Xa)}};function xU(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:ae(n.largestBatchId,e.largestBatchId))}var kU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function os(n){return _(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==kU)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function OU(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ss(n){return n.name==="IndexedDbTransactionError"}var r_=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),i_=-1;function hh(n){return n==null}function ec(n){return n===0&&1/n==-1/0}function LU(n){return typeof n=="number"&&Number.isInteger(n)&&!ec(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var LA="";function FU(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YS(e)),e=VU(n.get(t),e);return YS(e)}function VU(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case LA:t+="";break;default:t+=o}}return t}function YS(n){return n+LA+""}var UU="remoteDocuments",FA="owner";var VA="mutationQueues";var UA="mutations";var jA="documentMutations",jU="remoteDocumentsV14";var BA="remoteDocumentGlobal";var $A="targets";var HA="targetDocuments";var zA="targetGlobal",qA="collectionParents";var GA="clientMetadata";var WA="bundles";var KA="namedQueries";var BU="indexConfiguration";var $U="indexState";var HU="indexEntries";var QA="documentOverlays";var zU="globals";var qU=[VA,UA,jA,UU,$A,FA,zA,HA,GA,BA,qA,WA,KA],m7=[...qU,QA],GU=[VA,UA,jA,jU,$A,FA,zA,HA,GA,BA,qA,WA,KA,QA],WU=GU,KU=[...WU,BU,$U,HU];var y7=[...KU,zU];function JS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function YA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ce=class n{constructor(e,t){this.comparator=e,this.root=t||vn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bo(this.root,e,this.comparator,!0)}},Bo=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},vn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}};vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1;vn.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ge=class n{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pd(this.data.getIterator())}getIteratorFrom(e){return new Pd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Pd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ft=class n{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ge(St.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var xd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var nt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};nt.EMPTY_BYTE_STRING=new nt("");var QU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kn(n){if(ge(!!n,39018),typeof n=="string"){let e=0,t=QU.exec(n);if(ge(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:we(n.seconds),nanos:we(n.nanos)}}function we(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Qn(n){return typeof n=="string"?nt.fromBase64String(n):nt.fromUint8Array(n)}var JA="server_timestamp",ZA="__type__",XA="__previous_value__",eR="__local_write_time__";function o_(n){return(n?.mapValue?.fields||{})[ZA]?.stringValue===JA}function fh(n){let e=n.mapValue.fields[XA];return o_(e)?fh(e):e}function tc(n){let e=Kn(n.mapValue.fields[eR].timestampValue);return new Ve(e.seconds,e.nanos)}var Ay=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},kd="(default)",Od=class n{constructor(e,t){this.projectId=e,this.database=t||kd}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===kd}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var s_="__type__",tR="__max__",Td={mapValue:{fields:{__type__:{stringValue:tR}}}},a_="__vector__",Wo="value";function Mr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?o_(n)?4:rR(n)?9007199254740991:nR(n)?10:11:G(28295,{value:n})}function En(n,e){if(n===e)return!0;let t=Mr(n);if(t!==Mr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tc(n).isEqual(tc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Kn(i.timestampValue),a=Kn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Qn(i.bytesValue).isEqual(Qn(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return we(i.geoPointValue.latitude)===we(o.geoPointValue.latitude)&&we(i.geoPointValue.longitude)===we(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return we(i.integerValue)===we(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=we(i.doubleValue),a=we(o.doubleValue);return s===a?ec(s)===ec(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Go(n.arrayValue.values||[],e.arrayValue.values||[],En);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(JS(s)!==JS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!En(s[u],a[u])))return!1;return!0}(n,e);default:return G(52216,{left:n})}}function nc(n,e){return(n.values||[]).find(t=>En(t,e))!==void 0}function Ko(n,e){if(n===e)return 0;let t=Mr(n),r=Mr(e);if(t!==r)return ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=we(o.integerValue||o.doubleValue),u=we(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return ZS(n.timestampValue,e.timestampValue);case 4:return ZS(tc(n),tc(e));case 5:return by(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Qn(o),u=Qn(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ae(a[l],u[l]);if(h!==0)return h}return ae(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ae(we(o.latitude),we(s.latitude));return a!==0?a:ae(we(o.longitude),we(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return XS(n.arrayValue,e.arrayValue);case 10:return function(o,s){let a=o.fields||{},u=s.fields||{},l=a[Wo]?.arrayValue,h=u[Wo]?.arrayValue,p=ae(l?.values?.length||0,h?.values?.length||0);return p!==0?p:XS(l,h)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Td.mapValue&&s===Td.mapValue)return 0;if(o===Td.mapValue)return 1;if(s===Td.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=by(u[p],h[p]);if(m!==0)return m;let y=Ko(a[u[p]],l[h[p]]);if(y!==0)return y}return ae(u.length,h.length)}(n.mapValue,e.mapValue);default:throw G(23264,{he:t})}}function ZS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ae(n,e);let t=Kn(n),r=Kn(e),i=ae(t.seconds,r.seconds);return i!==0?i:ae(t.nanos,r.nanos)}function XS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ko(t[i],r[i]);if(o)return o}return ae(t.length,r.length)}function Qo(n){return Ry(n)}function Ry(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Kn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Qn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Ry(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Ry(t.fields[s])}`;return i+"}"}(n.mapValue):G(61005,{value:n})}function Cd(n){switch(Mr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=fh(n);return e?16+Cd(e):16;case 5:return 2*n.stringValue.length;case 6:return Qn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Cd(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Lr(r.fields,(o,s)=>{i+=o.length+Cd(s)}),i}(n.mapValue);default:throw G(13486,{value:n})}}function eA(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ny(n){return!!n&&"integerValue"in n}function c_(n){return!!n&&"arrayValue"in n}function tA(n){return!!n&&"nullValue"in n}function nA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sd(n){return!!n&&"mapValue"in n}function nR(n){return(n?.mapValue?.fields||{})[s_]?.stringValue===a_}function Ka(n){if(n.geoPointValue)return{geoPointValue:x({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:x({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Lr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ka(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ka(n.arrayValue.values[t]);return e}return x({},n)}function rR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tR}var _7={mapValue:{fields:{[s_]:{stringValue:a_},[Wo]:{arrayValue:{}}}}};var Ct=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ka(t)}setAll(e){let t=St.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Ka(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Sd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Sd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Lr(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Ka(this.value))}};function iR(n){let e=[];return Lr(n.fields,(t,r)=>{let i=new St([t]);if(Sd(r)){let o=iR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ft(e)}var Yt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,J.min(),J.min(),J.min(),Ct.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,J.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,J.min(),J.min(),Ct.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,J.min(),J.min(),Ct.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Yo=class{constructor(e,t){this.position=e,this.inclusive=t}};function rA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),t.key):r=Ko(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function iA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!En(n.position[t],e.position[t]))return!1;return!0}var Di=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function YU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ld=class{},Le=class n extends Ld{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Py(e,t,r):t==="array-contains"?new Oy(e,r):t==="in"?new Ly(e,r):t==="not-in"?new Fy(e,r):t==="array-contains-any"?new Vy(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new xy(e,r):new ky(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ko(t,this.value)):t!==null&&Mr(this.value)===Mr(t)&&this.matchesComparison(Ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Jt=class n extends Ld{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return oR(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function oR(n){return n.op==="and"}function sR(n){return JU(n)&&oR(n)}function JU(n){for(let e of n.filters)if(e instanceof Jt)return!1;return!0}function My(n){if(n instanceof Le)return n.field.canonicalString()+n.op.toString()+Qo(n.value);if(sR(n))return n.filters.map(e=>My(e)).join(",");{let e=n.filters.map(t=>My(t)).join(",");return`${n.op}(${e})`}}function aR(n,e){return n instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&En(r.value,i.value)}(n,e):n instanceof Jt?function(r,i){return i instanceof Jt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&aR(s,i.filters[a]),!0):!1}(n,e):void G(19439)}function cR(n){return n instanceof Le?function(t){return`${t.field.canonicalString()} ${t.op} ${Qo(t.value)}`}(n):n instanceof Jt?function(t){return t.op.toString()+" {"+t.getFilters().map(cR).join(" ,")+"}"}(n):"Filter"}var Py=class extends Le{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},xy=class extends Le{constructor(e,t){super(e,"in",t),this.keys=uR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ky=class extends Le{constructor(e,t){super(e,"not-in",t),this.keys=uR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function uR(n,e){return(e.arrayValue?.values||[]).map(t=>z.fromName(t.referenceValue))}var Oy=class extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return c_(t)&&nc(t.arrayValue,this.value)}},Ly=class extends Le{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&nc(this.value.arrayValue,t)}},Fy=class extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nc(this.value.arrayValue,t)}},Vy=class extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!c_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>nc(this.value.arrayValue,r))}};var Uy=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function oA(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Uy(n,e,t,r,i,o,s)}function u_(n){let e=K(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>My(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),hh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Qo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Qo(r)).join(",")),e.Te=t}return e.Te}function l_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!aR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iA(n.startAt,e.startAt)&&iA(n.endAt,e.endAt)}function jy(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Pr=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function ZU(n,e,t,r,i,o,s,a){return new Pr(n,e,t,r,i,o,s,a)}function d_(n){return new Pr(n)}function sA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lR(n){return n.collectionGroup!==null}function Qa(n){let e=K(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ge(St.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Di(o,r))}),t.has(St.keyField().canonicalString())||e.Ie.push(new Di(St.keyField(),r))}return e.Ie}function _n(n){let e=K(n);return e.Ee||(e.Ee=XU(e,Qa(n))),e.Ee}function XU(n,e){if(n.limitType==="F")return oA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Di(i.field,o)});let t=n.endAt?new Yo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Yo(n.startAt.position,n.startAt.inclusive):null;return oA(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function By(n,e){let t=n.filters.concat([e]);return new Pr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $y(n,e,t){return new Pr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ph(n,e){return l_(_n(n),_n(e))&&n.limitType===e.limitType}function dR(n){return`${u_(_n(n))}|lt:${n.limitType}`}function Vo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>cR(i)).join(", ")}]`),hh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Qo(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Qo(i)).join(",")),`Target(${r})`}(_n(n))}; limitType=${n.limitType})`}function gh(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Qa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=rA(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Qa(r),i)||r.endAt&&!function(s,a,u){let l=rA(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Qa(r),i))}(n,e)}function ej(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hR(n){return(e,t)=>{let r=!1;for(let i of Qa(n)){let o=tj(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function tj(n,e,t){let r=n.field.isKeyField()?z.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ko(u,l):G(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:n.dir})}}var Yn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Lr(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return YA(this.inner)}size(){return this.innerSize}};var nj=new Ce(z.comparator);function Jn(){return nj}var fR=new Ce(z.comparator);function Wa(...n){let e=fR;for(let t of n)e=e.insert(t.key,t);return e}function pR(n){let e=fR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function vi(){return Ya()}function gR(){return Ya()}function Ya(){return new Yn(n=>n.toString(),(n,e)=>n.isEqual(e))}var rj=new Ce(z.comparator),ij=new Ge(z.comparator);function ce(...n){let e=ij;for(let t of n)e=e.add(t);return e}var oj=new Ge(ae);function sj(){return oj}function h_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ec(e)?"-0":e}}function mR(n){return{integerValue:""+n}}function aj(n,e){return LU(e)?mR(e):h_(n,e)}var Jo=class{constructor(){this._=void 0}};function cj(n,e,t){return n instanceof Zo?function(i,o){let s={fields:{[ZA]:{stringValue:JA},[eR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&o_(o)&&(o=fh(o)),o&&(s.fields[XA]=o),{mapValue:s}}(t,e):n instanceof bi?vR(n,e):n instanceof Ci?_R(n,e):function(i,o){let s=yR(i,o),a=aA(s)+aA(i.Ae);return Ny(s)&&Ny(i.Ae)?mR(a):h_(i.serializer,a)}(n,e)}function uj(n,e,t){return n instanceof bi?vR(n,e):n instanceof Ci?_R(n,e):t}function yR(n,e){return n instanceof Xo?function(r){return Ny(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Zo=class extends Jo{},bi=class extends Jo{constructor(e){super(),this.elements=e}};function vR(n,e){let t=IR(e);for(let r of n.elements)t.some(i=>En(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ci=class extends Jo{constructor(e){super(),this.elements=e}};function _R(n,e){let t=IR(e);for(let r of n.elements)t=t.filter(i=>!En(i,r));return{arrayValue:{values:t}}}var Xo=class extends Jo{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function aA(n){return we(n.integerValue||n.doubleValue)}function IR(n){return c_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function lj(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof bi&&i instanceof bi||r instanceof Ci&&i instanceof Ci?Go(r.elements,i.elements,En):r instanceof Xo&&i instanceof Xo?En(r.Ae,i.Ae):r instanceof Zo&&i instanceof Zo}(n.transform,e.transform)}var Hy=class{constructor(e,t){this.version=e,this.transformResults=t}},qn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ad(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var es=class{};function ER(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new rc(n.key,qn.none()):new Si(n.key,n.data,qn.none());{let t=n.data,r=Ct.empty(),i=new Ge(St.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new wn(n.key,r,new Ft(i.toArray()),qn.none())}}function dj(n,e,t){n instanceof Si?function(i,o,s){let a=i.value.clone(),u=uA(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof wn?function(i,o,s){if(!Ad(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=uA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(wR(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Ja(n,e,t,r){return n instanceof Si?function(o,s,a,u){if(!Ad(o.precondition,s))return a;let l=o.value.clone(),h=lA(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof wn?function(o,s,a,u){if(!Ad(o.precondition,s))return a;let l=lA(o.fieldTransforms,u,s),h=s.data;return h.setAll(wR(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Ad(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function hj(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=yR(r.transform,i||null);o!=null&&(t===null&&(t=Ct.empty()),t.set(r.field,o))}return t||null}function cA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Go(r,i,(o,s)=>lj(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Si=class extends es{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},wn=class extends es{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function wR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function uA(n,e,t){let r=new Map;ge(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,uj(s,a,t[i]))}return r}function lA(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,cj(o,s,e))}return r}var rc=class extends es{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},zy=class extends es{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var qy=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&dj(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ja(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ja(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=gR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=ER(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ce())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,(t,r)=>cA(t,r))&&Go(this.baseMutations,e.baseMutations,(t,r)=>cA(t,r))}},Gy=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return rj}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Wy=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ky=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ke,de;function fj(n){switch(n){case M.OK:return G(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return G(15467,{code:n})}}function TR(n){if(n===void 0)return Gn("GRPC error has no .code"),M.UNKNOWN;switch(n){case ke.OK:return M.OK;case ke.CANCELLED:return M.CANCELLED;case ke.UNKNOWN:return M.UNKNOWN;case ke.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case ke.INTERNAL:return M.INTERNAL;case ke.UNAVAILABLE:return M.UNAVAILABLE;case ke.UNAUTHENTICATED:return M.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case ke.NOT_FOUND:return M.NOT_FOUND;case ke.ALREADY_EXISTS:return M.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return M.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case ke.ABORTED:return M.ABORTED;case ke.OUT_OF_RANGE:return M.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return M.UNIMPLEMENTED;case ke.DATA_LOSS:return M.DATA_LOSS;default:return G(39323,{code:n})}}(de=ke||(ke={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var pj=null;function gj(){return new TextEncoder}var mj=new Hn([4294967295,4294967295],0);function dA(n){let e=gj().encode(n),t=new cy;return t.update(e),new Uint8Array(t.digest())}function hA(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Hn([t,r],0),new Hn([i,o],0)]}var Qy=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _i(`Invalid padding: ${t}`);if(r<0)throw new _i(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _i(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new _i(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Hn.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Hn.fromNumber(r)));return i.compare(mj)===1&&(i=new Hn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=dA(e),[r,i]=hA(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=dA(e),[r,i]=hA(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},_i=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Fd=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ic.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(J.min(),i,new Ce(ae),Jn(),ce())}},ic=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ce(),ce(),ce())}};var $o=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Vd=class{constructor(e,t){this.targetId=e,this.Ce=t}},Ud=class{constructor(e,t,r=nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},jd=class{constructor(){this.ve=0,this.Fe=fA(),this.Me=nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ce(),t=ce(),r=ce();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:G(38017,{changeType:o})}}),new ic(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=fA()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Yy=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Jn(),this.Je=Dd(),this.He=Dd(),this.Ye=new Ce(ae)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(jy(o))if(r===0){let s=new z(o.path);this.et(t,s,Yt.newNoDocument(s,J.min()))}else ge(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}pj?.lt(function(h,p,m,y,T){let R={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},N=p.unchangedNames;return N&&(R.bloomFilter={applied:T===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:F=>y?.mightContain(F)??!1}),R}(s,e.Ce,this.Ge.ht(),a,u))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Qn(r).toUint8Array()}catch(u){if(u instanceof xd)return qo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Qy(s,i,o)}catch(u){return qo(u instanceof _i?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&jy(a.target)){let u=new z(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,Yt.newNoDocument(u,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=ce();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Fd(e,t,this.Ye,this.je,r);return this.je=Jn(),this.Je=Dd(),this.He=Dd(),this.Ye=new Ce(ae),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new jd,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ge(ae),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ge(ae),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jd),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Dd(){return new Ce(z.comparator)}function fA(){return new Ce(z.comparator)}var yj={asc:"ASCENDING",desc:"DESCENDING"},vj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_j={and:"AND",or:"OR"},Jy=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Zy(n,e){return n.useProto3Json||hh(e)?e:{value:e}}function Bd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ij(n,e){return Bd(n,e.toTimestamp())}function In(n){return ge(!!n,49232),J.fromTimestamp(function(t){let r=Kn(t);return new Ve(r.seconds,r.nanos)}(n))}function f_(n,e){return Xy(n,e).canonicalString()}function Xy(n,e){let t=function(i){return new Te(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function bR(n){let e=Te.fromString(n);return ge(NR(e),10190,{key:e.toString()}),e}function ev(n,e){return f_(n.databaseId,e.path)}function gy(n,e){let t=bR(e);if(t.get(1)!==n.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(SR(t))}function CR(n,e){return f_(n.databaseId,e)}function Ej(n){let e=bR(n);return e.length===4?Te.emptyPath():SR(e)}function tv(n){return new Te(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SR(n){return ge(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function pA(n,e,t){return{name:ev(n,e),fields:t.value.mapValue.fields}}function wj(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(ge(h===void 0||typeof h=="string",58123),nt.fromBase64String(h||"")):(ge(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),nt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:TR(l.code);return new L(h,l.message||"")}(s);t=new Ud(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=gy(n,r.document.name),o=In(r.document.updateTime),s=r.document.createTime?In(r.document.createTime):J.min(),a=new Ct({mapValue:{fields:r.document.fields}}),u=Yt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new $o(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=gy(n,r.document),o=r.readTime?In(r.readTime):J.min(),s=Yt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new $o([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=gy(n,r.document),o=r.removedTargetIds||[];t=new $o([],o,i,null)}else{if(!("filter"in e))return G(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Ky(i,o),a=r.targetId;t=new Vd(a,s)}}return t}function Tj(n,e){let t;if(e instanceof Si)t={update:pA(n,e.key,e.value)};else if(e instanceof rc)t={delete:ev(n,e.key)};else if(e instanceof wn)t={update:pA(n,e.key,e.data),updateMask:Pj(e.fieldMask)};else{if(!(e instanceof zy))return G(16599,{Vt:e.type});t={verify:ev(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Zo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ci)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xo)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw G(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Ij(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G(27497)}(n,e.precondition)),t}function Dj(n,e){return n&&n.length>0?(ge(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?In(i.updateTime):In(o);return s.isEqual(J.min())&&(s=In(o)),new Hy(s,i.transformResults||[])}(t,e))):[]}function bj(n,e){return{documents:[CR(n,e.path)]}}function Cj(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=CR(n,i);let o=function(l){if(l.length!==0)return RR(Jt.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Uo(m.field),direction:Rj(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Zy(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:t,parent:i}}function Sj(n){let e=Ej(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ge(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=AR(p);return m instanceof Jt&&sR(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(T){return new Di(jo(T.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,hh(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new Yo(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Yo(y,m)}(t.endAt)),ZU(e,i,s,o,a,"F",u,l)}function Aj(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function AR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=jo(t.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=jo(t.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=jo(t.unaryFilter.field);return Le.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=jo(t.unaryFilter.field);return Le.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}}(n):n.fieldFilter!==void 0?function(t){return Le.create(jo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Jt.create(t.compositeFilter.filters.map(r=>AR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G(1026)}}(t.compositeFilter.op))}(n):G(30097,{filter:n})}function Rj(n){return yj[n]}function Nj(n){return vj[n]}function Mj(n){return _j[n]}function Uo(n){return{fieldPath:n.canonicalString()}}function jo(n){return St.fromServerFormat(n.fieldPath)}function RR(n){return n instanceof Le?function(t){if(t.op==="=="){if(nA(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NAN"}};if(tA(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(nA(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NOT_NAN"}};if(tA(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uo(t.field),op:Nj(t.op),value:t.value}}}(n):n instanceof Jt?function(t){let r=t.getFilters().map(i=>RR(i));return r.length===1?r[0]:{compositeFilter:{op:Mj(t.op),filters:r}}}(n):G(54877,{filter:n})}function Pj(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function NR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var oc=class n{constructor(e,t,r,i,o=J.min(),s=J.min(),a=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var nv=class{constructor(e){this.yt=e}};function xj(n){let e=Sj({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$y(e,e.limit,"L"):e}var $d=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(we(e.integerValue));else if("doubleValue"in e){let r=we(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),ec(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Kn(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Qn(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?rR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):nR(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):G(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Wo,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(we(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),z.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};$d.Kt=new $d;var rv=class{constructor(){this.Cn=new iv}addToCollectionParentIndex(e,t){return this.Cn.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(Ti.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(Ti.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},iv=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ge(Te.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ge(Te.comparator)).toArray()}};var I7=new Uint8Array(0);var gA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MR=41943040,Lt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(MR,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);var sc=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var mA="LruGarbageCollector",kj=1048576;function yA([n,e],[t,r]){let i=ae(n,t);return i===0?ae(e,r):i}var ov=class{constructor(e){this.Ir=e,this.buffer=new Ge(yA),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();yA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},sv=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){V(mA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ss(t)?V(mA,"Ignoring IndexedDB error during garbage collection: ",t):yield os(t)}yield this.Vr(3e5)}))}},av=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return P.resolve(r_.ce);let r=new ov(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(gA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gA):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Fo()<=re.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Oj(n,e){return new av(n,e)}var cv=class{constructor(){this.changes=new Yn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var uv=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var lv=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ja(r.mutation,i,Ft.empty(),Ve.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ce()){let i=vi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Wa();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=vi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ce()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Jn(),s=Ya(),a=function(){return Ya()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof wn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Ja(h.mutation,l,h.mutation.getFieldMask(),Ve.now())):s.set(l.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>a.set(l,new uv(h,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Ya(),i=new Ce((s,a)=>s-a),o=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Ft.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ce()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=gR();h.forEach(m=>{if(!o.has(m)){let y=ER(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):P.resolve(vi()),a=Xa,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ce())).next(h=>({batchId:a,changes:pR(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=Wa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Wa();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=function(p,m){return new Pr(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Yt.newInvalidDocument(h)))});let a=Wa();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Ja(h.mutation,l,Ft.empty(),Ve.now()),gh(t,l)&&(a=a.insert(u,l))}),a})}};var dv=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return P.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:In(i.createTime)}}(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:xj(i.bundledQuery),readTime:In(i.readTime)}}(t)),P.resolve()}};var hv=class{constructor(){this.overlays=new Ce(z.comparator),this.qr=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=vi();return P.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=vi(),o=t.length+1,s=new z(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ce((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=vi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=vi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Wy(t,r));let o=this.qr.get(t);o===void 0&&(o=ce(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var fv=class{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var ac=class{constructor(){this.Qr=new Ge(Oe.$r),this.Ur=new Ge(Oe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Oe(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Oe(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new z(new Te([])),r=new Oe(t,e),i=new Oe(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new z(new Te([])),r=new Oe(t,e),i=new Oe(t,e+1),o=ce();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Oe(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Oe=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return z.comparator(e.key,t.key)||ae(e.Yr,t.Yr)}static Kr(e,t){return ae(e.Yr,t.Yr)||z.comparator(e.key,t.key)}};var pv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ge(Oe.$r)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new qy(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new Oe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,t){return P.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?i_:this.tr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Oe(t,0),i=new Oe(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(ae);return t.forEach(i=>{let o=new Oe(i,0),s=new Oe(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),P.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new Oe(new z(o),0),a=new Ge(ae);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Yr)),!0)},s),P.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ge(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return P.forEach(t.mutations,i=>{let o=new Oe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Oe(t,0),i=this.Zr.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var gv=class{constructor(e){this.ri=e,this.docs=function(){return new Ce(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(t))}getEntries(e,t){let r=Jn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Yt.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Jn(),s=t.path,a=new z(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||xU(PU(h),r)<=0||(i.has(h.key)||gh(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,t,r,i){G(9500)}ii(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new mv(this)}getSize(e){return P.resolve(this.size)}},mv=class extends cv{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var yv=class{constructor(e){this.persistence=e,this.si=new Yn(t=>u_(t),l_),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.oi=0,this._i=new ac,this.targetCount=0,this.ai=sc.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),P.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new sc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.Pr(t),P.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this._i.containsKey(t))}};var Hd=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new r_(0),this.li=!1,this.li=!0,this.hi=new fv,this.referenceDelegate=e(this),this.Pi=new yv(this),this.indexManager=new rv,this.remoteDocumentCache=function(i){return new gv(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new nv(t),this.Ii=new dv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new pv(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new vv(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return P.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},vv=class extends Sy{constructor(e){super(),this.currentSequenceNumber=e}},_v=class n{constructor(e){this.persistence=e,this.Ri=new ac,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw G(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),P.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,r=>{let i=z.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,J.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return P.or([()=>P.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},zd=class n{constructor(e,t){this.persistence=e,this.pi=new Yn(r=>FU(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Oj(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return P.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return P.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?P.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,J.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),P.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),P.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Cd(e.data.value)),t}br(e,t,r){return P.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Iv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ce(),i=ce();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Ev=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var wv=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return TC()?8:OU(ze())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Ev;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Fo()<=re.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(Fo()<=re.DEBUG&&V("QueryEngine","Query:",Vo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Fo()<=re.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(t))):P.resolve())}ys(e,t){if(sA(t))return P.resolve(null);let r=_n(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=$y(t,null,"F"),r=_n(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ce(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(t,a);return this.Cs(t,l,s,u.readTime)?this.ys(e,$y(t,null,"F")):this.vs(e,l,t,u)}))})))}ws(e,t,r,i){return sA(t)||i.isEqual(J.min())?P.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?P.resolve(null):(Fo()<=re.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vo(t)),this.vs(e,s,t,MU(i,Xa)).next(a=>a))})}Ds(e,t){let r=new Ge(hR(e));return t.forEach((i,o)=>{gh(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Fo()<=re.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Vo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ti.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var p_="LocalStore",Lj=3e8,Tv=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ce(ae),this.xs=new Yn(o=>u_(o),l_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lv(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function Fj(n,e,t,r){return new Tv(n,e,t,r)}function PR(n,e){return _(this,null,function*(){let t=K(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ce();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Vj(n,e){let t=K(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(T=>{y=y.next(()=>h.getEntry(u,T)).next(R=>{let N=l.docVersions.get(T);ge(N!==null,48541),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function xR(n){let e=K(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Uj(n,e){let t=K(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(nt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(R,N,F){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Lj?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,y,h)&&a.push(t.Pi.updateTargetData(o,y))});let u=Jn(),l=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(jj(o,s,e.documentUpdates).next(h=>{u=h.ks,l=h.qs})),!r.isEqual(J.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ms=i,o))}function jj(n,e,t){let r=ce(),i=ce();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Jn();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(p_,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function Bj(n,e){let t=K(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=i_),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $j(n,e){let t=K(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new oc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function Dv(n,e,t){return _(this,null,function*(){let r=K(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ss(s))throw s;V(p_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function vA(n,e,t){let r=K(n),i=J.min(),o=ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=K(u),m=p.xs.get(h);return m!==void 0?P.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,h)}(r,s,_n(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:J.min(),t?o:ce())).next(a=>(Hj(r,ej(e),a),{documents:a,Qs:o})))}function Hj(n,e,t){let r=n.Os.get(e)||J.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var qd=class{constructor(){this.activeTargetIds=sj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var bv=class{constructor(){this.Mo=new qd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Cv=class{Oo(e){}shutdown(){}};var _A="ConnectivityMonitor",Gd=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){V(_A,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){V(_A,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var bd=null;function Sv(){return bd===null?bd=function(){return 268435456+Math.round(2147483648*Math.random())}():bd++,"0x"+bd.toString(16)}var my="RestConnection",zj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Av=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===kd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=Sv(),a=this.zo(e,t.toUriEncodedString());V(my,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(a),h=yr(l);return this.Jo(e,a,u,r,h).then(p=>(V(my,`Received RPC '${e}' ${s}: `,p),p),p=>{throw qo(my,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+is}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=zj[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var Rv=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var tt="WebChannelConnection",Nv=class extends Av{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=Sv();return new Promise((a,u)=>{let l=new uy;l.setWithCredentials(!0),l.listenOnce(ly.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ga.NO_ERROR:let p=l.getResponseJson();V(tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Ga.TIMEOUT:V(tt,`RPC '${e}' ${s} timed out`),u(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case Ga.HTTP_ERROR:let m=l.getStatus();if(V(tt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let R=function(F){let Z=F.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(Z)>=0?Z:M.UNKNOWN}(T.status);u(new L(R,T.message))}else u(new L(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(M.UNAVAILABLE,"Connection failed."));break;default:G(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{V(tt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(tt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}T_(e,t,r){let i=Sv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fy(),a=hy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(tt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.I_(p);let m=!1,y=!1,T=new Rv({Yo:N=>{y?V(tt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(V(tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(tt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Zo:()=>p.close()}),R=(N,F,Z)=>{N.listen(F,H=>{try{Z(H)}catch(Se){setTimeout(()=>{throw Se},0)}})};return R(p,Lo.EventType.OPEN,()=>{y||(V(tt,`RPC '${e}' stream ${i} transport opened.`),T.o_())}),R(p,Lo.EventType.CLOSE,()=>{y||(y=!0,V(tt,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(p))}),R(p,Lo.EventType.ERROR,N=>{y||(y=!0,qo(tt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),T.a_(new L(M.UNAVAILABLE,"The operation could not be completed")))}),R(p,Lo.EventType.MESSAGE,N=>{if(!y){let F=N.data[0];ge(!!F,16349);let Z=F,H=Z?.error||Z[0]?.error;if(H){V(tt,`RPC '${e}' stream ${i} received error:`,H);let Se=H.status,At=function(v){let E=ke[v];if(E!==void 0)return TR(E)}(Se),$e=H.message;At===void 0&&(At=M.INTERNAL,$e="Unknown error status: "+Se+" with message "+H.message),y=!0,T.a_(new L(At,$e)),p.close()}else V(tt,`RPC '${e}' stream ${i} received:`,F),T.u_(F)}}),R(a,dy.STAT_EVENT,N=>{N.stat===wd.PROXY?V(tt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===wd.NOPROXY&&V(tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function yy(){return typeof document<"u"?document:null}function mh(n){return new Jy(n,!0)}var Wd=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var IA="PersistentStream",Kd=class{constructor(e,t,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wd(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return _(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return _(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return _(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Gn(t.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>_(this,null,function*(){this.state=0,this.start()}))}z_(e){return V(IA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(V(IA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Mv=class extends Kd{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=wj(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?In(s.readTime):J.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=tv(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=jy(u)?{documents:bj(o,u)}:{query:Cj(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=DR(o,s.resumeToken);let l=Zy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=Bd(o,s.snapshotVersion.toTimestamp());let l=Zy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Aj(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=tv(this.serializer),t.removeTarget=e,this.q_(t)}},Pv=class extends Kd{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=Dj(e.writeResults,e.commitTime),r=In(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=tv(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Tj(this.serializer,r))};this.q_(t)}};var xv=class{},kv=class extends xv{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Xy(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,Xy(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},Ov=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(t),this.aa=!1):V("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Ai="RemoteStore",Lv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Ni(this)&&(V(Ai,"Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=K(u);l.Ea.add(4),yield dc(l),l.Ra.set("Unknown"),l.Ea.delete(4),yield yh(l)})}(this))}))}),this.Ra=new Ov(r,i)}};function yh(n){return _(this,null,function*(){if(Ni(n))for(let e of n.da)yield e(!0)})}function dc(n){return _(this,null,function*(){for(let e of n.da)yield e(!1)})}function kR(n,e){let t=K(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),v_(t)?y_(t):as(t).O_()&&m_(t,e))}function g_(n,e){let t=K(n),r=as(t);t.Ia.delete(e),r.O_()&&OR(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ni(t)&&t.Ra.set("Unknown"))}function m_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}as(n).Y_(e)}function OR(n,e){n.Va.Ue(e),as(n).Z_(e)}function y_(n){n.Va=new Yy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),as(n).start(),n.Ra.ua()}function v_(n){return Ni(n)&&!as(n).x_()&&n.Ia.size>0}function Ni(n){return K(n).Ea.size===0}function LR(n){n.Va=void 0}function qj(n){return _(this,null,function*(){n.Ra.set("Online")})}function Gj(n){return _(this,null,function*(){n.Ia.forEach((e,t)=>{m_(n,e)})})}function Wj(n,e){return _(this,null,function*(){LR(n),v_(n)?(n.Ra.ha(e),y_(n)):n.Ra.set("Unknown")})}function Kj(n,e,t){return _(this,null,function*(){if(n.Ra.set("Online"),e instanceof Ud&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})}(n,e)}catch(r){V(Ai,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Qd(n,r)}else if(e instanceof $o?n.Va.Ze(e):e instanceof Vd?n.Va.st(e):n.Va.tt(e),!t.isEqual(J.min()))try{let r=yield xR(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(l);h&&o.Ia.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(nt.EMPTY_BYTE_STRING,h.snapshotVersion)),OR(o,u);let p=new oc(h.target,u,l,h.sequenceNumber);m_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){V(Ai,"Failed to raise snapshot:",r),yield Qd(n,r)}})}function Qd(n,e,t){return _(this,null,function*(){if(!ss(e))throw e;n.Ea.add(1),yield dc(n),n.Ra.set("Offline"),t||(t=()=>xR(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){V(Ai,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield yh(n)}))})}function FR(n,e){return e().catch(t=>Qd(n,t,e))}function vh(n){return _(this,null,function*(){let e=K(n),t=xr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:i_;for(;Qj(e);)try{let i=yield Bj(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,Yj(e,i)}catch(i){yield Qd(e,i)}VR(e)&&UR(e)})}function Qj(n){return Ni(n)&&n.Ta.length<10}function Yj(n,e){n.Ta.push(e);let t=xr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function VR(n){return Ni(n)&&!xr(n).x_()&&n.Ta.length>0}function UR(n){xr(n).start()}function Jj(n){return _(this,null,function*(){xr(n).ra()})}function Zj(n){return _(this,null,function*(){let e=xr(n);for(let t of n.Ta)e.ea(t.mutations)})}function Xj(n,e,t){return _(this,null,function*(){let r=n.Ta.shift(),i=Gy.from(r,e,t);yield FR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield vh(n)})}function eB(n,e){return _(this,null,function*(){e&&xr(n).X_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return fj(s)&&s!==M.ABORTED}(i.code)){let o=r.Ta.shift();xr(r).B_(),yield FR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield vh(r)}})}(n,e)),VR(n)&&UR(n)})}function EA(n,e){return _(this,null,function*(){let t=K(n);t.asyncQueue.verifyOperationInProgress(),V(Ai,"RemoteStore received new credentials");let r=Ni(t);t.Ea.add(3),yield dc(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield yh(t)})}function tB(n,e){return _(this,null,function*(){let t=K(n);e?(t.Ea.delete(2),yield yh(t)):e||(t.Ea.add(2),yield dc(t),t.Ra.set("Unknown"))})}function as(n){return n.ma||(n.ma=function(t,r,i){let o=K(t);return o.sa(),new Mv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:qj.bind(null,n),t_:Gj.bind(null,n),r_:Wj.bind(null,n),H_:Kj.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.ma.B_(),v_(n)?y_(n):n.Ra.set("Unknown")):(yield n.ma.stop(),LR(n))}))),n.ma}function xr(n){return n.fa||(n.fa=function(t,r,i){let o=K(t);return o.sa(),new Pv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Jj.bind(null,n),r_:eB.bind(null,n),ta:Zj.bind(null,n),na:Xj.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.fa.B_(),yield vh(n)):(yield n.fa.stop(),n.Ta.length>0&&(V(Ai,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var Fv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function __(n,e){if(Gn("AsyncQueue",`${e}: ${n}`),ss(n))return new L(M.UNAVAILABLE,`${e}: ${n}`);throw n}var Yd=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=Wa(),this.sortedSet=new Ce(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Jd=class{constructor(){this.ga=new Ce(z.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):G(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},ts=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Yd.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Vv=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},Uv=class{constructor(){this.queries=wA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=K(t),o=i.queries;i.queries=wA(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function wA(){return new Yn(n=>dR(n),ph)}function jR(n,e){return _(this,null,function*(){let t=K(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Vv,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=__(s,`Initialization of query '${Vo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&I_(t)})}function BR(n,e){return _(this,null,function*(){let t=K(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function nB(n,e){let t=K(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&I_(t)}function rB(n,e,t){let r=K(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function I_(n){n.Ca.forEach(e=>{e.next()})}var jv,TA;(TA=jv||(jv={})).Ma="default",TA.Cache="cache";var Zd=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ts(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ts.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jv.Cache}};var Xd=class{constructor(e){this.key=e}},eh=class{constructor(e){this.key=e}},Bv=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ce(),this.mutatedKeys=ce(),this.eu=hR(e),this.tu=new Yd(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new Jd,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=gh(this.query,p)?p:null,T=!!m&&this.mutatedKeys.has(m.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?T!==R&&(r.track({type:3,doc:y}),N=!0):this.su(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>function(y,T){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{Rt:N})}};return R(y)-R(T)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new ts(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jd,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=ce(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new eh(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Xd(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=ce();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ts.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},E_="SyncEngine",$v=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Hv=class{constructor(e){this.key=e,this.hu=!1}},zv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Yn(a=>dR(a),ph),this.Iu=new Map,this.Eu=new Set,this.du=new Ce(z.comparator),this.Au=new Map,this.Ru=new ac,this.Vu={},this.mu=new Map,this.fu=sc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function iB(n,e,t=!0){return _(this,null,function*(){let r=WR(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield $R(r,e,t,!0),i})}function oB(n,e){return _(this,null,function*(){let t=WR(n);yield $R(t,e,!0,!1)})}function $R(n,e,t,r){return _(this,null,function*(){let i=yield $j(n.localStore,_n(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield sB(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&kR(n.remoteStore,i),a})}function sB(n,e,t,r,i){return _(this,null,function*(){n.pu=(p,m,y)=>function(R,N,F,Z){return _(this,null,function*(){let H=N.view.ru(F);H.Cs&&(H=yield vA(R.localStore,N.query,!1).then(({documents:C})=>N.view.ru(C,H)));let Se=Z&&Z.targetChanges.get(N.targetId),At=Z&&Z.targetMismatches.get(N.targetId)!=null,$e=N.view.applyChanges(H,R.isPrimaryClient,Se,At);return bA(R,N.targetId,$e.au),$e.snapshot})}(n,p,m,y);let o=yield vA(n.localStore,e,!0),s=new Bv(e,o.Qs),a=s.ru(o.documents),u=ic.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);bA(n,t,l.au);let h=new $v(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot})}function aB(n,e,t){return _(this,null,function*(){let r=K(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!ph(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Dv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&g_(r.remoteStore,i.targetId),qv(r,i.targetId)}).catch(os))):(qv(r,i.targetId),yield Dv(r.localStore,i.targetId,!0))})}function cB(n,e){return _(this,null,function*(){let t=K(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),g_(t.remoteStore,r.targetId))})}function uB(n,e,t){return _(this,null,function*(){let r=mB(n);try{let i=yield function(s,a){let u=K(s),l=Ve.now(),h=a.reduce((y,T)=>y.add(T.key),ce()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Jn(),R=ce();return u.Ns.getEntries(y,h).next(N=>{T=N,T.forEach((F,Z)=>{Z.isValidDocument()||(R=R.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(N=>{p=N;let F=[];for(let Z of a){let H=hj(Z,p.get(Z.key).overlayedDocument);H!=null&&F.push(new wn(Z.key,H,iR(H.value.mapValue),qn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,F,a)}).next(N=>{m=N;let F=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,N.batchId,F)})}).then(()=>({batchId:m.batchId,changes:pR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new Ce(ae)),l=l.insert(a,u),s.Vu[s.currentUser.toKey()]=l}(r,i.batchId,t),yield hc(r,i.changes),yield vh(r.remoteStore)}catch(i){let o=__(i,"Failed to persist write");t.reject(o)}})}function HR(n,e){return _(this,null,function*(){let t=K(n);try{let r=yield Uj(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ge(s.hu,14607):i.removedDocuments.size>0&&(ge(s.hu,42227),s.hu=!1))}),yield hc(t,r,e)}catch(r){yield os(r)}})}function DA(n,e,t){let r=K(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=K(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.Sa)m.va(a)&&(l=!0)}),l&&I_(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lB(n,e,t){return _(this,null,function*(){let r=K(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ce(z.comparator);s=s.insert(o,Yt.newNoDocument(o,J.min()));let a=ce().add(o),u=new Fd(J.min(),new Map,new Ce(ae),s,a);yield HR(r,u),r.du=r.du.remove(o),r.Au.delete(e),w_(r)}else yield Dv(r.localStore,e,!1).then(()=>qv(r,e,t)).catch(os)})}function dB(n,e){return _(this,null,function*(){let t=K(n),r=e.batch.batchId;try{let i=yield Vj(t.localStore,e);qR(t,r,null),zR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield hc(t,i)}catch(i){yield os(i)}})}function hB(n,e,t){return _(this,null,function*(){let r=K(n);try{let i=yield function(s,a){let u=K(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ge(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);qR(r,e,t),zR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield hc(r,i)}catch(i){yield os(i)}})}function zR(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function qR(n,e,t){let r=K(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function qv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||GR(n,r)})}function GR(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(g_(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),w_(n))}function bA(n,e,t){for(let r of t)r instanceof Xd?(n.Ru.addReference(r.key,e),fB(n,r)):r instanceof eh?(V(E_,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||GR(n,r.key)):G(19791,{wu:r})}function fB(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(V(E_,"New document in limbo: "+t),n.Eu.add(r),w_(n))}function w_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new z(Te.fromString(e)),r=n.fu.next();n.Au.set(r,new Hv(t)),n.du=n.du.insert(t,r),kR(n.remoteStore,new oc(_n(d_(t.path)),r,"TargetPurposeLimboResolution",r_.ce))}}function hc(n,e,t){return _(this,null,function*(){let r=K(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{s.push(r.pu(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=Iv.As(u.targetId,l);o.push(h)}}))}),yield Promise.all(s),r.Pu.H_(i),yield function(u,l){return _(this,null,function*(){let h=K(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!ss(p))throw p;V(p_,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Ms.get(m),T=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(T);h.Ms=h.Ms.insert(m,R)}}})}(r.localStore,o))})}function pB(n,e){return _(this,null,function*(){let t=K(n);if(!t.currentUser.isEqual(e)){V(E_,"User change. New user:",e.toKey());let r=yield PR(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hc(t,r.Ls)}})}function gB(n,e){let t=K(n),r=t.Au.get(e);if(r&&r.hu)return ce().add(r.key);{let i=ce(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function WR(n){let e=K(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=HR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lB.bind(null,e),e.Pu.H_=nB.bind(null,e.eventManager),e.Pu.yu=rB.bind(null,e.eventManager),e}function mB(n){let e=K(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hB.bind(null,e),e}var KR=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=mh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Fj(this.persistence,new wv,t.initialUser,this.serializer)}Cu(t){return new Hd(_v.mi,this.serializer)}Du(t){return new bv}terminate(){return _(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Gv=class extends KR{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ge(this.persistence.referenceDelegate instanceof zd,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new sv(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new Hd(r=>zd.mi(r,t),this.serializer)}};var yB=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>DA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=pB.bind(null,this.syncEngine),yield tB(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Uv}()}createDatastore(t){let r=mh(t.databaseInfo.databaseId),i=function(s){return new Nv(s)}(t.databaseInfo);return function(s,a,u,l){return new kv(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Lv(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>DA(this.syncEngine,r,0),function(){return Gd.v()?new Gd:new Cv}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new zv(o,s,a,u,l,h);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){yield function(r){return _(this,null,function*(){let i=K(r);V(Ai,"RemoteStore shutting down."),i.Ea.add(5),yield dc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var th=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var kr="FirestoreClient",Wv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=qe.UNAUTHENTICATED,this.clientId=Za.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){V(kr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V(kr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Qt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=__(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function vy(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V(kr,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield PR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function CA(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield vB(n);V(kr,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>EA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>EA(e.remoteStore,i)),n._onlineComponents=e})}function vB(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V(kr,"Using user provided OfflineComponentProvider");try{yield vy(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;qo("Error using user provided cache. Falling back to memory cache: "+t),yield vy(n,new KR)}}else V(kr,"Using default OfflineComponentProvider"),yield vy(n,new Gv(void 0));return n._offlineComponents})}function QR(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V(kr,"Using user provided OnlineComponentProvider"),yield CA(n,n._uninitializedComponentsProvider._online)):(V(kr,"Using default OnlineComponentProvider"),yield CA(n,new yB))),n._onlineComponents})}function _B(n){return QR(n).then(e=>e.syncEngine)}function YR(n){return _(this,null,function*(){let e=yield QR(n),t=e.eventManager;return t.onListen=iB.bind(null,e.syncEngine),t.onUnlisten=aB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cB.bind(null,e.syncEngine),t})}function IB(n,e,t={}){let r=new Qt;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,a,u,l){let h=new th({next:m=>{h.Nu(),s.enqueueAndForget(()=>BR(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new L(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Zd(d_(a.path),h,{includeMetadataChanges:!0,qa:!0});return jR(o,p)}(yield YR(n),n.asyncQueue,e,t,r)})),r.promise}function EB(n,e,t={}){let r=new Qt;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,a,u,l){let h=new th({next:m=>{h.Nu(),s.enqueueAndForget(()=>BR(o,p)),m.fromCache&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Zd(a,h,{includeMetadataChanges:!0,qa:!0});return jR(o,p)}(yield YR(n),n.asyncQueue,e,t,r)})),r.promise}function JR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var SA=new Map;var ZR="firestore.googleapis.com",AA=!0,nh=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZR,this.ssl=AA}else this.host=e.host,this.ssl=e.ssl??AA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kj)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JR(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ns=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _y;switch(r.type){case"firstParty":return new Ty(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=SA.get(t);r&&(V("ComponentProvider","Removing Datastore"),SA.delete(t),r.terminate())}(this),Promise.resolve()}};function wB(n,e,t,r={}){n=Wn(n,ns);let i=yr(e),o=n._getSettings(),s=ie(x({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(Ql(`https://${a}`),Yl("Firestore",!0)),o.host!==ZR&&o.host!==a&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=ie(x({},o),{host:a,ssl:i,emulatorOptions:r});if(!pn(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=qe.MOCK_USER;else{l=yC(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new qe(p)}n._authCredentials=new Iy(new Rd(l,h))}}var Ri=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Qe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(lc(t,n._jsonSchema))return new n(e,r||null,new z(Te.fromString(t.referencePath)))}};Qe._jsonSchemaVersion="firestore/documentReference/1.0",Qe._jsonSchema={type:Fe("string",Qe._jsonSchemaVersion),referencePath:Fe("string")};var Sr=class n extends Ri{constructor(e,t,r){super(e,t,d_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Qe(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function E7(n,e,...t){if(n=xe(n),kA("collection","path",e),n instanceof ns){let r=Te.fromString(e,...t);return WS(r),new Sr(n,null,r)}{if(!(n instanceof Qe||n instanceof Sr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Te.fromString(e,...t));return WS(r),new Sr(n.firestore,null,r)}}function TB(n,e,...t){if(n=xe(n),arguments.length===1&&(e=Za.newId()),kA("doc","path",e),n instanceof ns){let r=Te.fromString(e,...t);return GS(r),new Qe(n,null,new z(r))}{if(!(n instanceof Qe||n instanceof Sr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Te.fromString(e,...t));return GS(r),new Qe(n.firestore,n instanceof Sr?n.converter:null,new z(r))}}var RA="AsyncQueue",rh=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wd(this,"async_queue_retry"),this._c=()=>{let r=yy();r&&V(RA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=yy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=yy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Qt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return _(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ss(e))throw e;V(RA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",NA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Fv.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&G(47125,{Pc:NA(this.nc)})}verifyOperationInProgress(){}Tc(){return _(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function NA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var Or=class extends ns{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new rh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new rh(e),this._firestoreClient=void 0,yield e}})}};function XR(n,e){let t=typeof n=="object"?n:ed(),r=typeof n=="string"?n:e||kd,i=La(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=mC("firestore");o&&wB(i,...o)}return i}function T_(n){if(n._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||DB(n),n._firestoreClient}function DB(n){let e=n._freezeSettings(),t=function(i,o,s,a){return new Ay(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,JR(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Wv(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var Ar=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(nt.fromBase64String(e))}catch(t){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lc(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ar._jsonSchemaVersion="firestore/bytes/1.0",Ar._jsonSchema={type:Fe("string",Ar._jsonSchemaVersion),bytes:Fe("string")};var rs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var cc=class{constructor(e){this._methodName=e}};var Rr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(lc(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Rr._jsonSchemaVersion="firestore/geoPoint/1.0",Rr._jsonSchema={type:Fe("string",Rr._jsonSchemaVersion),latitude:Fe("number"),longitude:Fe("number")};var Nr=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lc(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new L(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Nr._jsonSchemaVersion="firestore/vectorValue/1.0",Nr._jsonSchema={type:Fe("string",Nr._jsonSchemaVersion),vectorValues:Fe("object")};var bB=/^__.*__$/,Kv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new wn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Si(e,this.data,t,this.fieldTransforms)}},ih=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function e0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{Ac:n})}}var Qv=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(x(x({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return sh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(e0(this.Ac)&&bB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},Yv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||mh(e)}Cc(e,t,r,i=!1){return new Qv({Ac:e,methodName:t,Dc:r,path:St.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function D_(n){let e=n._freezeSettings(),t=mh(n._databaseId);return new Yv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CB(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);b_("Data must be an object, but it was:",s,r);let a=t0(r,s),u,l;if(o.merge)u=new Ft(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Jv(e,p,t);if(!s.contains(m))throw new L(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);r0(h,m)||h.push(m)}u=new Ft(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Kv(new Ct(a),u,l)}var oh=class n extends cc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function SB(n,e,t,r){let i=n.Cc(1,e,t);b_("Data must be an object, but it was:",i,r);let o=[],s=Ct.empty();Lr(r,(u,l)=>{let h=C_(e,u,t);l=xe(l);let p=i.yc(h);if(l instanceof oh)o.push(h);else{let m=fc(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Ft(o);return new ih(s,a,i.fieldTransforms)}function AB(n,e,t,r,i,o){let s=n.Cc(1,e,t),a=[Jv(e,r,t)],u=[i];if(o.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Jv(e,o[m])),u.push(o[m+1]);let l=[],h=Ct.empty();for(let m=a.length-1;m>=0;--m)if(!r0(l,a[m])){let y=a[m],T=u[m];T=xe(T);let R=s.yc(y);if(T instanceof oh)l.push(y);else{let N=fc(T,R);N!=null&&(l.push(y),h.set(y,N))}}let p=new Ft(l);return new ih(h,p,s.fieldTransforms)}function RB(n,e,t,r=!1){return fc(t,n.Cc(r?4:3,e))}function fc(n,e){if(n0(n=xe(n)))return b_("Unsupported field value:",e,n),t0(n,e);if(n instanceof cc)return function(r,i){if(!e0(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=fc(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ve.fromDate(r);return{timestampValue:Bd(i.serializer,o)}}if(r instanceof Ve){let o=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bd(i.serializer,o)}}if(r instanceof Rr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ar)return{bytesValue:DR(i.serializer,r._byteString)};if(r instanceof Qe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:f_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Nr)return function(s,a){return{mapValue:{fields:{[s_]:{stringValue:a_},[Wo]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return h_(a.serializer,l)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${dh(r)}`)}(n,e)}function t0(n,e){let t={};return YA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lr(n,(r,i)=>{let o=fc(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function n0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ve||n instanceof Rr||n instanceof Ar||n instanceof Qe||n instanceof cc||n instanceof Nr)}function b_(n,e,t){if(!n0(t)||!OA(t)){let r=dh(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Jv(n,e,t){if((e=xe(e))instanceof rs)return e._internalPath;if(typeof e=="string")return C_(n,e);throw sh("Field path arguments must be of type string or ",n,!1,void 0,t)}var NB=new RegExp("[~\\*/\\[\\]]");function C_(n,e,t){if(e.search(NB)>=0)throw sh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rs(...e.split("."))._internalPath}catch{throw sh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+n+u)}function r0(n,e){return n.some(t=>t.isEqual(e))}var ah=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Zv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(_h("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Zv=class extends ah{data(){return super.data()}};function _h(n,e){return typeof e=="string"?C_(n,e):e instanceof rs?e._internalPath:e._delegate._internalPath}function MB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var uc=class{},ch=class extends uc{};function w7(n,e,...t){let r=[];e instanceof uc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Xv).length,a=o.filter(u=>u instanceof uh).length;if(s>1||s>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var uh=class n extends ch{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return i0(e._query,t),new Ri(e.firestore,e.converter,By(e._query,t))}_parse(e){let t=D_(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){PA(p,h);let T=[];for(let R of p)T.push(MA(u,o,R));m={arrayValue:{values:T}}}else m=MA(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||PA(p,h),m=RB(a,s,p,h==="in"||h==="not-in");return Le.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function T7(n,e,t){let r=e,i=_h("where",n);return uh._create(i,r,t)}var Xv=class n extends uc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Jt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)i0(s,u),s=By(s,u)}(e._query,t),new Ri(e.firestore,e.converter,By(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var e_=class n extends ch{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Di(o,s)}(e._query,this._field,this._direction);return new Ri(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Pr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function D7(n,e="asc"){let t=e,r=_h("orderBy",n);return e_._create(r,t)}function MA(n,e,t){if(typeof(t=xe(t))=="string"){if(t==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lR(e)&&t.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Te.fromString(t));if(!z.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eA(n,new z(r))}if(t instanceof Qe)return eA(n,t._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dh(t)}.`)}function PA(n,e){if(!Array.isArray(n)||n.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function i0(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var t_=class{convertValue(e,t="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return we(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Lr(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Wo].arrayValue?.values?.map(r=>we(r.doubleValue));return new Nr(t)}convertGeoPoint(e){return new Rr(we(e.latitude),we(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=fh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(tc(e));default:return null}}convertTimestamp(e){let t=Kn(e);return new Ve(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Te.fromString(e);ge(NR(r),9688,{name:e});let i=new Od(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(t)||Gn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function PB(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ii=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ei=class n extends ah{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ho(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(_h("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ei._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ei._jsonSchema={type:Fe("string",Ei._jsonSchemaVersion),bundleSource:Fe("string","DocumentSnapshot"),bundleName:Fe("string"),bundle:Fe("string")};var Ho=class extends Ei{data(e={}){return super.data(e)}},zo=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ii(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ho(this._firestore,this._userDataWriter,r.key,r,new Ii(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ho(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ii(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ho(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ii(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:xB(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Za.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function xB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:n})}}function b7(n){n=Wn(n,Qe);let e=Wn(n.firestore,Or);return IB(T_(e),n._key).then(t=>kB(e,n,t))}zo._jsonSchemaVersion="firestore/querySnapshot/1.0",zo._jsonSchema={type:Fe("string",zo._jsonSchemaVersion),bundleSource:Fe("string","QuerySnapshot"),bundleName:Fe("string"),bundle:Fe("string")};var lh=class extends t_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ar(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,t)}};function C7(n){n=Wn(n,Ri);let e=Wn(n.firestore,Or),t=T_(e),r=new lh(e);return MB(n._query),EB(t,n._query).then(i=>new zo(e,r,n,i))}function S7(n,e,t,...r){n=Wn(n,Qe);let i=Wn(n.firestore,Or),o=D_(i),s;return s=typeof(e=xe(e))=="string"||e instanceof rs?AB(o,"updateDoc",n._key,e,t,r):SB(o,"updateDoc",n._key,e),S_(i,[s.toMutation(n._key,qn.exists(!0))])}function A7(n){return S_(Wn(n.firestore,Or),[new rc(n._key,qn.none())])}function R7(n,e){let t=Wn(n.firestore,Or),r=TB(n),i=PB(n.converter,e);return S_(t,[CB(D_(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,qn.exists(!1))]).then(()=>r)}function S_(n,e){return function(r,i){let o=new Qt;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return uB(yield _B(r),i,o)})),o.promise}(T_(n),e)}function kB(n,e,t){let r=t.docs.get(e._key),i=new lh(n);return new Ei(n,i,e._key,r,new Ii(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){is=i})(Er),Ir(new Ot("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Or(new Ey(r.getProvider("auth-internal")),new Dy(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Od(l.options.projectId,h)}(s,i),s);return o=x({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Kt(HS,zS,e),Kt(HS,zS,"esm2020")})();var OB={apiKey:"AIzaSyCUmYI4OygEaKcnvEqbB54PExiQzgOCm2g",authDomain:"testetecnico-8392e.firebaseapp.com",projectId:"testetecnico-8392e",storageBucket:"testetecnico-8392e.firebasestorage.app",messagingSenderId:"654901677494",appId:"1:654901677494:web:94bb24d1d56c934c660517",measurementId:"G-9VPXM4Y5SY"},o0=Rm(OB),F7=XR(o0),Ih=ay(o0);var s0=class n{constructor(e){this.router=e;iy(Ih,t=>{this.currentUserSubject.next(t)})}currentUserSubject=new je(null);currentUser$=this.currentUserSubject.asObservable();login(e,t){return _(this,null,function*(){try{if(e!=="admin@email.com")throw new Error("Acesso negado. Apenas administradores podem fazer login.");let r=yield ry(Ih,e,t);return r.user?(this.currentUserSubject.next(r.user),this.router.navigate(["/cadastro"]),!0):!1}catch(r){throw console.error("Erro no login:",r),r}})}logout(){return _(this,null,function*(){try{yield oy(Ih),this.currentUserSubject.next(null),this.router.navigate(["/login"])}catch(e){throw console.error("Erro no logout:",e),e}})}isAuthenticated(){return this.currentUserSubject.value!==null}getCurrentUser(){return this.currentUserSubject.value}static \u0275fac=function(t){return new(t||n)($(kt))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};export{x as a,ie as b,_ as c,He as d,Ee as e,te as f,IN as g,U as h,ew as i,j,ti as k,B as l,$ as m,k as n,Ws as o,O3 as p,L3 as q,$p as r,ft as s,Ys as t,F3 as u,CP as v,V3 as w,el as x,ct as y,oD as z,ni as A,ri as B,Ak as C,Uk as D,ea as E,pg as F,oO as G,sO as H,K3 as I,ID as J,ED as K,gg as L,Q3 as M,mg as N,Y3 as O,J3 as P,DO as Q,TD as R,bO as S,CO as T,Z3 as U,SO as V,X3 as W,e6 as X,ta as Y,na as Z,WO as _,t6 as $,Fn as aa,FD as ba,JO as ca,VD as da,h1 as ea,ib as fa,U1 as ga,fn as ha,Zg as ia,kt as ja,Jb as ka,gF as la,mF as ma,Ve as na,E7 as oa,TB as pa,w7 as qa,T7 as ra,D7 as sa,b7 as ta,C7 as ua,S7 as va,A7 as wa,R7 as xa,F7 as ya,s0 as za};
