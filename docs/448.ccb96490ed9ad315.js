"use strict";(self.webpackChunktesteTecnico=self.webpackChunktesteTecnico||[]).push([[448],{448:(M,F,i)=>{i.r(F),i.d(F,{CadastroComponent:()=>y});var P=i(7643),e=i(1360),_=i(2881),I=i(8905),C=i(4611),k=i(4378);function x(s,j){if(1&s){const t=e.RV6();e.j41(0,"div",74),e.nrm(1,"img",75),e.j41(2,"button",76),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.removePhoto())}),e.nrm(3,"i",77),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("src",t.selectedPhoto,e.B4B)}}let y=(()=>{class s{http=(0,e.WQX)(P.Qq);funcionarioService=(0,e.WQX)(I.C);router=(0,e.WQX)(C.Ix);route=(0,e.WQX)(C.nX);isLoading=!1;selectedPhoto=null;isEditMode=!1;funcionarioId=null;funcionario=null;ngOnInit(){this.route.queryParams.subscribe(t=>{t.id&&(this.isEditMode=!0,this.funcionarioId=t.id,this.funcionarioId&&this.carregarFuncionario(this.funcionarioId))})}carregarFuncionario(t){this.isLoading=!0,this.funcionarioService.obterFuncionario(t).subscribe({next:o=>{this.funcionario=o,this.preencherFormulario(o),this.isLoading=!1},error:o=>{console.error("Erro ao carregar funcion\xe1rio:",o),alert("Erro ao carregar dados do funcion\xe1rio."),this.router.navigate(["/lista-funcionarios"]),this.isLoading=!1}})}preencherFormulario(t){setTimeout(()=>{const o=document.getElementById("nome"),n=document.getElementById("email"),r=document.getElementById("telefone"),a=document.getElementById("cpf"),l=document.getElementById("cargo"),c=document.getElementById("salario"),d=document.getElementById("dataAdmissao"),p=document.getElementById("cep"),m=document.getElementById("rua"),f=document.getElementById("numero"),g=document.getElementById("complemento"),v=document.getElementById("bairro"),E=document.getElementById("cidade"),b=document.getElementById("estado"),u=document.getElementById("ativo");o&&(o.value=t.nome||""),n&&(n.value=t.email||""),r&&(r.value=t.telefone||""),a&&(a.value=t.cpf||""),l&&(l.value=t.cargo||""),c&&(c.value=this.formatarSalarioParaInput(t.salario||0)),d&&(d.value=t.dataNascimento||""),p&&(p.value=t.cep||""),m&&(m.value=t.endereco||""),f&&(f.value=t.numero||""),g&&(g.value=t.complemento||""),v&&(v.value=t.bairro||""),E&&(E.value=t.cidade||""),b&&(b.value=t.estado||""),u&&(u.value=t.ativo||"ativo"),this.selectedPhoto=t.foto||null},100)}formatarSalarioParaInput(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}onFileSelected(t){const o=t.target.files[0];if(o)if(o.type.startsWith("image/")){const n=new FileReader;n.onload=()=>{this.selectedPhoto=n.result},n.readAsDataURL(o)}else alert("Por favor, selecione apenas arquivos de imagem."),t.target.value="",this.selectedPhoto=null}removePhoto(){this.selectedPhoto=null;const t=document.getElementById("foto");t&&(t.value="")}buscarCep(t){const o=t.replace(/\D/g,"");if(8===o.length){const n=document.getElementById("cep");n.classList.add("loading"),this.http.get(`https://viacep.com.br/ws/${o}/json/`).subscribe({next:r=>{if(n.classList.remove("loading"),r.erro)alert("CEP n\xe3o encontrado!");else{const a=document.getElementById("rua"),l=document.getElementById("bairro"),c=document.getElementById("cidade"),d=document.getElementById("estado");a&&(a.value=r.logradouro||""),l&&(l.value=r.bairro||""),c&&(c.value=r.localidade||""),d&&(d.value=r.uf||""),!r.logradouro&&a&&a.focus()}},error:r=>{n.classList.remove("loading"),console.error("Erro ao buscar CEP:",r),alert("Erro ao buscar CEP. Tente novamente.")}})}}onCepChange(t){this.buscarCep(t.target.value)}formatarCep(t){let o=t.target.value.replace(/\D/g,"");o=o.replace(/(\d{5})(\d)/,"$1-$2"),t.target.value=o}formatarCpf(t){let o=t.target.value.replace(/\D/g,"");o=o.replace(/(\d{3})(\d)/,"$1.$2"),o=o.replace(/(\d{3})(\d)/,"$1.$2"),o=o.replace(/(\d{3})(\d{1,2})$/,"$1-$2"),t.target.value=o}formatarTelefone(t){let o=t.target.value.replace(/\D/g,"");o=o.replace(/(\d{2})(\d)/,"($1) $2"),o=o.replace(/(\d{5})(\d)/,"$1-$2"),t.target.value=o}formatarSalario(t){let o=t.target.value.replace(/\D/g,"");o=(parseFloat(o)/100).toFixed(2),o=o.replace(".",","),o=o.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1."),t.target.value="R$ "+o}cadastrarFuncionario(){if(this.isLoading)return;const t=document.getElementById("nome"),o=document.getElementById("email"),n=document.getElementById("telefone"),r=document.getElementById("cpf"),a=document.getElementById("cargo"),l=document.getElementById("salario"),c=document.getElementById("dataAdmissao"),d=document.getElementById("cep"),p=document.getElementById("rua"),m=document.getElementById("numero"),f=document.getElementById("complemento"),g=document.getElementById("bairro"),v=document.getElementById("cidade"),E=document.getElementById("estado"),b=document.getElementById("ativo");if(!t?.value||!o?.value||!r?.value)return void alert("Por favor, preencha todos os campos obrigat\xf3rios.");const u={nome:t.value,email:o.value,telefone:n.value,cpf:r.value,cargo:a.value,salario:this.parseSalario(l.value),dataNascimento:c.value,cep:d.value,endereco:p.value,numero:m.value,complemento:f.value||void 0,bairro:g.value,cidade:v.value,estado:E.value,ativo:b.value,foto:this.selectedPhoto||""};this.isLoading=!0,this.isEditMode&&this.funcionarioId?this.funcionarioService.atualizarFuncionario(this.funcionarioId,u).subscribe({next:()=>{this.isLoading=!1,alert("Funcion\xe1rio atualizado com sucesso!"),this.router.navigate(["/lista-funcionarios"])},error:h=>{this.isLoading=!1,console.error("Erro ao atualizar:",h),alert("Erro ao atualizar funcion\xe1rio. Tente novamente.")}}):this.funcionarioService.adicionarFuncionario(u).subscribe({next:h=>{this.isLoading=!1,alert("Funcion\xe1rio cadastrado com sucesso!"),this.router.navigate(["/lista-funcionarios"])},error:h=>{this.isLoading=!1,console.error("Erro ao cadastrar:",h),alert("Erro ao cadastrar funcion\xe1rio. Tente novamente.")}})}parseSalario(t){const o=t.replace(/R\$\s?/g,"").replace(/\./g,"").replace(",",".");return parseFloat(o)||0}limparFormulario(){const t=document.querySelector("form");t&&t.reset()}static \u0275fac=function(o){return new(o||s)};static \u0275cmp=e.VBU({type:s,selectors:[["app-cadastro"]],decls:129,vars:4,consts:[[1,"global-background","cadastro-container"],[1,"page-container","cadastro-content"],[1,"cadastro-title"],[1,"cadastro-form",3,"submit"],[1,"form-columns"],[1,"column-left"],[1,"section-title"],["for","ativo"],["id","ativo","name","ativo","required","",1,"cadastro-input"],["value",""],["value","ativo"],["value","inativo"],["for","foto"],["type","file","id","foto","name","foto","accept","image/*",1,"cadastro-input",3,"change"],["class","photo-preview",4,"ngIf"],["for","nome"],["type","text","id","nome","name","nome","placeholder","Digite o nome completo","required","",1,"cadastro-input"],["for","email"],["type","email","id","email","name","email","placeholder","Digite o email","required","",1,"cadastro-input"],["for","telefone"],["type","text","id","telefone","name","telefone","placeholder","(00) 00000-0000","maxlength","15","required","",1,"cadastro-input",3,"input"],["for","cargo"],["type","text","id","cargo","name","cargo","placeholder","Digite o cargo","required","",1,"cadastro-input"],["for","salario"],["type","text","id","salario","name","salario","placeholder","R$ 0,00","required","",1,"cadastro-input",3,"input"],["for","dataAdmissao"],["type","date","id","dataAdmissao","name","dataAdmissao","required","",1,"cadastro-input"],["for","cpf"],["type","text","id","cpf","name","cpf","placeholder","000.000.000-00","maxlength","14","required","",1,"cadastro-input",3,"input"],[1,"column-right"],["for","cep"],["type","text","id","cep","name","cep","placeholder","00000-000","maxlength","9","required","",1,"cadastro-input",3,"input","blur"],["for","rua"],["type","text","id","rua","name","rua","placeholder","Digite a rua","required","",1,"cadastro-input"],["for","numero"],["type","text","id","numero","name","numero","placeholder","Digite o n\xfamero","required","",1,"cadastro-input"],["for","complemento"],["type","text","id","complemento","name","complemento","placeholder","Apartamento, bloco, etc. (opcional)",1,"cadastro-input"],["for","bairro"],["type","text","id","bairro","name","bairro","placeholder","Digite o bairro","required","",1,"cadastro-input"],["for","cidade"],["type","text","id","cidade","name","cidade","placeholder","Digite a cidade","required","",1,"cadastro-input"],["for","estado"],["id","estado","name","estado","required","",1,"cadastro-input"],["value","AC"],["value","AL"],["value","AP"],["value","AM"],["value","BA"],["value","CE"],["value","DF"],["value","ES"],["value","GO"],["value","MA"],["value","MT"],["value","MS"],["value","MG"],["value","PA"],["value","PB"],["value","PR"],["value","PE"],["value","PI"],["value","RJ"],["value","RN"],["value","RS"],["value","RO"],["value","RR"],["value","SC"],["value","SP"],["value","SE"],["value","TO"],[1,"button-group"],["type","submit",1,"cadastro-button",3,"disabled"],["type","button",1,"cadastro-button-secondary",3,"click"],[1,"photo-preview"],["alt","Preview da foto",1,"preview-image",3,"src"],["type","button",1,"remove-photo",3,"click"],[1,"bi","bi-x-circle"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.nrm(1,"app-navbar"),e.j41(2,"div",1)(3,"h2",2),e.EFF(4),e.k0s(),e.j41(5,"form",3),e.bIt("submit",function(a){return n.cadastrarFuncionario(),a.preventDefault()}),e.j41(6,"div",4)(7,"div",5)(8,"h3",6),e.EFF(9,"Dados Pessoais"),e.k0s(),e.j41(10,"label",7),e.EFF(11,"Status"),e.k0s(),e.j41(12,"select",8)(13,"option",9),e.EFF(14,"Selecione o status"),e.k0s(),e.j41(15,"option",10),e.EFF(16,"Ativo"),e.k0s(),e.j41(17,"option",11),e.EFF(18,"Inativo"),e.k0s()(),e.j41(19,"label",12),e.EFF(20,"Foto"),e.k0s(),e.j41(21,"input",13),e.bIt("change",function(a){return n.onFileSelected(a)}),e.k0s(),e.DNE(22,x,4,1,"div",14),e.j41(23,"label",15),e.EFF(24,"Nome completo"),e.k0s(),e.nrm(25,"input",16),e.j41(26,"label",17),e.EFF(27,"Email"),e.k0s(),e.nrm(28,"input",18),e.j41(29,"label",19),e.EFF(30,"Telefone"),e.k0s(),e.j41(31,"input",20),e.bIt("input",function(a){return n.formatarTelefone(a)}),e.k0s(),e.j41(32,"label",21),e.EFF(33,"Cargo"),e.k0s(),e.nrm(34,"input",22),e.j41(35,"label",23),e.EFF(36,"Sal\xe1rio"),e.k0s(),e.j41(37,"input",24),e.bIt("input",function(a){return n.formatarSalario(a)}),e.k0s(),e.j41(38,"label",25),e.EFF(39,"Data de admiss\xe3o"),e.k0s(),e.nrm(40,"input",26),e.j41(41,"label",27),e.EFF(42,"CPF"),e.k0s(),e.j41(43,"input",28),e.bIt("input",function(a){return n.formatarCpf(a)}),e.k0s()(),e.j41(44,"div",29)(45,"h3",6),e.EFF(46,"Endere\xe7o"),e.k0s(),e.j41(47,"label",30),e.EFF(48,"CEP"),e.k0s(),e.j41(49,"input",31),e.bIt("input",function(a){return n.formatarCep(a)})("blur",function(a){return n.onCepChange(a)}),e.k0s(),e.j41(50,"label",32),e.EFF(51,"Rua"),e.k0s(),e.nrm(52,"input",33),e.j41(53,"label",34),e.EFF(54,"N\xfamero"),e.k0s(),e.nrm(55,"input",35),e.j41(56,"label",36),e.EFF(57,"Complemento"),e.k0s(),e.nrm(58,"input",37),e.j41(59,"label",38),e.EFF(60,"Bairro"),e.k0s(),e.nrm(61,"input",39),e.j41(62,"label",40),e.EFF(63,"Cidade"),e.k0s(),e.nrm(64,"input",41),e.j41(65,"label",42),e.EFF(66,"Estado"),e.k0s(),e.j41(67,"select",43)(68,"option",9),e.EFF(69,"Selecione o estado"),e.k0s(),e.j41(70,"option",44),e.EFF(71,"Acre"),e.k0s(),e.j41(72,"option",45),e.EFF(73,"Alagoas"),e.k0s(),e.j41(74,"option",46),e.EFF(75,"Amap\xe1"),e.k0s(),e.j41(76,"option",47),e.EFF(77,"Amazonas"),e.k0s(),e.j41(78,"option",48),e.EFF(79,"Bahia"),e.k0s(),e.j41(80,"option",49),e.EFF(81,"Cear\xe1"),e.k0s(),e.j41(82,"option",50),e.EFF(83,"Distrito Federal"),e.k0s(),e.j41(84,"option",51),e.EFF(85,"Esp\xedrito Santo"),e.k0s(),e.j41(86,"option",52),e.EFF(87,"Goi\xe1s"),e.k0s(),e.j41(88,"option",53),e.EFF(89,"Maranh\xe3o"),e.k0s(),e.j41(90,"option",54),e.EFF(91,"Mato Grosso"),e.k0s(),e.j41(92,"option",55),e.EFF(93,"Mato Grosso do Sul"),e.k0s(),e.j41(94,"option",56),e.EFF(95,"Minas Gerais"),e.k0s(),e.j41(96,"option",57),e.EFF(97,"Par\xe1"),e.k0s(),e.j41(98,"option",58),e.EFF(99,"Para\xedba"),e.k0s(),e.j41(100,"option",59),e.EFF(101,"Paran\xe1"),e.k0s(),e.j41(102,"option",60),e.EFF(103,"Pernambuco"),e.k0s(),e.j41(104,"option",61),e.EFF(105,"Piau\xed"),e.k0s(),e.j41(106,"option",62),e.EFF(107,"Rio de Janeiro"),e.k0s(),e.j41(108,"option",63),e.EFF(109,"Rio Grande do Norte"),e.k0s(),e.j41(110,"option",64),e.EFF(111,"Rio Grande do Sul"),e.k0s(),e.j41(112,"option",65),e.EFF(113,"Rond\xf4nia"),e.k0s(),e.j41(114,"option",66),e.EFF(115,"Roraima"),e.k0s(),e.j41(116,"option",67),e.EFF(117,"Santa Catarina"),e.k0s(),e.j41(118,"option",68),e.EFF(119,"S\xe3o Paulo"),e.k0s(),e.j41(120,"option",69),e.EFF(121,"Sergipe"),e.k0s(),e.j41(122,"option",70),e.EFF(123,"Tocantins"),e.k0s()()()(),e.j41(124,"div",71)(125,"button",72),e.EFF(126),e.k0s(),e.j41(127,"button",73),e.bIt("click",function(){return n.limparFormulario()}),e.EFF(128," Limpar "),e.k0s()()()()()),2&o&&(e.R7$(4),e.SpI(" ",n.isEditMode?"Editar Funcion\xe1rio":"Cadastro de Funcion\xe1rio"," "),e.R7$(18),e.Y8G("ngIf",n.selectedPhoto),e.R7$(103),e.Y8G("disabled",n.isLoading),e.R7$(),e.SpI(" ",n.isLoading?n.isEditMode?"Atualizando...":"Cadastrando...":n.isEditMode?"Atualizar Funcion\xe1rio":"Cadastrar Funcion\xe1rio"," "))},dependencies:[k._,_.MD,_.bT],styles:[".cadastro-container[_ngcontent-%COMP%]{min-height:100vh;width:100vw;margin:0;padding:0;position:fixed;top:0;left:0;display:flex;align-items:center;justify-content:center;overflow:hidden}.cadastro-content[_ngcontent-%COMP%]{max-width:1200px;max-height:85vh;overflow-y:auto;margin-top:90px}.cadastro-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.cadastro-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#2a3441}.cadastro-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4a5568;border-radius:4px}.cadastro-form[_ngcontent-%COMP%]{color:#fff;font-family:Poppins,sans-serif}.cadastro-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#fff;font-family:Poppins,sans-serif;font-weight:500;font-size:14px;margin-bottom:8px;margin-top:15px}.cadastro-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:first-of-type{margin-top:0}.cadastro-title[_ngcontent-%COMP%]{color:#fff;text-align:center;font-family:Poppins,sans-serif;font-weight:600;margin-bottom:20px}.cadastro-input[_ngcontent-%COMP%]{background-color:#2a3441;width:100%;padding:12px;margin:8px 0;border:1px solid #3a4752;border-radius:4px;color:#fff;font-family:Poppins,sans-serif;font-size:14px}.cadastro-input[_ngcontent-%COMP%]::placeholder{color:#ffffffb3}.cadastro-input[type=file][_ngcontent-%COMP%]{padding:12px;background-color:#2a3441;border:1px solid #3a4752}.cadastro-input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{filter:invert(1);cursor:pointer}.cadastro-input[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#2a3441;color:#fff}.cadastro-input.loading[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'%3E%3Cpath fill='%23ffffff' d='M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z' opacity='.25'/%3E%3Cpath fill='%23ffffff' d='M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z'%3E%3CanimateTransform attributeName='transform' dur='0.75s' repeatCount='indefinite' type='rotate' values='0 12 12;360 12 12'/%3E%3C/path%3E%3C/svg%3E\");background-repeat:no-repeat;background-position:right 10px center;background-size:20px 20px}.form-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:40px;margin-bottom:30px}.column-left[_ngcontent-%COMP%], .column-right[_ngcontent-%COMP%]{display:flex;flex-direction:column}.section-title[_ngcontent-%COMP%]{color:#1570ef;font-family:Poppins,sans-serif;font-weight:600;margin:0 0 20px;font-size:20px;border-bottom:2px solid rgba(21,112,239,.3);padding-bottom:10px;text-align:center}@media (max-width: 768px){.form-columns[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.cadastro-content[_ngcontent-%COMP%]{max-width:90%;padding:20px}}.endereco-title[_ngcontent-%COMP%]{color:#fff;font-family:Poppins,sans-serif;font-weight:500;margin:20px 0 10px;font-size:18px;border-bottom:1px solid rgba(255,255,255,.2);padding-bottom:5px}.password-container[_ngcontent-%COMP%]{position:relative;width:100%}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:transparent;border:none;cursor:pointer;padding:5px;border-radius:3px;color:#ffffffb3}.password-toggle[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;color:#ffffffe6}.password-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.button-group[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:20px;justify-content:center;grid-column:1 / -1}.cadastro-button[_ngcontent-%COMP%]{background-color:#1570ef;color:#fff;border:none;border-radius:4px;padding:12px 24px;cursor:pointer;font-family:Poppins,sans-serif;font-weight:500;min-width:120px;font-size:14px}.cadastro-button[_ngcontent-%COMP%]:hover{background-color:#0d4797}.cadastro-button[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}.cadastro-button-secondary[_ngcontent-%COMP%]{background-color:transparent;color:#ffffffe6;border:1px solid rgba(255,255,255,.3);border-radius:4px;padding:12px 24px;cursor:pointer;font-family:Poppins,sans-serif;font-weight:500;min-width:120px;font-size:14px}.cadastro-button-secondary[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;border-color:#fff9;color:#fff}.cadastro-link-text[_ngcontent-%COMP%]{text-align:center;font-family:Poppins,sans-serif;margin-top:15px;color:#fff}.cadastro-link[_ngcontent-%COMP%]{color:#1570ef;text-decoration:none;font-weight:500;font-family:Poppins,sans-serif}.cadastro-link[_ngcontent-%COMP%]:hover{color:#0d4797}.photo-preview[_ngcontent-%COMP%]{position:relative;margin-top:10px;margin-bottom:15px;display:inline-block;border-radius:12px;overflow:hidden;border:2px solid rgba(255,255,255,.3);box-shadow:0 4px 15px #4f46e54d}.preview-image[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:cover;display:block}.remove-photo[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;background:#ef4444e6;color:#fff;border:none;border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;font-size:14px}.remove-photo[_ngcontent-%COMP%]:hover{background:#ef4444;transform:scale(1.1)}"]})}return s})()}}]);